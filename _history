{"entries":[{"timestamp":1759715667405,"editorVersion":"8.0.16","changes":[{"type":"edited","filename":"main.blocks","patch":[{"start1":0,"length1":51556,"diffs":[[1,"<xml xmlns=\"http://www.w3.org/1999/xhtml\">\n  <block type=\"pxt-on-start\"></block>\n  <block type=\"device_forever\"></block>\n</xml>"]]}]},{"type":"edited","filename":"main.ts","patch":[{"start1":0,"length1":4524,"diffs":[[1,"\n"]]}]},{"type":"edited","filename":"pxt.json","patch":[{"start1":110,"length1":129,"diffs":[[1,"        \"microphone\": \"*\"\n"]]},{"start1":227,"length1":35,"diffs":[[1,"    \"additionalFilePaths\": []\n"]]}]}]},{"timestamp":1759716233041,"editorVersion":"8.0.16","changes":[{"type":"edited","filename":"main.blocks","patch":[{"start1":0,"length1":37334,"diffs":[[1,"<xml xmlns=\"https://developers.google.com/blockly/xml\"><variables><variable id=\"=7=5J2/:Zc{J!?%#nEF)\">delta</variable><variable id=\"5tx.Nm)8Vm[PvW+h+%dx\">now</variable><variable id=\"~TN[L273*,Vd}xL.t1m8\">a</variable><variable id=\"9#aTh;7xMZtZ;h|BV9b!\">b</variable><variable id=\"b-?dP?0wYzTUvpUK`q1}\">aWasDown</variable><variable id=\"DHDjOV_y??(+fG{7Aed;\">bWasDown</variable><variable id=\"]oE8Ky9P/0me3Iq$X_#-\">aDownStart</variable><variable id=\"q^va-j]orH{kG!WU3?ZK\">bDownStart</variable><variable id=\"XwR?ciM=;K;@dwon_]7.\">abCalibratedFlag</variable><variable id=\"7{A@e-eU|}yuX^SgX7vu\">CALIBRATE_HOLD_MS</variable><variable id=\"uq8U`]Is*:JHU+0p7TC=\">neutralY</variable><variable id=\"Ur8?ms2aB0v]+@)Hb-^}\">bToggleFlag</variable><variable id=\"4t)7o}yc8Up?e*.fesHL\">SPORT_TOGGLE_HOLD_MS</variable><variable id=\"@UfsHos/mSP,lJX(WgQj\">sportMode</variable><variable id=\"HVP+W%X6P7^IYYY`=yDP\">rawY</variable><variable id=\"y2JZZ^z%ZitR*Xc!{*fl\">forwardRaw</variable><variable id=\"yX`wSh{-7WQnye=%@*2r\">absRaw</variable><variable id=\"AL)ZZ-Gfr*r{loANh1c-\">DEADZONE</variable><variable id=\"wDLECL}v_md.j%b;Z|AX\">mag</variable><variable id=\"vCR6@qu(EOPY@wSfnAN;\">MAX_RAW</variable><variable id=\"b%.hgd*cz=~bG{xIu!x3\">baseSpeed</variable><variable id=\"#d^DVpUKR2dP..|lFU[A\">MAX_SPEED</variable><variable id=\"PM+5HnBro;44jOEnFNgX\">speedFrac</variable><variable id=\"|~bBmC=ZS8lY.1K!hJWc\">reduction</variable><variable id=\"]@%?(WVh!9/V!$b#l.|5\">leftTarget</variable><variable id=\"*_X]^i3qmSGkWDBDG)vg\">rightTarget</variable><variable id=\"DQ#N%nJpg|*un2.g.vDy\">turnEffect</variable><variable id=\"[OMy+CEkd9Jun`mF4;|?\">TURN_BASE</variable><variable id=\"rx*D{+`dUI6%m!L{;x7e\">turnSign</variable><variable id=\"5|6-%P7hWK2dHHx)d$MP\">prevLeft</variable><variable id=\"Ut*qLU*_=v}0,Ub!)PUY\">RATE_LIMIT</variable><variable id=\"}}4|cpsYhExv/AC`;wb@\">prevRight</variable><variable id=\"DYgx[Ui#V,)^V7YvZLPk\">SMOOTH_FACTOR</variable><variable id=\"!hj)Dl6yzSATR`YOnufR\">seq</variable><variable id=\"K|a/X{yMMpQczl=gHg5%\">LOOP_MS</variable><variable id=\"Xw^JBHQ!ixHAad?c*zrP\">RADIO_GROUP</variable><variable id=\"cy$tUmY8v@NN64?5)cJL\">MAX_SPEED_NORMAL</variable><variable id=\"u*RK.?#48gq#+@,]fQQ-\">MAX_SPEED_SPORT</variable><variable id=\"rKoQRkF1IbHg;]I-|#*r\">SMOOTH_FACTOR_NORMAL</variable><variable id=\"02H?Iu{r/Uh4NqmHX;s=\">SMOOTH_FACTOR_SPORT</variable><variable id=\"5=@JoQ4_2Ond.h_U|tTY\">RATE_LIMIT_NORMAL</variable><variable id=\"J^Pr6#5MQz5h7gO~r,D_\">RATE_LIMIT_SPORT</variable></variables><block type=\"pxt-on-start\" x=\"20\" y=\"20\"><statement name=\"HANDLER\"><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"let seq = 0\" numlines=\"1\" declaredvars=\"seq\"></mutation><next><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"let sportMode = false\" numlines=\"1\" declaredvars=\"sportMode\"></mutation><next><block type=\"radio_set_group\"><comment pinned=\"false\" h=\"80\" w=\"160\">Sender: tilt-to-drive controller (no LEDs/visual feedback)</comment><value name=\"ID\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"255\" precision=\"0\"></mutation><field name=\"SLIDER\">7</field></shadow></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"K|a/X{yMMpQczl=gHg5%\">LOOP_MS</field><comment pinned=\"false\" h=\"80\" w=\"160\">CONFIG</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">25</field></shadow></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"Xw^JBHQ!ixHAad?c*zrP\">RADIO_GROUP</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">7</field></shadow></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"vCR6@qu(EOPY@wSfnAN;\">MAX_RAW</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">1000</field></shadow></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"cy$tUmY8v@NN64?5)cJL\">MAX_SPEED_NORMAL</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">230</field></shadow></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"u*RK.?#48gq#+@,]fQQ-\">MAX_SPEED_SPORT</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">255</field></shadow></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"AL)ZZ-Gfr*r{loANh1c-\">DEADZONE</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">30</field></shadow></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"[OMy+CEkd9Jun`mF4;|?\">TURN_BASE</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">250</field></shadow></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"rKoQRkF1IbHg;]I-|#*r\">SMOOTH_FACTOR_NORMAL</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">3</field></shadow></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"02H?Iu{r/Uh4NqmHX;s=\">SMOOTH_FACTOR_SPORT</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">2</field></shadow></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"5=@JoQ4_2Ond.h_U|tTY\">RATE_LIMIT_NORMAL</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">80</field></shadow></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"J^Pr6#5MQz5h7gO~r,D_\">RATE_LIMIT_SPORT</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">160</field></shadow></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"7{A@e-eU|}yuX^SgX7vu\">CALIBRATE_HOLD_MS</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">1200</field></shadow></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"4t)7o}yc8Up?e*.fesHL\">SPORT_TOGGLE_HOLD_MS</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">1200</field></shadow></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"uq8U`]Is*:JHU+0p7TC=\">neutralY</field><comment pinned=\"false\" h=\"80\" w=\"160\">STATE</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"device_acceleration\"><field name=\"NAME\">Dimension.Y</field></block></value><next><block type=\"radio_set_group\"><value name=\"ID\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"255\" precision=\"0\"></mutation><field name=\"SLIDER\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"Xw^JBHQ!ixHAad?c*zrP\">RADIO_GROUP</field></block></value></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></statement></block><block type=\"device_forever\" x=\"523\" y=\"20\"><comment pinned=\"false\" h=\"80\" w=\"160\">compute base speed</comment><statement name=\"HANDLER\"><block type=\"variables_set\"><field name=\"VAR\" id=\"5tx.Nm)8Vm[PvW+h+%dx\">now</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"device_get_running_time\"></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"~TN[L273*,Vd}xL.t1m8\">a</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"device_get_button2\"><field name=\"NAME\">Button.A</field></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"9#aTh;7xMZtZ;h|BV9b!\">b</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"device_get_button2\"><field name=\"NAME\">Button.B</field></block></value><next><block type=\"controls_if\"><comment pinned=\"false\" h=\"80\" w=\"160\">A+B long press -&gt; calibrate neutral (non-visual)</comment><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_operation\"><field name=\"OP\">AND</field><value name=\"A\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"~TN[L273*,Vd}xL.t1m8\">a</field></block></value><value name=\"B\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"9#aTh;7xMZtZ;h|BV9b!\">b</field></block></value></block></value><statement name=\"DO0\"><block type=\"controls_if\"><mutation else=\"1\"></mutation><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_negate\"><value name=\"BOOL\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_operation\"><field name=\"OP\">AND</field><value name=\"A\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"b-?dP?0wYzTUvpUK`q1}\">aWasDown</field></block></value><value name=\"B\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"DHDjOV_y??(+fG{7Aed;\">bWasDown</field></block></value></block></value></block></value><statement name=\"DO0\"><block type=\"variables_set\"><field name=\"VAR\" id=\"]oE8Ky9P/0me3Iq$X_#-\">aDownStart</field><comment pinned=\"false\" h=\"80\" w=\"160\">start of simultaneous press</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"5tx.Nm)8Vm[PvW+h+%dx\">now</field></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"q^va-j]orH{kG!WU3?ZK\">bDownStart</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"5tx.Nm)8Vm[PvW+h+%dx\">now</field></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"XwR?ciM=;K;@dwon_]7.\">abCalibratedFlag</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"logic_boolean\"><field name=\"BOOL\">FALSE</field></block></value></block></next></block></next></block></statement><statement name=\"ELSE\"><block type=\"controls_if\"><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_operation\"><field name=\"OP\">AND</field><value name=\"A\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_negate\"><value name=\"BOOL\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"XwR?ciM=;K;@dwon_]7.\">abCalibratedFlag</field></block></value></block></value><value name=\"B\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">GTE</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MINUS</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"5tx.Nm)8Vm[PvW+h+%dx\">now</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"]oE8Ky9P/0me3Iq$X_#-\">aDownStart</field></block></value></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"7{A@e-eU|}yuX^SgX7vu\">CALIBRATE_HOLD_MS</field></block></value></block></value></block></value><statement name=\"DO0\"><block type=\"variables_set\"><field name=\"VAR\" id=\"uq8U`]Is*:JHU+0p7TC=\">neutralY</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"device_acceleration\"><field name=\"NAME\">Dimension.Y</field></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"XwR?ciM=;K;@dwon_]7.\">abCalibratedFlag</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></block></value></block></next></block></statement></block></statement></block></statement><next><block type=\"controls_if\"><comment pinned=\"false\" h=\"80\" w=\"160\">B long press -&gt; toggle sport mode (non-visual)</comment><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_operation\"><field name=\"OP\">AND</field><value name=\"A\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"9#aTh;7xMZtZ;h|BV9b!\">b</field></block></value><value name=\"B\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_negate\"><value name=\"BOOL\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"~TN[L273*,Vd}xL.t1m8\">a</field></block></value></block></value></block></value><statement name=\"DO0\"><block type=\"controls_if\"><mutation else=\"1\"></mutation><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_negate\"><value name=\"BOOL\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"DHDjOV_y??(+fG{7Aed;\">bWasDown</field></block></value></block></value><statement name=\"DO0\"><block type=\"variables_set\"><field name=\"VAR\" id=\"q^va-j]orH{kG!WU3?ZK\">bDownStart</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"5tx.Nm)8Vm[PvW+h+%dx\">now</field></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"Ur8?ms2aB0v]+@)Hb-^}\">bToggleFlag</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"logic_boolean\"><field name=\"BOOL\">FALSE</field></block></value></block></next></block></statement><statement name=\"ELSE\"><block type=\"controls_if\"><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_operation\"><field name=\"OP\">AND</field><value name=\"A\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_negate\"><value name=\"BOOL\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"Ur8?ms2aB0v]+@)Hb-^}\">bToggleFlag</field></block></value></block></value><value name=\"B\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">GTE</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MINUS</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"5tx.Nm)8Vm[PvW+h+%dx\">now</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"q^va-j]orH{kG!WU3?ZK\">bDownStart</field></block></value></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"4t)7o}yc8Up?e*.fesHL\">SPORT_TOGGLE_HOLD_MS</field></block></value></block></value></block></value><statement name=\"DO0\"><block type=\"variables_set\"><field name=\"VAR\" id=\"@UfsHos/mSP,lJX(WgQj\">sportMode</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"logic_negate\"><value name=\"BOOL\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"@UfsHos/mSP,lJX(WgQj\">sportMode</field></block></value></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"Ur8?ms2aB0v]+@)Hb-^}\">bToggleFlag</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></block></value></block></next></block></statement></block></statement></block></statement><next><block type=\"variables_set\"><field name=\"VAR\" id=\"b-?dP?0wYzTUvpUK`q1}\">aWasDown</field><comment pinned=\"false\" h=\"80\" w=\"160\">update last button states</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"~TN[L273*,Vd}xL.t1m8\">a</field></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"DHDjOV_y??(+fG{7Aed;\">bWasDown</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"9#aTh;7xMZtZ;h|BV9b!\">b</field></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"HVP+W%X6P7^IYYY`=yDP\">rawY</field><comment pinned=\"false\" h=\"80\" w=\"160\">read and center tilt</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MINUS</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"device_acceleration\"><field name=\"NAME\">Dimension.Y</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"uq8U`]Is*:JHU+0p7TC=\">neutralY</field></block></value></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"y2JZZ^z%ZitR*Xc!{*fl\">forwardRaw</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MINUS</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"HVP+W%X6P7^IYYY`=yDP\">rawY</field></block></value></block></value><next><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"let MAX_SPEED = sportMode ? MAX_SPEED_SPORT : MAX_SPEED_NORMAL\" numlines=\"1\" declaredvars=\"MAX_SPEED\"></mutation><next><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"let SMOOTH_FACTOR = sportMode ? SMOOTH_FACTOR_SPORT : SMOOTH_FACTOR_NORMAL\" numlines=\"1\" declaredvars=\"SMOOTH_FACTOR\"></mutation><next><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"let RATE_LIMIT = sportMode ? RATE_LIMIT_SPORT : RATE_LIMIT_NORMAL\" numlines=\"1\" declaredvars=\"RATE_LIMIT\"></mutation><next><block type=\"variables_set\"><field name=\"VAR\" id=\"yX`wSh{-7WQnye=%@*2r\">absRaw</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_op3\"><value name=\"x\"><block type=\"variables_get\"><field name=\"VAR\" id=\"y2JZZ^z%ZitR*Xc!{*fl\">forwardRaw</field></block></value></block></value><next><block type=\"controls_if\"><mutation else=\"1\"></mutation><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">GT</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"yX`wSh{-7WQnye=%@*2r\">absRaw</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"AL)ZZ-Gfr*r{loANh1c-\">DEADZONE</field></block></value></block></value><statement name=\"DO0\"><block type=\"variables_set\"><field name=\"VAR\" id=\"wDLECL}v_md.j%b;Z|AX\">mag</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">DIVIDE</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MINUS</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"yX`wSh{-7WQnye=%@*2r\">absRaw</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"AL)ZZ-Gfr*r{loANh1c-\">DEADZONE</field></block></value></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MINUS</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"vCR6@qu(EOPY@wSfnAN;\">MAX_RAW</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"AL)ZZ-Gfr*r{loANh1c-\">DEADZONE</field></block></value></block></value></block></value><next><block type=\"controls_if\"><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">GT</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"wDLECL}v_md.j%b;Z|AX\">mag</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></value><statement name=\"DO0\"><block type=\"variables_set\"><field name=\"VAR\" id=\"wDLECL}v_md.j%b;Z|AX\">mag</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></statement><next><block type=\"variables_set\"><field name=\"VAR\" id=\"wDLECL}v_md.j%b;Z|AX\">mag</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">POWER</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"wDLECL}v_md.j%b;Z|AX\">mag</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"typescript_expression\"><field name=\"EXPRESSION\">sportMode ? 0.9 : 1.05</field></block></value></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"b%.hgd*cz=~bG{xIu!x3\">baseSpeed</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_js_round\"><field name=\"OP\">trunc</field><value name=\"ARG0\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MULTIPLY</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"wDLECL}v_md.j%b;Z|AX\">mag</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"#d^DVpUKR2dP..|lFU[A\">MAX_SPEED</field></block></value></block></value></block></value><next><block type=\"controls_if\"><mutation else=\"1\"></mutation><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">LT</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"y2JZZ^z%ZitR*Xc!{*fl\">forwardRaw</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value></block></value><statement name=\"DO0\"><block type=\"variables_set\"><field name=\"VAR\" id=\"b%.hgd*cz=~bG{xIu!x3\">baseSpeed</field><comment pinned=\"false\" h=\"80\" w=\"160\">forward remains positive</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"b%.hgd*cz=~bG{xIu!x3\">baseSpeed</field></block></value></block></statement><statement name=\"ELSE\"><block type=\"variables_set\"><field name=\"VAR\" id=\"b%.hgd*cz=~bG{xIu!x3\">baseSpeed</field><comment pinned=\"false\" h=\"80\" w=\"160\">backward negative</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MINUS</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"b%.hgd*cz=~bG{xIu!x3\">baseSpeed</field></block></value></block></value></block></statement></block></next></block></next></block></next></block></next></block></statement><statement name=\"ELSE\"><block type=\"variables_set\"><field name=\"VAR\" id=\"b%.hgd*cz=~bG{xIu!x3\">baseSpeed</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value></block></statement><next><block type=\"variables_set\"><field name=\"VAR\" id=\"PM+5HnBro;44jOEnFNgX\">speedFrac</field><comment pinned=\"false\" h=\"80\" w=\"160\">steering</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_op2\"><field name=\"op\">min</field><value name=\"x\"><block type=\"math_arithmetic\"><field name=\"OP\">DIVIDE</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_op3\"><value name=\"x\"><block type=\"variables_get\"><field name=\"VAR\" id=\"b%.hgd*cz=~bG{xIu!x3\">baseSpeed</field></block></value></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"#d^DVpUKR2dP..|lFU[A\">MAX_SPEED</field></block></value></block></value><value name=\"y\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"|~bBmC=ZS8lY.1K!hJWc\">reduction</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">POWER</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MINUS</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"PM+5HnBro;44jOEnFNgX\">speedFrac</field></block></value></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0.7</field></shadow></value></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"]@%?(WVh!9/V!$b#l.|5\">leftTarget</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"b%.hgd*cz=~bG{xIu!x3\">baseSpeed</field></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"*_X]^i3qmSGkWDBDG)vg\">rightTarget</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"b%.hgd*cz=~bG{xIu!x3\">baseSpeed</field></block></value><next><block type=\"controls_if\"><mutation elseif=\"1\"></mutation><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_operation\"><field name=\"OP\">AND</field><value name=\"A\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"~TN[L273*,Vd}xL.t1m8\">a</field></block></value><value name=\"B\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"9#aTh;7xMZtZ;h|BV9b!\">b</field></block></value></block></value><statement name=\"DO0\"><block type=\"variables_set\"><field name=\"VAR\" id=\"]@%?(WVh!9/V!$b#l.|5\">leftTarget</field><comment pinned=\"false\" h=\"80\" w=\"160\">immediate stop</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"*_X]^i3qmSGkWDBDG)vg\">rightTarget</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value></block></next></block></statement><value name=\"IF1\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_operation\"><field name=\"OP\">OR</field><value name=\"A\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"~TN[L273*,Vd}xL.t1m8\">a</field></block></value><value name=\"B\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"9#aTh;7xMZtZ;h|BV9b!\">b</field></block></value></block></value><statement name=\"DO1\"><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"let turnSign = a ? -1 : 1\" numlines=\"1\" declaredvars=\"turnSign\"></mutation><next><block type=\"variables_set\"><field name=\"VAR\" id=\"DQ#N%nJpg|*un2.g.vDy\">turnEffect</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_js_round\"><field name=\"OP\">trunc</field><value name=\"ARG0\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MULTIPLY</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"[OMy+CEkd9Jun`mF4;|?\">TURN_BASE</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">ADD</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0.6</field></shadow></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MULTIPLY</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0.4</field></shadow></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"|~bBmC=ZS8lY.1K!hJWc\">reduction</field></block></value></block></value></block></value></block></value></block></value><next><block type=\"controls_if\"><mutation else=\"1\"></mutation><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">NEQ</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"b%.hgd*cz=~bG{xIu!x3\">baseSpeed</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value></block></value><statement name=\"DO0\"><block type=\"variables_set\"><field name=\"VAR\" id=\"]@%?(WVh!9/V!$b#l.|5\">leftTarget</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MINUS</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"b%.hgd*cz=~bG{xIu!x3\">baseSpeed</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MULTIPLY</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"rx*D{+`dUI6%m!L{;x7e\">turnSign</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"DQ#N%nJpg|*un2.g.vDy\">turnEffect</field></block></value></block></value></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"*_X]^i3qmSGkWDBDG)vg\">rightTarget</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">ADD</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"b%.hgd*cz=~bG{xIu!x3\">baseSpeed</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MULTIPLY</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"rx*D{+`dUI6%m!L{;x7e\">turnSign</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"DQ#N%nJpg|*un2.g.vDy\">turnEffect</field></block></value></block></value></block></value></block></next></block></statement><statement name=\"ELSE\"><block type=\"variables_set\"><field name=\"VAR\" id=\"]@%?(WVh!9/V!$b#l.|5\">leftTarget</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MULTIPLY</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MINUS</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"rx*D{+`dUI6%m!L{;x7e\">turnSign</field></block></value></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"DQ#N%nJpg|*un2.g.vDy\">turnEffect</field></block></value></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"*_X]^i3qmSGkWDBDG)vg\">rightTarget</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MULTIPLY</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"rx*D{+`dUI6%m!L{;x7e\">turnSign</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"DQ#N%nJpg|*un2.g.vDy\">turnEffect</field></block></value></block></value></block></next></block></statement></block></next></block></next></block></statement><next><block type=\"variables_set\"><field name=\"VAR\" id=\"]@%?(WVh!9/V!$b#l.|5\">leftTarget</field><comment pinned=\"false\" h=\"80\" w=\"160\">clamp + smoothing</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"function_call_output\"><mutation name=\"clamp\" functionid=\"+UG_R`NwnGc]$?D]1Q]X\"><arg name=\"v\" id=\"hml9dubu0b01ixzlr5dx\" type=\"number\"></arg><arg name=\"lo\" id=\"q2axmlcq00i1dsj498rn7\" type=\"number\"></arg><arg name=\"hi\" id=\"5xn82ps8fv0hvoqo8tbz\" type=\"number\"></arg></mutation><value name=\"hml9dubu0b01ixzlr5dx\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow><block type=\"math_js_round\"><field name=\"OP\">trunc</field><value name=\"ARG0\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"]@%?(WVh!9/V!$b#l.|5\">leftTarget</field></block></value></block></value><value name=\"q2axmlcq00i1dsj498rn7\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MINUS</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"#d^DVpUKR2dP..|lFU[A\">MAX_SPEED</field></block></value></block></value><value name=\"5xn82ps8fv0hvoqo8tbz\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"#d^DVpUKR2dP..|lFU[A\">MAX_SPEED</field></block></value></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"*_X]^i3qmSGkWDBDG)vg\">rightTarget</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"function_call_output\"><mutation name=\"clamp\" functionid=\"+UG_R`NwnGc]$?D]1Q]X\"><arg name=\"v\" id=\"hml9dubu0b01ixzlr5dx\" type=\"number\"></arg><arg name=\"lo\" id=\"q2axmlcq00i1dsj498rn7\" type=\"number\"></arg><arg name=\"hi\" id=\"5xn82ps8fv0hvoqo8tbz\" type=\"number\"></arg></mutation><value name=\"hml9dubu0b01ixzlr5dx\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow><block type=\"math_js_round\"><field name=\"OP\">trunc</field><value name=\"ARG0\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"*_X]^i3qmSGkWDBDG)vg\">rightTarget</field></block></value></block></value><value name=\"q2axmlcq00i1dsj498rn7\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MINUS</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"#d^DVpUKR2dP..|lFU[A\">MAX_SPEED</field></block></value></block></value><value name=\"5xn82ps8fv0hvoqo8tbz\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"#d^DVpUKR2dP..|lFU[A\">MAX_SPEED</field></block></value></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"]@%?(WVh!9/V!$b#l.|5\">leftTarget</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"function_call_output\"><mutation name=\"rateLimit\" functionid=\"D:-P+K?+6-bJY,8-Gy(V\"><arg name=\"prev\" id=\"fbwpxeg9a9cy322b2yx7cs\" type=\"number\"></arg><arg name=\"target\" id=\"sd6aa3xzecqiugobogiz\" type=\"number\"></arg><arg name=\"maxDelta\" id=\"eew3epan7rhro0d8bwxx\" type=\"number\"></arg></mutation><value name=\"fbwpxeg9a9cy322b2yx7cs\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"5|6-%P7hWK2dHHx)d$MP\">prevLeft</field></block></value><value name=\"sd6aa3xzecqiugobogiz\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"]@%?(WVh!9/V!$b#l.|5\">leftTarget</field></block></value><value name=\"eew3epan7rhro0d8bwxx\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"Ut*qLU*_=v}0,Ub!)PUY\">RATE_LIMIT</field></block></value></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"*_X]^i3qmSGkWDBDG)vg\">rightTarget</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"function_call_output\"><mutation name=\"rateLimit\" functionid=\"D:-P+K?+6-bJY,8-Gy(V\"><arg name=\"prev\" id=\"fbwpxeg9a9cy322b2yx7cs\" type=\"number\"></arg><arg name=\"target\" id=\"sd6aa3xzecqiugobogiz\" type=\"number\"></arg><arg name=\"maxDelta\" id=\"eew3epan7rhro0d8bwxx\" type=\"number\"></arg></mutation><value name=\"fbwpxeg9a9cy322b2yx7cs\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"}}4|cpsYhExv/AC`;wb@\">prevRight</field></block></value><value name=\"sd6aa3xzecqiugobogiz\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"*_X]^i3qmSGkWDBDG)vg\">rightTarget</field></block></value><value name=\"eew3epan7rhro0d8bwxx\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"Ut*qLU*_=v}0,Ub!)PUY\">RATE_LIMIT</field></block></value></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"]@%?(WVh!9/V!$b#l.|5\">leftTarget</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_js_op\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" op-type=\"infix\"></mutation><field name=\"OP\">idiv</field><value name=\"ARG0\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">ADD</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MULTIPLY</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"5|6-%P7hWK2dHHx)d$MP\">prevLeft</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MINUS</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"DYgx[Ui#V,)^V7YvZLPk\">SMOOTH_FACTOR</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></value></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"]@%?(WVh!9/V!$b#l.|5\">leftTarget</field></block></value></block></value><value name=\"ARG1\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"DYgx[Ui#V,)^V7YvZLPk\">SMOOTH_FACTOR</field></block></value></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"*_X]^i3qmSGkWDBDG)vg\">rightTarget</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_js_op\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" op-type=\"infix\"></mutation><field name=\"OP\">idiv</field><value name=\"ARG0\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">ADD</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MULTIPLY</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"}}4|cpsYhExv/AC`;wb@\">prevRight</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MINUS</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"DYgx[Ui#V,)^V7YvZLPk\">SMOOTH_FACTOR</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></value></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"*_X]^i3qmSGkWDBDG)vg\">rightTarget</field></block></value></block></value><value name=\"ARG1\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"DYgx[Ui#V,)^V7YvZLPk\">SMOOTH_FACTOR</field></block></value></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"5|6-%P7hWK2dHHx)d$MP\">prevLeft</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"]@%?(WVh!9/V!$b#l.|5\">leftTarget</field></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"}}4|cpsYhExv/AC`;wb@\">prevRight</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"*_X]^i3qmSGkWDBDG)vg\">rightTarget</field></block></value><next><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"seq = (seq + 1) &amp; 65535\" numlines=\"1\"></mutation><next><block type=\"radio_datagram_send_string\"><value name=\"msg\"><block type=\"text_join\" inline=\"false\"><mutation items=\"5\"></mutation><value name=\"ADD0\"><shadow type=\"text\"><field name=\"TEXT\"></field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"!hj)Dl6yzSATR`YOnufR\">seq</field></block></value><value name=\"ADD1\"><shadow type=\"text\"><field name=\"TEXT\">,</field></shadow></value><value name=\"ADD2\"><shadow type=\"text\"><field name=\"TEXT\"></field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"]@%?(WVh!9/V!$b#l.|5\">leftTarget</field></block></value><value name=\"ADD3\"><shadow type=\"text\"><field name=\"TEXT\">,</field></shadow></value><value name=\"ADD4\"><shadow type=\"text\"><field name=\"TEXT\"></field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"*_X]^i3qmSGkWDBDG)vg\">rightTarget</field></block></value></block></value><next><block type=\"device_pause\"><value name=\"pause\"><shadow type=\"timePicker\"><field name=\"ms\">500</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"K|a/X{yMMpQczl=gHg5%\">LOOP_MS</field></block></value></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></statement></block><block type=\"function_definition\" x=\"1772\" y=\"20\"><mutation name=\"clamp\" functionid=\"+UG_R`NwnGc]$?D]1Q]X\"><arg name=\"v\" id=\"hml9dubu0b01ixzlr5dx\" type=\"number\"></arg><arg name=\"lo\" id=\"q2axmlcq00i1dsj498rn7\" type=\"number\"></arg><arg name=\"hi\" id=\"5xn82ps8fv0hvoqo8tbz\" type=\"number\"></arg></mutation><field name=\"function_name\">clamp</field><value name=\"hml9dubu0b01ixzlr5dx\"><block type=\"argument_reporter_number\" deletable=\"false\"><field name=\"VALUE\">v</field></block></value><value name=\"q2axmlcq00i1dsj498rn7\"><block type=\"argument_reporter_number\" deletable=\"false\"><field name=\"VALUE\">lo</field></block></value><value name=\"5xn82ps8fv0hvoqo8tbz\"><block type=\"argument_reporter_number\" deletable=\"false\"><field name=\"VALUE\">hi</field></block></value><statement name=\"STACK\"><block type=\"controls_if\"><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">LT</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"argument_reporter_number\"><field name=\"VALUE\">v</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"argument_reporter_number\"><field name=\"VALUE\">lo</field></block></value></block></value><statement name=\"DO0\"><block type=\"function_return\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" no_return_value=\"false\"></mutation><value name=\"RETURN_VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"argument_reporter_number\"><field name=\"VALUE\">lo</field></block></value></block></statement><next><block type=\"controls_if\"><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">GT</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"argument_reporter_number\"><field name=\"VALUE\">v</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"argument_reporter_number\"><field name=\"VALUE\">hi</field></block></value></block></value><statement name=\"DO0\"><block type=\"function_return\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" no_return_value=\"false\"></mutation><value name=\"RETURN_VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"argument_reporter_number\"><field name=\"VALUE\">hi</field></block></value></block></statement><next><block type=\"function_return\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" no_return_value=\"false\"></mutation><value name=\"RETURN_VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"argument_reporter_number\"><field name=\"VALUE\">v</field></block></value></block></next></block></next></block></statement></block><block type=\"function_definition\" x=\"2172\" y=\"20\"><mutation name=\"rateLimit\" functionid=\"D:-P+K?+6-bJY,8-Gy(V\"><arg name=\"prev\" id=\"fbwpxeg9a9cy322b2yx7cs\" type=\"number\"></arg><arg name=\"target\" id=\"sd6aa3xzecqiugobogiz\" type=\"number\"></arg><arg name=\"maxDelta\" id=\"eew3epan7rhro0d8bwxx\" type=\"number\"></arg></mutation><field name=\"function_name\">rateLimit</field><value name=\"fbwpxeg9a9cy322b2yx7cs\"><block type=\"argument_reporter_number\" deletable=\"false\"><field name=\"VALUE\">prev</field></block></value><value name=\"sd6aa3xzecqiugobogiz\"><block type=\"argument_reporter_number\" deletable=\"false\"><field name=\"VALUE\">target</field></block></value><value name=\"eew3epan7rhro0d8bwxx\"><block type=\"argument_reporter_number\" deletable=\"false\"><field name=\"VALUE\">maxDelta</field></block></value><statement name=\"STACK\"><block type=\"variables_set\"><field name=\"VAR\" id=\"=7=5J2/:Zc{J!?%#nEF)\">delta</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MINUS</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"argument_reporter_number\"><field name=\"VALUE\">target</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"argument_reporter_number\"><field name=\"VALUE\">prev</field></block></value></block></value><next><block type=\"controls_if\"><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">GT</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"=7=5J2/:Zc{J!?%#nEF)\">delta</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"argument_reporter_number\"><field name=\"VALUE\">maxDelta</field></block></value></block></value><statement name=\"DO0\"><block type=\"variables_set\"><field name=\"VAR\" id=\"=7=5J2/:Zc{J!?%#nEF)\">delta</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"argument_reporter_number\"><field name=\"VALUE\">maxDelta</field></block></value></block></statement><next><block type=\"controls_if\"><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">LT</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"=7=5J2/:Zc{J!?%#nEF)\">delta</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MINUS</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"argument_reporter_number\"><field name=\"VALUE\">maxDelta</field></block></value></block></value></block></value><statement name=\"DO0\"><block type=\"variables_set\"><field name=\"VAR\" id=\"=7=5J2/:Zc{J!?%#nEF)\">delta</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MINUS</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"argument_reporter_number\"><field name=\"VALUE\">maxDelta</field></block></value></block></value></block></statement><next><block type=\"function_return\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" no_return_value=\"false\"></mutation><value name=\"RETURN_VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">ADD</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"argument_reporter_number\"><field name=\"VALUE\">prev</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"=7=5J2/:Zc{J!?%#nEF)\">delta</field></block></value></block></value></block></next></block></next></block></next></block></statement></block></xml>"]]}]},{"type":"edited","filename":"main.ts","patch":[{"start1":454,"length1":64,"diffs":[[1,""]]},{"start1":493,"length1":0,"diffs":[[1,"let reduction = 0\nlet speedFrac = 0\n"]]},{"start1":606,"length1":0,"diffs":[[1,"let bToggleFlag = false\nlet abCalibratedFlag = false\nlet bDownStart = 0\nlet aDownStart = 0\nlet bWasDown = false\nlet aWasDown = false\nlet b = false\nlet a = false\nlet now = 0\n"]]},{"start1":793,"length1":80,"diffs":[[1,"let seq = 0\nlet sportMode = false\n// Sender: tilt-to-drive controller (no LEDs/visual feedback)\nradio.setGroup(7)\n// CONFIG\n"]]},{"start1":934,"length1":0,"diffs":[[1,"let RADIO_GROUP = 7\n"]]},{"start1":973,"length1":20,"diffs":[[1,"let MAX_SPEED_NORMAL = 230\nlet MAX_SPEED_SPORT = 255\n"]]},{"start1":1044,"length1":63,"diffs":[[1,"let TURN_BASE = 250\nlet SMOOTH_FACTOR_NORMAL = 3\nlet SMOOTH_FACTOR_SPORT = 2\nlet RATE_LIMIT_NORMAL = 80\nlet RATE_LIMIT_SPORT = 160\nlet CALIBRATE_HOLD_MS = 1200\nlet SPORT_TOGGLE_HOLD_MS = 1200\n// STATE\n"]]},{"start1":1292,"length1":91,"diffs":[[1,"radio.setGroup(RADIO_GROUP)\n// compute base speed\n"]]},{"start1":1370,"length1":25,"diffs":[[1,"    now = input.runningTime()\n    a = input.buttonIsPressed(Button.A)\n    b = input.buttonIsPressed(Button.B)\n    // A+B long press -> calibrate neutral (non-visual)\n    if (a && b) {\n        if (!(aWasDown && bWasDown)) {\n            // start of simultaneous press\n            aDownStart = now\n            bDownStart = now\n            abCalibratedFlag = false\n        } else {\n            if (!(abCalibratedFlag) && now - aDownStart >= CALIBRATE_HOLD_MS) {\n                neutralY = input.acceleration(Dimension.Y)\n                abCalibratedFlag = true\n            }\n        }\n    }\n    // B long press -> toggle sport mode (non-visual)\n    if (b && !(a)) {\n        if (!(bWasDown)) {\n            bDownStart = now\n            bToggleFlag = false\n        } else {\n            if (!(bToggleFlag) && now - bDownStart >= SPORT_TOGGLE_HOLD_MS) {\n                sportMode = !(sportMode)\n                bToggleFlag = true\n            }\n        }\n    }\n    // update last button states\n    aWasDown = a\n    bWasDown = b\n    // read and center tilt\n"]]},{"start1":2496,"length1":34,"diffs":[[1,"    let MAX_SPEED = sportMode ? MAX_SPEED_SPORT : MAX_SPEED_NORMAL\nlet SMOOTH_FACTOR = sportMode ? SMOOTH_FACTOR_SPORT : SMOOTH_FACTOR_NORMAL\nlet RATE_LIMIT = sportMode ? RATE_LIMIT_SPORT : RATE_LIMIT_NORMAL\nabsRaw = Math.abs(forwardRaw)\n"]]},{"start1":2873,"length1":162,"diffs":[[1,"        mag = mag ** sportMode ? 0.9 : 1.05\n        baseSpeed = Math.trunc(mag * MAX_SPEED)\n        if (forwardRaw < 0) {\n            // forward remains positive\n            baseSpeed = baseSpeed\n        } else {\n            // backward negative\n            baseSpeed = 0 - baseSpeed\n        }\n    } else {\n        baseSpeed = 0\n"]]},{"start1":3208,"length1":0,"diffs":[[1,"    // steering\n    speedFrac = Math.min(Math.abs(baseSpeed) / MAX_SPEED, 1)\n    reduction = (1 - speedFrac) ** 0.7\n"]]},{"start1":3379,"length1":95,"diffs":[[1,""]]},{"start1":3397,"length1":34,"diffs":[[1,"        // immediate stop\n"]]},{"start1":3495,"length1":41,"diffs":[[1,""]]},{"start1":3529,"length1":169,"diffs":[[1,"turnEffect = Math.trunc(TURN_BASE * (0.6 + 0.4 * reduction))\n"]]},{"start1":3620,"length1":72,"diffs":[[1,""]]},{"start1":3756,"length1":45,"diffs":[[1,""]]},{"start1":3873,"length1":36,"diffs":[[1,"    // clamp + smoothing\n"]]},{"start1":4402,"length1":83,"diffs":[[1,"    seq = (seq + 1) & 65535\nradio.sendString(\"\" + seq + \",\" + leftTarget + \",\" + rightTarget)\n"]]}]}]},{"timestamp":1759716623023,"editorVersion":"8.0.16","changes":[{"type":"edited","filename":"pxt.json","patch":[{"start1":330,"length1":31,"diffs":[[1,"    \"preferredEditor\": \"blocksprj\"\n"]]}]}]},{"timestamp":1759717420975,"editorVersion":"8.0.16","changes":[{"type":"edited","filename":"main.ts","patch":[{"start1":0,"length1":455,"diffs":[[1,"function clamp (v: number, lo: number, hi: number) {\n    if (v < lo) {\n        return lo\n    }\n    if (v > hi) {\n        return hi\n    }\n"]]},{"start1":152,"length1":196,"diffs":[[1,"function rateLimit (prev: number, target: number, maxDelta: number) {\n    delta = target - prev\n    if (delta > maxDelta) {\n        delta = maxDelta\n    }\n    if (delta < 0 - maxDelta) {\n        delta = 0 - maxDelta\n    }\n"]]},{"start1":400,"length1":60,"diffs":[[1,"let prevRight = 0\nlet prevLeft = 0\nlet turnEffect = 0\nlet reduction = 0\nlet speedFrac = 0\nlet b = false\nlet a = false\nlet rightTarget = 0\nlet leftTarget = 0\nlet baseSpeed = 0\nlet mag = 0\nlet absRaw = 0\nlet forwardRaw = 0\nlet rawY = 0\nlet delta = 0\nradio.setGroup(3)\n// Sender: tilt-to-drive with steering while moving (no LEDs)\nlet LOOP_MS = 25\nlet MAX_RAW = 1000\nlet MAX_SPEED = 255\nlet DEADZONE = 30\nlet TURN_BASE = 220\nlet SMOOTH_FACTOR = 2\nlet RATE_LIMIT = 160\nlet neutralY = input.acceleration(Dimension.Y)\n// compute base speed (signed): forwardRaw < 0 -> forward positive, else backward negative\n"]]},{"start1":1031,"length1":464,"diffs":[[1,"    // read and center Y\n    rawY = input.acceleration(Dimension.Y) - neutralY\n    forwardRaw = 0 - rawY\n    absRaw = Math.abs(forwardRaw)\n    if (absRaw > DEADZONE) {\n        mag = (absRaw - DEADZONE) / (MAX_RAW - DEADZONE)\n        if (mag > 1) {\n            mag = 1\n"]]},{"start1":1309,"length1":0,"diffs":[[1,"        // slightly aggressive curve for punch\n        mag = mag ** 0.9\n        let sign = forwardRaw < 0 ? 1 : -1\nbaseSpeed = Math.trunc(mag * MAX_SPEED) * sign\n"]]},{"start1":1477,"length1":785,"diffs":[[1,"    leftTarget = baseSpeed\n    rightTarget = baseSpeed\n    // buttons\n    a = input.buttonIsPressed(Button.A)\n    b = input.buttonIsPressed(Button.B)\n"]]},{"start1":1645,"length1":26,"diffs":[[1,"        // both -> immediate stop\n"]]},{"start1":1751,"length1":0,"diffs":[[1,"        // A = left (-1), B = right (+1)\n"]]},{"start1":1826,"length1":196,"diffs":[[1,"speedFrac = Math.min(Math.abs(baseSpeed) / MAX_SPEED, 1)\n        reduction = (1 - speedFrac) ** 0.7\n        turnEffect = Math.trunc(TURN_BASE * (0.6 + 0.4 * reduction))\n"]]},{"start1":2025,"length1":47,"diffs":[[1,"            // preserve forward/back component and add/subtract turning\n"]]},{"start1":2233,"length1":92,"diffs":[[1,"            // no forward -> rotate in place\n            leftTarget = (0 - turnSign) * turnEffect\n"]]},{"start1":2395,"length1":182,"diffs":[[1,"    // clamp, rate limit, smoothing\n    leftTarget = clamp(Math.trunc(leftTarget), 0 - MAX_SPEED, MAX_SPEED)\n    rightTarget = clamp(Math.trunc(rightTarget), 0 - MAX_SPEED, MAX_SPEED)\n"]]},{"start1":2704,"length1":1,"diffs":[[1,""]]},{"start1":2881,"length1":1,"diffs":[[1,""]]},{"start1":2935,"length1":1,"diffs":[[1,""]]},{"start1":3018,"length1":489,"diffs":[[1,""]]}]}]},{"timestamp":1759717423466,"editorVersion":"8.0.16","changes":[{"type":"edited","filename":"main.blocks","patch":[{"start1":0,"length1":45219,"diffs":[[1,"<xml xmlns=\"https://developers.google.com/blockly/xml\"><variables><variable id=\"~U_zudSh2-[Huvd`mecM\">delta</variable><variable id=\"YOL~bEp{DuE?~VY~pH[`\">rawY</variable><variable id=\"B}fwCt7Do=$0Q0?#sl5`\">neutralY</variable><variable id=\"jvQp}X^5~W(B{gw%iVG$\">forwardRaw</variable><variable id=\"6cm$#3ShJY$6/S-6WH?[\">absRaw</variable><variable id=\"wZnMHCsK@Via,(ZvfDov\">DEADZONE</variable><variable id=\"(eoD{Jy1IH4wF%nsU+Mp\">mag</variable><variable id=\"l=KioqHwFTcF!W-p/Xb}\">MAX_RAW</variable><variable id=\"R!9us,`.fd+xv9`Mtl,X\">baseSpeed</variable><variable id=\"sWIFw1!$:?thMF@v%_+H\">MAX_SPEED</variable><variable id=\"pUVQ9^j*`=3/GHkI}IG0\">sign</variable><variable id=\"A-70K23%O-G:u0NI~nKx\">leftTarget</variable><variable id=\"MbZ1=ADHa,W0)oDLmQXg\">rightTarget</variable><variable id=\"j4C=d,5jZJcF-U$%XZDB\">a</variable><variable id=\"s+1KjFg%X:om[+623+eq\">b</variable><variable id=\"Z`=i)aq0*j3e?TsBTM1G\">speedFrac</variable><variable id=\"$303o*Pskt|!Z+C0Ts~e\">reduction</variable><variable id=\"Z.T~p/(93}t_dn*2f98h\">turnEffect</variable><variable id=\"_gh5}RP?#?)`Cpa7Kodk\">TURN_BASE</variable><variable id=\"8Z2H40vrZJ#^hz$TmJ)#\">turnSign</variable><variable id=\"m1TA5VpaFowWi3$UbYuE\">prevLeft</variable><variable id=\"(88?/v8!~,Wf|v$qtp+G\">RATE_LIMIT</variable><variable id=\"X3Zo?G*km]8eqNu}6_BV\">prevRight</variable><variable id=\"|T0.0N=nm)6,v]sw?FdG\">SMOOTH_FACTOR</variable><variable id=\"Rx-8k9FA::,3f]DZc!PM\">LOOP_MS</variable></variables><block type=\"pxt-on-start\" x=\"0\" y=\"0\"><statement name=\"HANDLER\"><block type=\"radio_set_group\"><value name=\"ID\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"255\" precision=\"0\"></mutation><field name=\"SLIDER\">3</field></shadow></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"Rx-8k9FA::,3f]DZc!PM\">LOOP_MS</field><comment pinned=\"false\" h=\"80\" w=\"160\">Sender: tilt-to-drive with steering while moving (no LEDs)</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">25</field></shadow></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"l=KioqHwFTcF!W-p/Xb}\">MAX_RAW</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">1000</field></shadow></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"sWIFw1!$:?thMF@v%_+H\">MAX_SPEED</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">255</field></shadow></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"wZnMHCsK@Via,(ZvfDov\">DEADZONE</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">30</field></shadow></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"_gh5}RP?#?)`Cpa7Kodk\">TURN_BASE</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">220</field></shadow></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"|T0.0N=nm)6,v]sw?FdG\">SMOOTH_FACTOR</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">2</field></shadow></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"(88?/v8!~,Wf|v$qtp+G\">RATE_LIMIT</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">160</field></shadow></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"B}fwCt7Do=$0Q0?#sl5`\">neutralY</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"device_acceleration\"><field name=\"NAME\">Dimension.Y</field></block></value></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></statement></block><block type=\"device_forever\" x=\"503\" y=\"0\"><comment pinned=\"false\" h=\"80\" w=\"160\">compute base speed (signed): forwardRaw &lt; 0 -&gt; forward positive, else backward negative</comment><statement name=\"HANDLER\"><block type=\"variables_set\"><field name=\"VAR\" id=\"YOL~bEp{DuE?~VY~pH[`\">rawY</field><comment pinned=\"false\" h=\"80\" w=\"160\">read and center Y</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MINUS</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"device_acceleration\"><field name=\"NAME\">Dimension.Y</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"B}fwCt7Do=$0Q0?#sl5`\">neutralY</field></block></value></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"jvQp}X^5~W(B{gw%iVG$\">forwardRaw</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MINUS</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"YOL~bEp{DuE?~VY~pH[`\">rawY</field></block></value></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"6cm$#3ShJY$6/S-6WH?[\">absRaw</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_op3\"><value name=\"x\"><block type=\"variables_get\"><field name=\"VAR\" id=\"jvQp}X^5~W(B{gw%iVG$\">forwardRaw</field></block></value></block></value><next><block type=\"controls_if\"><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">GT</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"6cm$#3ShJY$6/S-6WH?[\">absRaw</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"wZnMHCsK@Via,(ZvfDov\">DEADZONE</field></block></value></block></value><statement name=\"DO0\"><block type=\"variables_set\"><field name=\"VAR\" id=\"(eoD{Jy1IH4wF%nsU+Mp\">mag</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">DIVIDE</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MINUS</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"6cm$#3ShJY$6/S-6WH?[\">absRaw</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"wZnMHCsK@Via,(ZvfDov\">DEADZONE</field></block></value></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MINUS</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"l=KioqHwFTcF!W-p/Xb}\">MAX_RAW</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"wZnMHCsK@Via,(ZvfDov\">DEADZONE</field></block></value></block></value></block></value><next><block type=\"controls_if\"><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">GT</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"(eoD{Jy1IH4wF%nsU+Mp\">mag</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></value><statement name=\"DO0\"><block type=\"variables_set\"><field name=\"VAR\" id=\"(eoD{Jy1IH4wF%nsU+Mp\">mag</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></statement><next><block type=\"variables_set\"><field name=\"VAR\" id=\"(eoD{Jy1IH4wF%nsU+Mp\">mag</field><comment pinned=\"false\" h=\"80\" w=\"160\">slightly aggressive curve for punch</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">POWER</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"(eoD{Jy1IH4wF%nsU+Mp\">mag</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0.9</field></shadow></value></block></value><next><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"let sign = forwardRaw &lt; 0 ? 1 : -1\" numlines=\"1\" declaredvars=\"sign\"></mutation><next><block type=\"variables_set\"><field name=\"VAR\" id=\"R!9us,`.fd+xv9`Mtl,X\">baseSpeed</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MULTIPLY</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_js_round\"><field name=\"OP\">trunc</field><value name=\"ARG0\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MULTIPLY</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"(eoD{Jy1IH4wF%nsU+Mp\">mag</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"sWIFw1!$:?thMF@v%_+H\">MAX_SPEED</field></block></value></block></value></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"pUVQ9^j*`=3/GHkI}IG0\">sign</field></block></value></block></value></block></next></block></next></block></next></block></next></block></statement><next><block type=\"variables_set\"><field name=\"VAR\" id=\"A-70K23%O-G:u0NI~nKx\">leftTarget</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"R!9us,`.fd+xv9`Mtl,X\">baseSpeed</field></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"MbZ1=ADHa,W0)oDLmQXg\">rightTarget</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"R!9us,`.fd+xv9`Mtl,X\">baseSpeed</field></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"j4C=d,5jZJcF-U$%XZDB\">a</field><comment pinned=\"false\" h=\"80\" w=\"160\">buttons</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"device_get_button2\"><field name=\"NAME\">Button.A</field></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"s+1KjFg%X:om[+623+eq\">b</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"device_get_button2\"><field name=\"NAME\">Button.B</field></block></value><next><block type=\"controls_if\"><mutation elseif=\"1\"></mutation><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_operation\"><field name=\"OP\">AND</field><value name=\"A\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"j4C=d,5jZJcF-U$%XZDB\">a</field></block></value><value name=\"B\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"s+1KjFg%X:om[+623+eq\">b</field></block></value></block></value><statement name=\"DO0\"><block type=\"variables_set\"><field name=\"VAR\" id=\"A-70K23%O-G:u0NI~nKx\">leftTarget</field><comment pinned=\"false\" h=\"80\" w=\"160\">both -&gt; immediate stop</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"MbZ1=ADHa,W0)oDLmQXg\">rightTarget</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value></block></next></block></statement><value name=\"IF1\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_operation\"><field name=\"OP\">OR</field><value name=\"A\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"j4C=d,5jZJcF-U$%XZDB\">a</field></block></value><value name=\"B\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"s+1KjFg%X:om[+623+eq\">b</field></block></value></block></value><statement name=\"DO1\"><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"let turnSign = a ? -1 : 1\" numlines=\"1\" declaredvars=\"turnSign\"></mutation><comment pinned=\"false\" h=\"80\" w=\"160\">A = left (-1), B = right (+1)</comment><next><block type=\"variables_set\"><field name=\"VAR\" id=\"Z`=i)aq0*j3e?TsBTM1G\">speedFrac</field><data>{\"commentRefs\":[],\"fieldData\":{}}</data><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_op2\"><field name=\"op\">min</field><value name=\"x\"><block type=\"math_arithmetic\"><field name=\"OP\">DIVIDE</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_op3\"><value name=\"x\"><block type=\"variables_get\"><field name=\"VAR\" id=\"R!9us,`.fd+xv9`Mtl,X\">baseSpeed</field></block></value></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"sWIFw1!$:?thMF@v%_+H\">MAX_SPEED</field></block></value></block></value><value name=\"y\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"$303o*Pskt|!Z+C0Ts~e\">reduction</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">POWER</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MINUS</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"Z`=i)aq0*j3e?TsBTM1G\">speedFrac</field></block></value></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0.7</field></shadow></value></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"Z.T~p/(93}t_dn*2f98h\">turnEffect</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_js_round\"><field name=\"OP\">trunc</field><value name=\"ARG0\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MULTIPLY</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"_gh5}RP?#?)`Cpa7Kodk\">TURN_BASE</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">ADD</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0.6</field></shadow></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MULTIPLY</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0.4</field></shadow></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"$303o*Pskt|!Z+C0Ts~e\">reduction</field></block></value></block></value></block></value></block></value></block></value><next><block type=\"controls_if\"><mutation else=\"1\"></mutation><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">NEQ</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"R!9us,`.fd+xv9`Mtl,X\">baseSpeed</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value></block></value><statement name=\"DO0\"><block type=\"variables_set\"><field name=\"VAR\" id=\"A-70K23%O-G:u0NI~nKx\">leftTarget</field><comment pinned=\"false\" h=\"80\" w=\"160\">preserve forward/back component and add/subtract turning</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MINUS</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"R!9us,`.fd+xv9`Mtl,X\">baseSpeed</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MULTIPLY</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"8Z2H40vrZJ#^hz$TmJ)#\">turnSign</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"Z.T~p/(93}t_dn*2f98h\">turnEffect</field></block></value></block></value></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"MbZ1=ADHa,W0)oDLmQXg\">rightTarget</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">ADD</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"R!9us,`.fd+xv9`Mtl,X\">baseSpeed</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MULTIPLY</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"8Z2H40vrZJ#^hz$TmJ)#\">turnSign</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"Z.T~p/(93}t_dn*2f98h\">turnEffect</field></block></value></block></value></block></value></block></next></block></statement><statement name=\"ELSE\"><block type=\"variables_set\"><field name=\"VAR\" id=\"A-70K23%O-G:u0NI~nKx\">leftTarget</field><comment pinned=\"false\" h=\"80\" w=\"160\">no forward -&gt; rotate in place</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MULTIPLY</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MINUS</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"8Z2H40vrZJ#^hz$TmJ)#\">turnSign</field></block></value></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"Z.T~p/(93}t_dn*2f98h\">turnEffect</field></block></value></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"MbZ1=ADHa,W0)oDLmQXg\">rightTarget</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MULTIPLY</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"8Z2H40vrZJ#^hz$TmJ)#\">turnSign</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"Z.T~p/(93}t_dn*2f98h\">turnEffect</field></block></value></block></value></block></next></block></statement></block></next></block></next></block></next></block></next></block></statement><next><block type=\"variables_set\"><field name=\"VAR\" id=\"A-70K23%O-G:u0NI~nKx\">leftTarget</field><comment pinned=\"false\" h=\"80\" w=\"160\">clamp, rate limit, smoothing</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"function_call_output\"><mutation name=\"clamp\" functionid=\"s]V]~$TH4r3[:Awx.3S:\"><arg name=\"v\" id=\"1axx2fbxg5u02lvq8vug9\" type=\"number\"></arg><arg name=\"lo\" id=\"gde5bt153tlvnm58htb\" type=\"number\"></arg><arg name=\"hi\" id=\"lk8taf97zb43x2ujrue6\" type=\"number\"></arg></mutation><value name=\"1axx2fbxg5u02lvq8vug9\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow><block type=\"math_js_round\"><field name=\"OP\">trunc</field><value name=\"ARG0\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"A-70K23%O-G:u0NI~nKx\">leftTarget</field></block></value></block></value><value name=\"gde5bt153tlvnm58htb\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MINUS</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"sWIFw1!$:?thMF@v%_+H\">MAX_SPEED</field></block></value></block></value><value name=\"lk8taf97zb43x2ujrue6\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"sWIFw1!$:?thMF@v%_+H\">MAX_SPEED</field></block></value></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"MbZ1=ADHa,W0)oDLmQXg\">rightTarget</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"function_call_output\"><mutation name=\"clamp\" functionid=\"s]V]~$TH4r3[:Awx.3S:\"><arg name=\"v\" id=\"1axx2fbxg5u02lvq8vug9\" type=\"number\"></arg><arg name=\"lo\" id=\"gde5bt153tlvnm58htb\" type=\"number\"></arg><arg name=\"hi\" id=\"lk8taf97zb43x2ujrue6\" type=\"number\"></arg></mutation><value name=\"1axx2fbxg5u02lvq8vug9\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow><block type=\"math_js_round\"><field name=\"OP\">trunc</field><value name=\"ARG0\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"MbZ1=ADHa,W0)oDLmQXg\">rightTarget</field></block></value></block></value><value name=\"gde5bt153tlvnm58htb\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MINUS</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"sWIFw1!$:?thMF@v%_+H\">MAX_SPEED</field></block></value></block></value><value name=\"lk8taf97zb43x2ujrue6\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"sWIFw1!$:?thMF@v%_+H\">MAX_SPEED</field></block></value></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"A-70K23%O-G:u0NI~nKx\">leftTarget</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"function_call_output\"><mutation name=\"rateLimit\" functionid=\"VfCqQ9(I+m-B!E0G,{IL\"><arg name=\"prev\" id=\"1um9s2ve3h2zvmyfaf8y6k\" type=\"number\"></arg><arg name=\"target\" id=\"765nzfmuk5kb75cw2xrbe\" type=\"number\"></arg><arg name=\"maxDelta\" id=\"c2lqp5zewyc83g55qvweg\" type=\"number\"></arg></mutation><value name=\"1um9s2ve3h2zvmyfaf8y6k\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"m1TA5VpaFowWi3$UbYuE\">prevLeft</field></block></value><value name=\"765nzfmuk5kb75cw2xrbe\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"A-70K23%O-G:u0NI~nKx\">leftTarget</field></block></value><value name=\"c2lqp5zewyc83g55qvweg\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"(88?/v8!~,Wf|v$qtp+G\">RATE_LIMIT</field></block></value></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"MbZ1=ADHa,W0)oDLmQXg\">rightTarget</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"function_call_output\"><mutation name=\"rateLimit\" functionid=\"VfCqQ9(I+m-B!E0G,{IL\"><arg name=\"prev\" id=\"1um9s2ve3h2zvmyfaf8y6k\" type=\"number\"></arg><arg name=\"target\" id=\"765nzfmuk5kb75cw2xrbe\" type=\"number\"></arg><arg name=\"maxDelta\" id=\"c2lqp5zewyc83g55qvweg\" type=\"number\"></arg></mutation><value name=\"1um9s2ve3h2zvmyfaf8y6k\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"X3Zo?G*km]8eqNu}6_BV\">prevRight</field></block></value><value name=\"765nzfmuk5kb75cw2xrbe\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"MbZ1=ADHa,W0)oDLmQXg\">rightTarget</field></block></value><value name=\"c2lqp5zewyc83g55qvweg\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"(88?/v8!~,Wf|v$qtp+G\">RATE_LIMIT</field></block></value></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"A-70K23%O-G:u0NI~nKx\">leftTarget</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_js_op\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" op-type=\"infix\"></mutation><field name=\"OP\">idiv</field><value name=\"ARG0\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">ADD</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MULTIPLY</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"m1TA5VpaFowWi3$UbYuE\">prevLeft</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MINUS</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"|T0.0N=nm)6,v]sw?FdG\">SMOOTH_FACTOR</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></value></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"A-70K23%O-G:u0NI~nKx\">leftTarget</field></block></value></block></value><value name=\"ARG1\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"|T0.0N=nm)6,v]sw?FdG\">SMOOTH_FACTOR</field></block></value></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"MbZ1=ADHa,W0)oDLmQXg\">rightTarget</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_js_op\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" op-type=\"infix\"></mutation><field name=\"OP\">idiv</field><value name=\"ARG0\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">ADD</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MULTIPLY</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"X3Zo?G*km]8eqNu}6_BV\">prevRight</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MINUS</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"|T0.0N=nm)6,v]sw?FdG\">SMOOTH_FACTOR</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></value></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"MbZ1=ADHa,W0)oDLmQXg\">rightTarget</field></block></value></block></value><value name=\"ARG1\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"|T0.0N=nm)6,v]sw?FdG\">SMOOTH_FACTOR</field></block></value></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"m1TA5VpaFowWi3$UbYuE\">prevLeft</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"A-70K23%O-G:u0NI~nKx\">leftTarget</field></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"X3Zo?G*km]8eqNu}6_BV\">prevRight</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"MbZ1=ADHa,W0)oDLmQXg\">rightTarget</field></block></value><next><block type=\"radio_datagram_send_string\"><comment pinned=\"false\" h=\"80\" w=\"160\">send \"left,right\"</comment><value name=\"msg\"><block type=\"text_join\"><mutation items=\"3\"></mutation><value name=\"ADD0\"><shadow type=\"text\"><field name=\"TEXT\"></field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"A-70K23%O-G:u0NI~nKx\">leftTarget</field></block></value><value name=\"ADD1\"><shadow type=\"text\"><field name=\"TEXT\">,</field></shadow></value><value name=\"ADD2\"><shadow type=\"text\"><field name=\"TEXT\"></field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"MbZ1=ADHa,W0)oDLmQXg\">rightTarget</field></block></value></block></value><next><block type=\"device_pause\"><value name=\"pause\"><shadow type=\"timePicker\"><field name=\"ms\">500</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"Rx-8k9FA::,3f]DZc!PM\">LOOP_MS</field></block></value></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></statement></block><block type=\"function_definition\" x=\"1752\" y=\"0\"><mutation name=\"clamp\" functionid=\"s]V]~$TH4r3[:Awx.3S:\"><arg name=\"v\" id=\"1axx2fbxg5u02lvq8vug9\" type=\"number\"></arg><arg name=\"lo\" id=\"gde5bt153tlvnm58htb\" type=\"number\"></arg><arg name=\"hi\" id=\"lk8taf97zb43x2ujrue6\" type=\"number\"></arg></mutation><field name=\"function_name\">clamp</field><value name=\"1axx2fbxg5u02lvq8vug9\"><block type=\"argument_reporter_number\" deletable=\"false\"><field name=\"VALUE\">v</field></block></value><value name=\"gde5bt153tlvnm58htb\"><block type=\"argument_reporter_number\" deletable=\"false\"><field name=\"VALUE\">lo</field></block></value><value name=\"lk8taf97zb43x2ujrue6\"><block type=\"argument_reporter_number\" deletable=\"false\"><field name=\"VALUE\">hi</field></block></value><statement name=\"STACK\"><block type=\"controls_if\"><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">LT</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"argument_reporter_number\"><field name=\"VALUE\">v</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"argument_reporter_number\"><field name=\"VALUE\">lo</field></block></value></block></value><statement name=\"DO0\"><block type=\"function_return\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" no_return_value=\"false\"></mutation><value name=\"RETURN_VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"argument_reporter_number\"><field name=\"VALUE\">lo</field></block></value></block></statement><next><block type=\"controls_if\"><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">GT</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"argument_reporter_number\"><field name=\"VALUE\">v</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"argument_reporter_number\"><field name=\"VALUE\">hi</field></block></value></block></value><statement name=\"DO0\"><block type=\"function_return\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" no_return_value=\"false\"></mutation><value name=\"RETURN_VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"argument_reporter_number\"><field name=\"VALUE\">hi</field></block></value></block></statement><next><block type=\"function_return\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" no_return_value=\"false\"></mutation><value name=\"RETURN_VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"argument_reporter_number\"><field name=\"VALUE\">v</field></block></value></block></next></block></next></block></statement></block><block type=\"function_definition\" x=\"2152\" y=\"0\"><mutation name=\"rateLimit\" functionid=\"VfCqQ9(I+m-B!E0G,{IL\"><arg name=\"prev\" id=\"1um9s2ve3h2zvmyfaf8y6k\" type=\"number\"></arg><arg name=\"target\" id=\"765nzfmuk5kb75cw2xrbe\" type=\"number\"></arg><arg name=\"maxDelta\" id=\"c2lqp5zewyc83g55qvweg\" type=\"number\"></arg></mutation><field name=\"function_name\">rateLimit</field><value name=\"1um9s2ve3h2zvmyfaf8y6k\"><block type=\"argument_reporter_number\" deletable=\"false\"><field name=\"VALUE\">prev</field></block></value><value name=\"765nzfmuk5kb75cw2xrbe\"><block type=\"argument_reporter_number\" deletable=\"false\"><field name=\"VALUE\">target</field></block></value><value name=\"c2lqp5zewyc83g55qvweg\"><block type=\"argument_reporter_number\" deletable=\"false\"><field name=\"VALUE\">maxDelta</field></block></value><statement name=\"STACK\"><block type=\"variables_set\"><field name=\"VAR\" id=\"~U_zudSh2-[Huvd`mecM\">delta</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MINUS</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"argument_reporter_number\"><field name=\"VALUE\">target</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"argument_reporter_number\"><field name=\"VALUE\">prev</field></block></value></block></value><next><block type=\"controls_if\"><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">GT</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"~U_zudSh2-[Huvd`mecM\">delta</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"argument_reporter_number\"><field name=\"VALUE\">maxDelta</field></block></value></block></value><statement name=\"DO0\"><block type=\"variables_set\"><field name=\"VAR\" id=\"~U_zudSh2-[Huvd`mecM\">delta</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"argument_reporter_number\"><field name=\"VALUE\">maxDelta</field></block></value></block></statement><next><block type=\"controls_if\"><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">LT</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"~U_zudSh2-[Huvd`mecM\">delta</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MINUS</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"argument_reporter_number\"><field name=\"VALUE\">maxDelta</field></block></value></block></value></block></value><statement name=\"DO0\"><block type=\"variables_set\"><field name=\"VAR\" id=\"~U_zudSh2-[Huvd`mecM\">delta</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MINUS</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"argument_reporter_number\"><field name=\"VALUE\">maxDelta</field></block></value></block></value></block></statement><next><block type=\"function_return\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" no_return_value=\"false\"></mutation><value name=\"RETURN_VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">ADD</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"argument_reporter_number\"><field name=\"VALUE\">prev</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"~U_zudSh2-[Huvd`mecM\">delta</field></block></value></block></value></block></next></block></next></block></next></block></statement></block></xml>"]]}]},{"type":"edited","filename":"main.ts","patch":[{"start1":0,"length1":137,"diffs":[[1,"radio.setGroup(7)\n\n// Sender: tilt-to-drive with A/B steering and arrow indicator\nconst LOOP_MS = 25\nconst MAX_RAW = 1000\nconst MAX_SPEED = 255\nconst DEADZONE = 30\nconst TURN_BASE = 220\nconst SMOOTH_FACTOR = 2\nconst RATE_LIMIT = 160\n\nlet prevLeft = 0\nlet prevRight = 0\nlet neutralY: number = input.acceleration(Dimension.Y) // initial center\n\nfunction clamp(v: number, lo: number, hi: number): number {\n    if (v < lo) return lo\n    if (v > hi) return hi\n"]]},{"start1":470,"length1":222,"diffs":[[1,"\nfunction rateLimit(prev: number, target: number, maxDelta: number): number {\n    let delta = target - prev\n    if (delta > maxDelta) delta = maxDelta\n    if (delta < -maxDelta) delta = -maxDelta\n"]]},{"start1":692,"length1":241,"diffs":[[1,"\n"]]},{"start1":714,"length1":394,"diffs":[[1,"let bWasDown = false\nlet abStart = 0\n\n"]]},{"start1":780,"length1":110,"diffs":[[1,"    let now = input.runningTime()\n    let a = input.buttonIsPressed(Button.A)\n    let b = input.buttonIsPressed(Button.B)\n\n"]]},{"start1":1015,"length1":43,"diffs":[[1,""]]},{"start1":1058,"length1":102,"diffs":[[1,"            if (now - abStart >= 1200) {\n"]]},{"start1":1158,"length1":0,"diffs":[[1,"                // no visual splash; we only keep direction arrow below\n"]]},{"start1":1260,"length1":0,"diffs":[[1,"\n"]]},{"start1":1295,"length1":0,"diffs":[[1,"\n"]]},{"start1":1357,"length1":153,"diffs":[[1,"    let curY: number = input.acceleration(Dimension.Y)\n    // delta positive when device tilted forward (top away from you)\n    let delta = neutralY - curY\n    let absDelta = Math.abs(delta)\n\n    // compute base speed (signed)\n    let baseSpeed = 0\n"]]},{"start1":1637,"length1":272,"diffs":[[1,"        let mag = (absDelta - DEADZONE) / (MAX_RAW - DEADZONE)\n        if (mag > 1) mag = 1\n        mag = Math.pow(mag, 0.9)\n        let sign = delta > 0 ? 1 : -1  // delta>0 = forward, delta<0 = backward\n        baseSpeed = Math.trunc(mag * MAX_SPEED) * sign\n"]]},{"start1":1938,"length1":55,"diffs":[[1,"\n    let leftTarget = baseSpeed\n    let rightTarget = baseSpeed\n\n"]]},{"start1":2195,"length1":169,"diffs":[[1,"        let speedFrac = Math.min(Math.abs(baseSpeed) / MAX_SPEED, 1)\n        let reduction = Math.pow(1 - speedFrac, 0.7)\n        let turnEffect = Math.trunc(TURN_BASE * (0.6 + 0.4 * reduction))\n\n"]]},{"start1":2648,"length1":53,"diffs":[[1,"            leftTarget = -turnSign * turnEffect\n"]]},{"start1":2760,"length1":0,"diffs":[[1,"\n"]]},{"start1":2799,"length1":148,"diffs":[[1,"    leftTarget = clamp(Math.trunc(leftTarget), -MAX_SPEED, MAX_SPEED)\n    rightTarget = clamp(Math.trunc(rightTarget), -MAX_SPEED, MAX_SPEED)\n\n"]]},{"start1":3067,"length1":0,"diffs":[[1,"\n"]]},{"start1":3245,"length1":0,"diffs":[[1,"\n"]]},{"start1":3300,"length1":0,"diffs":[[1,"\n"]]},{"start1":3384,"length1":0,"diffs":[[1,"\n"]]},{"start1":3591,"length1":176,"diffs":[[1,"        if (baseSpeed > 0) basic.showArrow(ArrowNames.North) else basic.showArrow(ArrowNames.South)\n    } else if (a && !b) {\n"]]},{"start1":3758,"length1":28,"diffs":[[1,"    } else if (b && !a) {\n"]]},{"start1":3872,"length1":0,"diffs":[[1,"\n"]]}]},{"type":"edited","filename":"pxt.json","patch":[{"start1":330,"length1":35,"diffs":[[1,"    \"preferredEditor\": \"tsprj\"\n"]]}]}]},{"timestamp":1759717516726,"editorVersion":"8.0.16","changes":[{"type":"edited","filename":"pxt.json","patch":[{"start1":330,"length1":31,"diffs":[[1,"    \"preferredEditor\": \"blocksprj\"\n"]]}]}]},{"timestamp":1759718174052,"editorVersion":"8.0.16","changes":[{"type":"edited","filename":"pxt.json","patch":[{"start1":303,"length1":39,"diffs":[[1,"        \"README.md\"\n"]]}]},{"type":"added","filename":"main.py","value":""}]},{"timestamp":1759718175663,"editorVersion":"8.0.16","changes":[{"type":"edited","filename":"main.ts","patch":[{"start1":0,"length1":512,"diffs":[[1,"function clamp (v: number, lo: number, hi: number) {\n    if (v < lo) {\n        return lo\n    }\n    if (v > hi) {\n        return hi\n    }\n    return v\n"]]},{"start1":152,"length1":183,"diffs":[[1,"function rateLimit (prev: number, target: number, maxDelta: number) {\n    delta = target - prev\n    if (delta > maxDelta) {\n        delta = maxDelta\n    }\n    if (delta < 0 - maxDelta) {\n        delta = 0 - maxDelta\n    }\n    return prev + delta\n"]]},{"start1":400,"length1":1171,"diffs":[[1,"let prevRight = 0\nlet prevLeft = 0\nlet turnEffect = 0\nlet reduction = 0\nlet speedFrac = 0\nlet rightTarget = 0\nlet leftTarget = 0\nlet baseSpeed = 0\nlet mag = 0\nlet absDelta = 0\nlet delta2 = 0\nlet curY = 0\nlet abStart = 0\nlet bWasDown = false\nlet aWasDown = false\nlet b = false\nlet a = false\nlet now = 0\nlet delta = 0\nradio.setGroup(7)\n// Sender: tilt-to-drive with A/B steering and arrow indicator\nlet LOOP_MS = 25\nlet MAX_RAW = 1000\nlet MAX_SPEED = 255\nlet DEADZONE = 30\nlet TURN_BASE = 220\nlet SMOOTH_FACTOR = 2\nlet RATE_LIMIT = 160\nlet CALIBRATE_HOLD = 1200\n// initial center\nlet neutralY = input.acceleration(Dimension.Y)\n// compute base speed (signed)\n"]]},{"start1":1084,"length1":1714,"diffs":[[1,"    now = input.runningTime()\n    a = input.buttonIsPressed(Button.A)\n    b = input.buttonIsPressed(Button.B)\n    // A+B long press -> recalibrate neutral (refresh)\n    if (a && b) {\n        if (!(aWasDown && bWasDown)) {\n            // start of simultaneous press\n            abStart = now\n        } else {\n            // No extra visual besides arrow below\n            if (now - abStart >= CALIBRATE_HOLD) {\n                neutralY = input.acceleration(Dimension.Y)\n            }\n        }\n    }\n    aWasDown = a\n    bWasDown = b\n    // Read and center Y so tilt forward -> positive forward\n    curY = input.acceleration(Dimension.Y)\n    // delta positive when device tilted forward\n    delta2 = neutralY - curY\n    absDelta = Math.abs(delta2)\n    if (absDelta > DEADZONE) {\n        mag = (absDelta - DEADZONE) / (MAX_RAW - DEADZONE)\n        if (mag > 1) {\n            mag = 1\n        }\n        mag = mag ** 0.9\n        // delta>0 = forward, delta<0 = backward\n        let sign = delta2 > 0 ? 1 : -1\nbaseSpeed = Math.trunc(mag * MAX_SPEED) * sign\n"]]},{"start1":2147,"length1":93,"diffs":[[1,"        baseSpeed = 0\n"]]},{"start1":2175,"length1":177,"diffs":[[1,"    leftTarget = baseSpeed\n    rightTarget = baseSpeed\n    // turning logic: A = left, B = right\n    if (a && b) {\n        // immediate stop\n        leftTarget = 0\n        rightTarget = 0\n    } else if (a || b) {\n        let turnSign = a ? -1 : 1\nspeedFrac = Math.min(Math.abs(baseSpeed) / MAX_SPEED, 1)\n        reduction = (1 - speedFrac) ** 0.7\n        turnEffect = Math.trunc(TURN_BASE * (0.6 + 0.4 * reduction))\n        if (baseSpeed != 0) {\n            // move forward/back while turning\n            leftTarget = baseSpeed - turnSign * turnEffect\n            rightTarget = baseSpeed + turnSign * turnEffect\n        } else {\n            // rotate in place when no tilt\n            leftTarget = (0 - turnSign) * turnEffect\n            rightTarget = turnSign * turnEffect\n        }\n"]]},{"start1":2965,"length1":54,"diffs":[[1,"    // clamp + rate limit + smoothing\n    leftTarget = clamp(Math.trunc(leftTarget), 0 - MAX_SPEED, MAX_SPEED)\n    rightTarget = clamp(Math.trunc(rightTarget), 0 - MAX_SPEED, MAX_SPEED)\n    leftTarget = rateLimit(prevLeft, leftTarget, RATE_LIMIT)\n    rightTarget = rateLimit(prevRight, rightTarget, RATE_LIMIT)\n    leftTarget = Math.idiv(prevLeft * (SMOOTH_FACTOR - 1) + leftTarget, SMOOTH_FACTOR)\n    rightTarget = Math.idiv(prevRight * (SMOOTH_FACTOR - 1) + rightTarget, SMOOTH_FACTOR)\n    prevLeft = leftTarget\n    prevRight = rightTarget\n    // send \"left,right\"\n    radio.sendString(\"\" + leftTarget + \",\" + rightTarget)\n    // LED arrow pointer for direction:\n    // If moving (forward/back) show North/South.\n    // If not moving and turning show West/East.\n    // Otherwise clear screen.\n    if (Math.abs(baseSpeed) > 30) {\n        if (baseSpeed > 0) {\n            basic.showArrow(ArrowNames.North)\n        } else {\n            basic.showArrow(ArrowNames.South)\n        }\n    } else if (a && !(b)) {\n        basic.showArrow(ArrowNames.West)\n    } else if (b && !(a)) {\n        basic.showArrow(ArrowNames.East)\n    } else {\n        basic.clearScreen()\n    }\n    basic.pause(LOOP_MS)\n"]]},{"start1":4157,"length1":89,"diffs":[[1,""]]}]}]},{"timestamp":1759718693972,"editorVersion":"8.0.16","changes":[{"type":"edited","filename":"main.ts","patch":[{"start1":253,"length1":82,"diffs":[[1,"// Tilt sensitivity threshold\nconst TILT_THRESHOLD = 300\n"]]},{"start1":3725,"length1":143,"diffs":[[1,"    // Send command via radio (only if changed)\n    if (currentCommand !== lastSentCommand) {\n        radio.sendNumber(currentCommand)\n        lastSentCommand = currentCommand\n    }\n"]]},{"start1":3908,"length1":64,"diffs":[[1,"    // Small delay for stability\n    basic.pause(50)\n"]]}]}]},{"timestamp":1759718881534,"editorVersion":"8.0.16","changes":[{"type":"edited","filename":"main.ts","patch":[{"start1":0,"length1":18,"diffs":[[1,"// ========================================\n// SENDER MICRO:BIT - Remote Controller\n// ========================================\n// Upload this to the HAND-HELD micro:bit\n"]]},{"start1":171,"length1":105,"diffs":[[1,"// Radio setup - must match receiver\nradio.setGroup(1)\nradio.setTransmitPower(7)\n"]]},{"start1":253,"length1":82,"diffs":[[1,"// Tilt sensitivity threshold (lower = more sensitive)\nconst TILT_THRESHOLD = 200\n"]]},{"start1":336,"length1":125,"diffs":[[1,"// Command codes\nenum Command {\n    STOP = 0,\n    FORWARD = 1,\n    BACKWARD = 2,\n    LEFT = 3,\n    RIGHT = 4,\n    FORWARD_LEFT = 5,\n    FORWARD_RIGHT = 6,\n    BACKWARD_LEFT = 7,\n    BACKWARD_RIGHT = 8\n"]]},{"start1":540,"length1":219,"diffs":[[1,"// Helper functions to show arrows\nfunction showArrowUp() {\n    basic.showLeds(`\n        . . # . .\n        . # # # .\n        # . # . #\n        . . # . .\n        . . # . .\n        `)\n"]]},{"start1":725,"length1":0,"diffs":[[1,"function showArrowDown() {\n    basic.showLeds(`\n        . . # . .\n        . . # . .\n        # . # . #\n        . # # # .\n        . . # . .\n        `)\n}\n\nfunction showArrowLeft() {\n    basic.showLeds(`\n        . . # . .\n        . # . . .\n        # # # # #\n        . # . . .\n        . . # . .\n        `)\n}\n\nfunction showArrowRight() {\n    basic.showLeds(`\n        . . # . .\n        . . . # .\n        # # # # #\n        . . . # .\n        . . # . .\n        `)\n}\n\nfunction showArrowUpLeft() {\n    basic.showLeds(`\n        # # # . .\n        # # . . .\n        # . # . .\n        . . . # .\n        . . . . #\n        `)\n}\n\nfunction showArrowUpRight() {\n    basic.showLeds(`\n        . . # # #\n        . . . # #\n        . . # . #\n        . # . . .\n        # . . . .\n        `)\n}\n\nfunction showArrowDownLeft() {\n    basic.showLeds(`\n        . . . . #\n        . . . # .\n        # . # . .\n        # # . . .\n        # # # . .\n        `)\n}\n\nfunction showArrowDownRight() {\n    basic.showLeds(`\n        # . . . .\n        . # . . .\n        . . # . #\n        . . . # #\n        . . # # #\n        `)\n}\n\nlet currentCommand = Command.STOP\nlet lastSentCommand = Command.STOP\n\n// Main control loop\n"]]},{"start1":1923,"length1":162,"diffs":[[1,"    // Read tilt (accelerometer)\n    let pitch = input.acceleration(Dimension.X)  // Forward/Backward\n    let roll = input.acceleration(Dimension.Y)   // Left/Right\n"]]},{"start1":2089,"length1":241,"diffs":[[1,"    // Read buttons\n    let buttonA = input.buttonIsPressed(Button.A)\n    let buttonB = input.buttonIsPressed(Button.B)\n"]]},{"start1":2210,"length1":63,"diffs":[[1,"    // Detect tilt direction\n    let isTiltForward = pitch < -TILT_THRESHOLD\n    let isTiltBackward = pitch > TILT_THRESHOLD\n"]]},{"start1":2336,"length1":119,"diffs":[[1,"    // Determine command based on input combination\n    if (isTiltForward && buttonA && !buttonB) {\n        // Forward + Left = Diagonal forward-left\n        currentCommand = Command.FORWARD_LEFT\n        showArrowUpLeft()\n"]]},{"start1":2559,"length1":606,"diffs":[[1,"    } else if (isTiltForward && buttonB && !buttonA) {\n        // Forward + Right = Diagonal forward-right\n        currentCommand = Command.FORWARD_RIGHT\n        showArrowUpRight()\n"]]},{"start1":2741,"length1":140,"diffs":[[1,"    } else if (isTiltBackward && buttonA && !buttonB) {\n        // Backward + Left = Diagonal backward-left\n        currentCommand = Command.BACKWARD_LEFT\n        showArrowDownLeft()\n"]]},{"start1":2925,"length1":109,"diffs":[[1,"    } else if (isTiltBackward && buttonB && !buttonA) {\n        // Backward + Right = Diagonal backward-right\n        currentCommand = Command.BACKWARD_RIGHT\n        showArrowDownRight()\n"]]},{"start1":3113,"length1":54,"diffs":[[1,"    } else if (isTiltForward) {\n        // Forward only\n        currentCommand = Command.FORWARD\n        showArrowUp()\n"]]},{"start1":3233,"length1":100,"diffs":[[1,"    } else if (isTiltBackward) {\n        // Backward only\n        currentCommand = Command.BACKWARD\n        showArrowDown()\n\n    } else if (buttonA && !buttonB) {\n        // Left only (turn in place)\n        currentCommand = Command.LEFT\n        showArrowLeft()\n\n    } else if (buttonB && !buttonA) {\n        // Right only (turn in place)\n        currentCommand = Command.RIGHT\n        showArrowRight()\n\n    } else {\n        // No input = Stop\n        currentCommand = Command.STOP\n        basic.clearScreen()\n    }\n\n    // Send command via radio (send every time for instant response)\n    radio.sendNumber(currentCommand)\n    lastSentCommand = currentCommand\n\n    // Faster loop for better response time\n    basic.pause(20)\n"]]},{"start1":3961,"length1":0,"diffs":[[1,"\n// Startup indicator\nbasic.showIcon(IconNames.Yes)\nbasic.pause(1000)\nbasic.clearScreen()"]]}]}]},{"timestamp":1759720815180,"editorVersion":"8.0.16","changes":[{"type":"edited","filename":"main.ts","patch":[{"start1":101,"length1":143,"diffs":[[1,"const TURN_POWER = 255\n"]]},{"start1":749,"length1":29,"diffs":[[1,""]]},{"start1":1055,"length1":22,"diffs":[[1,"    // steering\n"]]},{"start1":1208,"length1":32,"diffs":[[1,""]]},{"start1":1292,"length1":610,"diffs":[[1,"    } else if (turnLeft) {\n        leftTarget = -TURN_POWER\n        rightTarget = TURN_POWER\n        basic.showArrow(ArrowNames.West)\n    } else if (turnRight) {\n        leftTarget = TURN_POWER\n        rightTarget = -TURN_POWER\n        basic.showArrow(ArrowNames.East)\n"]]},{"start1":1574,"length1":36,"diffs":[[1,"        // show direction of movement\n"]]},{"start1":1782,"length1":207,"diffs":[[1,"    // clamp + smooth\n    leftTarget = clamp(leftTarget, -MAX_SPEED, MAX_SPEED)\n    rightTarget = clamp(rightTarget, -MAX_SPEED, MAX_SPEED)\n"]]},{"start1":1923,"length1":0,"diffs":[[1,"    leftTarget = rateLimit(prevLeft, leftTarget, 80)\n    rightTarget = rateLimit(prevRight, rightTarget, 80)\n\n"]]}]}]},{"timestamp":1759721012864,"editorVersion":"8.0.16","changes":[{"type":"edited","filename":"main.blocks","patch":[{"start1":0,"length1":34321,"diffs":[[1,"<xml xmlns=\"https://developers.google.com/blockly/xml\"><variables><variable id=\"JH7$oIBuJJCHcg(kpWF/\">delta</variable><variable id=\"1#sr=6fk9/{2Xg9icSCF\">now</variable><variable id=\"1I$?hgT4[6=Y]UB-#`n@\">a</variable><variable id=\"ZZtdEzLmMs^JJnx!R9hS\">b</variable><variable id=\"(}93%{W]#R]![S1]I9xb\">aWasDown</variable><variable id=\"#:OkF(_;-:wb{vzG-!C1\">bWasDown</variable><variable id=\"b#J67s#r{[|2ok^`6[0l\">abStart</variable><variable id=\"L[|}(6LRt!0|sZVrD10^\">CALIBRATE_HOLD</variable><variable id=\"*PX/}.c|~kj8VC5pjA%X\">neutralY</variable><variable id=\"RC;wl(*R@X_m|OSwq/W(\">curY</variable><variable id=\"?6^#2mRm=G;lu;WyWnvR\">delta2</variable><variable id=\"gK$)?+1|9(]YSY)s7Ts5\">absDelta</variable><variable id=\"w6r]Q%P?CMJ,#/q^;l=8\">DEADZONE</variable><variable id=\"`-X/KaiEs8n1Wq1!as!j\">mag</variable><variable id=\"(#%?egH-^_e=DF61f;pJ\">MAX_RAW</variable><variable id=\"p#5b!g?N:]A|~%:fYAF.\">baseSpeed</variable><variable id=\"bCR.S=-lL.`%~O%iMqdJ\">MAX_SPEED</variable><variable id=\"a4U8*(Sy%PUj%)-v)@{?\">sign</variable><variable id=\"u,da!rc~NxV!tpYcK,mC\">leftTarget</variable><variable id=\";lI5QfQGH8XPrj`hfR}n\">rightTarget</variable><variable id=\"irxRzOuzDD3Q)ksUo/Gc\">speedFrac</variable><variable id=\"EB+lCM!w^h5Y-_T?)@WY\">reduction</variable><variable id=\"oyJRKBX)^0H,):X6#ws#\">turnEffect</variable><variable id=\"sspb++*WR$~p$yG|s$sN\">TURN_BASE</variable><variable id=\"1_rP;9~d)#}eKBBFN/$e\">turnSign</variable><variable id=\",=$?5qUJ.5uWeA5y@%9,\">prevLeft</variable><variable id=\"Aq~?`[xJi|,lE|r${0D6\">RATE_LIMIT</variable><variable id=\"Dc!$yA83;[S2$0%i2o|X\">prevRight</variable><variable id=\"j`pc:-N?%UGa^+F@_A]2\">SMOOTH_FACTOR</variable><variable id=\"AtSL30yGDhnW9-|0ZJV@\">LOOP_MS</variable></variables><block type=\"pxt-on-start\" x=\"20\" y=\"20\"><statement name=\"HANDLER\"><block type=\"radio_set_group\"><value name=\"ID\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"255\" precision=\"0\"></mutation><field name=\"SLIDER\">7</field></shadow></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"AtSL30yGDhnW9-|0ZJV@\">LOOP_MS</field><comment pinned=\"false\" h=\"80\" w=\"160\">Sender: tilt-to-drive with A/B steering and arrow indicator</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">25</field></shadow></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"(#%?egH-^_e=DF61f;pJ\">MAX_RAW</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">1000</field></shadow></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"bCR.S=-lL.`%~O%iMqdJ\">MAX_SPEED</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">255</field></shadow></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"w6r]Q%P?CMJ,#/q^;l=8\">DEADZONE</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">30</field></shadow></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"sspb++*WR$~p$yG|s$sN\">TURN_BASE</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">220</field></shadow></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"j`pc:-N?%UGa^+F@_A]2\">SMOOTH_FACTOR</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">2</field></shadow></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"Aq~?`[xJi|,lE|r${0D6\">RATE_LIMIT</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">160</field></shadow></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"L[|}(6LRt!0|sZVrD10^\">CALIBRATE_HOLD</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">1200</field></shadow></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"*PX/}.c|~kj8VC5pjA%X\">neutralY</field><comment pinned=\"false\" h=\"80\" w=\"160\">initial center</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"device_acceleration\"><field name=\"NAME\">Dimension.Y</field></block></value></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></statement></block><block type=\"device_forever\" x=\"523\" y=\"20\"><comment pinned=\"false\" h=\"80\" w=\"160\">compute base speed (signed)</comment><statement name=\"HANDLER\"><block type=\"variables_set\"><field name=\"VAR\" id=\"1#sr=6fk9/{2Xg9icSCF\">now</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"device_get_running_time\"></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"1I$?hgT4[6=Y]UB-#`n@\">a</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"device_get_button2\"><field name=\"NAME\">Button.A</field></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"ZZtdEzLmMs^JJnx!R9hS\">b</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"device_get_button2\"><field name=\"NAME\">Button.B</field></block></value><next><block type=\"controls_if\"><comment pinned=\"false\" h=\"80\" w=\"160\">A+B long press -&gt; recalibrate neutral (refresh)</comment><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_operation\"><field name=\"OP\">AND</field><value name=\"A\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"1I$?hgT4[6=Y]UB-#`n@\">a</field></block></value><value name=\"B\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"ZZtdEzLmMs^JJnx!R9hS\">b</field></block></value></block></value><statement name=\"DO0\"><block type=\"controls_if\"><mutation else=\"1\"></mutation><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_negate\"><value name=\"BOOL\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_operation\"><field name=\"OP\">AND</field><value name=\"A\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"(}93%{W]#R]![S1]I9xb\">aWasDown</field></block></value><value name=\"B\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"#:OkF(_;-:wb{vzG-!C1\">bWasDown</field></block></value></block></value></block></value><statement name=\"DO0\"><block type=\"variables_set\"><field name=\"VAR\" id=\"b#J67s#r{[|2ok^`6[0l\">abStart</field><comment pinned=\"false\" h=\"80\" w=\"160\">start of simultaneous press</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"1#sr=6fk9/{2Xg9icSCF\">now</field></block></value></block></statement><statement name=\"ELSE\"><block type=\"controls_if\"><comment pinned=\"false\" h=\"80\" w=\"160\">No extra visual besides arrow below</comment><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">GTE</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MINUS</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"1#sr=6fk9/{2Xg9icSCF\">now</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"b#J67s#r{[|2ok^`6[0l\">abStart</field></block></value></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"L[|}(6LRt!0|sZVrD10^\">CALIBRATE_HOLD</field></block></value></block></value><statement name=\"DO0\"><block type=\"variables_set\"><field name=\"VAR\" id=\"*PX/}.c|~kj8VC5pjA%X\">neutralY</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"device_acceleration\"><field name=\"NAME\">Dimension.Y</field></block></value></block></statement></block></statement></block></statement><next><block type=\"variables_set\"><field name=\"VAR\" id=\"(}93%{W]#R]![S1]I9xb\">aWasDown</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"1I$?hgT4[6=Y]UB-#`n@\">a</field></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"#:OkF(_;-:wb{vzG-!C1\">bWasDown</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"ZZtdEzLmMs^JJnx!R9hS\">b</field></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"RC;wl(*R@X_m|OSwq/W(\">curY</field><comment pinned=\"false\" h=\"80\" w=\"160\">Read and center Y so tilt forward -&gt; positive forward</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"device_acceleration\"><field name=\"NAME\">Dimension.Y</field></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"?6^#2mRm=G;lu;WyWnvR\">delta2</field><comment pinned=\"false\" h=\"80\" w=\"160\">delta positive when device tilted forward</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MINUS</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"*PX/}.c|~kj8VC5pjA%X\">neutralY</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"RC;wl(*R@X_m|OSwq/W(\">curY</field></block></value></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"gK$)?+1|9(]YSY)s7Ts5\">absDelta</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_op3\"><value name=\"x\"><block type=\"variables_get\"><field name=\"VAR\" id=\"?6^#2mRm=G;lu;WyWnvR\">delta2</field></block></value></block></value><next><block type=\"controls_if\"><mutation else=\"1\"></mutation><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">GT</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"gK$)?+1|9(]YSY)s7Ts5\">absDelta</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"w6r]Q%P?CMJ,#/q^;l=8\">DEADZONE</field></block></value></block></value><statement name=\"DO0\"><block type=\"variables_set\"><field name=\"VAR\" id=\"`-X/KaiEs8n1Wq1!as!j\">mag</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">DIVIDE</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MINUS</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"gK$)?+1|9(]YSY)s7Ts5\">absDelta</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"w6r]Q%P?CMJ,#/q^;l=8\">DEADZONE</field></block></value></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MINUS</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"(#%?egH-^_e=DF61f;pJ\">MAX_RAW</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"w6r]Q%P?CMJ,#/q^;l=8\">DEADZONE</field></block></value></block></value></block></value><next><block type=\"controls_if\"><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">GT</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"`-X/KaiEs8n1Wq1!as!j\">mag</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></value><statement name=\"DO0\"><block type=\"variables_set\"><field name=\"VAR\" id=\"`-X/KaiEs8n1Wq1!as!j\">mag</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></statement><next><block type=\"variables_set\"><field name=\"VAR\" id=\"`-X/KaiEs8n1Wq1!as!j\">mag</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">POWER</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"`-X/KaiEs8n1Wq1!as!j\">mag</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0.9</field></shadow></value></block></value><next><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"let sign = delta2 &gt; 0 ? 1 : -1\" numlines=\"1\" declaredvars=\"sign\"></mutation><comment pinned=\"false\" h=\"80\" w=\"160\">delta&gt;0 = forward, delta&lt;0 = backward</comment><next><block type=\"variables_set\"><field name=\"VAR\" id=\"p#5b!g?N:]A|~%:fYAF.\">baseSpeed</field><data>{\"commentRefs\":[],\"fieldData\":{}}</data><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MULTIPLY</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_js_round\"><field name=\"OP\">trunc</field><value name=\"ARG0\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MULTIPLY</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"`-X/KaiEs8n1Wq1!as!j\">mag</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"bCR.S=-lL.`%~O%iMqdJ\">MAX_SPEED</field></block></value></block></value></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"a4U8*(Sy%PUj%)-v)@{?\">sign</field></block></value></block></value></block></next></block></next></block></next></block></next></block></statement><statement name=\"ELSE\"><block type=\"variables_set\"><field name=\"VAR\" id=\"p#5b!g?N:]A|~%:fYAF.\">baseSpeed</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value></block></statement><next><block type=\"variables_set\"><field name=\"VAR\" id=\"u,da!rc~NxV!tpYcK,mC\">leftTarget</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"p#5b!g?N:]A|~%:fYAF.\">baseSpeed</field></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\";lI5QfQGH8XPrj`hfR}n\">rightTarget</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"p#5b!g?N:]A|~%:fYAF.\">baseSpeed</field></block></value><next><block type=\"controls_if\"><mutation elseif=\"1\"></mutation><comment pinned=\"false\" h=\"80\" w=\"160\">turning logic: A = left, B = right</comment><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_operation\"><field name=\"OP\">AND</field><value name=\"A\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"1I$?hgT4[6=Y]UB-#`n@\">a</field></block></value><value name=\"B\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"ZZtdEzLmMs^JJnx!R9hS\">b</field></block></value></block></value><statement name=\"DO0\"><block type=\"variables_set\"><field name=\"VAR\" id=\"u,da!rc~NxV!tpYcK,mC\">leftTarget</field><comment pinned=\"false\" h=\"80\" w=\"160\">immediate stop</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\";lI5QfQGH8XPrj`hfR}n\">rightTarget</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value></block></next></block></statement><value name=\"IF1\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_operation\"><field name=\"OP\">OR</field><value name=\"A\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"1I$?hgT4[6=Y]UB-#`n@\">a</field></block></value><value name=\"B\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"ZZtdEzLmMs^JJnx!R9hS\">b</field></block></value></block></value><statement name=\"DO1\"><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"let turnSign = a ? -1 : 1\" numlines=\"1\" declaredvars=\"turnSign\"></mutation><next><block type=\"variables_set\"><field name=\"VAR\" id=\"irxRzOuzDD3Q)ksUo/Gc\">speedFrac</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_op2\"><field name=\"op\">min</field><value name=\"x\"><block type=\"math_arithmetic\"><field name=\"OP\">DIVIDE</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_op3\"><value name=\"x\"><block type=\"variables_get\"><field name=\"VAR\" id=\"p#5b!g?N:]A|~%:fYAF.\">baseSpeed</field></block></value></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"bCR.S=-lL.`%~O%iMqdJ\">MAX_SPEED</field></block></value></block></value><value name=\"y\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"EB+lCM!w^h5Y-_T?)@WY\">reduction</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">POWER</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MINUS</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"irxRzOuzDD3Q)ksUo/Gc\">speedFrac</field></block></value></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0.7</field></shadow></value></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"oyJRKBX)^0H,):X6#ws#\">turnEffect</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_js_round\"><field name=\"OP\">trunc</field><value name=\"ARG0\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MULTIPLY</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"sspb++*WR$~p$yG|s$sN\">TURN_BASE</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">ADD</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0.6</field></shadow></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MULTIPLY</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0.4</field></shadow></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"EB+lCM!w^h5Y-_T?)@WY\">reduction</field></block></value></block></value></block></value></block></value></block></value><next><block type=\"controls_if\"><mutation else=\"1\"></mutation><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">NEQ</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"p#5b!g?N:]A|~%:fYAF.\">baseSpeed</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value></block></value><statement name=\"DO0\"><block type=\"variables_set\"><field name=\"VAR\" id=\"u,da!rc~NxV!tpYcK,mC\">leftTarget</field><comment pinned=\"false\" h=\"80\" w=\"160\">move forward/back while turning</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MINUS</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"p#5b!g?N:]A|~%:fYAF.\">baseSpeed</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MULTIPLY</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"1_rP;9~d)#}eKBBFN/$e\">turnSign</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"oyJRKBX)^0H,):X6#ws#\">turnEffect</field></block></value></block></value></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\";lI5QfQGH8XPrj`hfR}n\">rightTarget</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">ADD</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"p#5b!g?N:]A|~%:fYAF.\">baseSpeed</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MULTIPLY</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"1_rP;9~d)#}eKBBFN/$e\">turnSign</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"oyJRKBX)^0H,):X6#ws#\">turnEffect</field></block></value></block></value></block></value></block></next></block></statement><statement name=\"ELSE\"><block type=\"variables_set\"><field name=\"VAR\" id=\"u,da!rc~NxV!tpYcK,mC\">leftTarget</field><comment pinned=\"false\" h=\"80\" w=\"160\">rotate in place when no tilt</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MULTIPLY</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MINUS</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"1_rP;9~d)#}eKBBFN/$e\">turnSign</field></block></value></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"oyJRKBX)^0H,):X6#ws#\">turnEffect</field></block></value></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\";lI5QfQGH8XPrj`hfR}n\">rightTarget</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MULTIPLY</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"1_rP;9~d)#}eKBBFN/$e\">turnSign</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"oyJRKBX)^0H,):X6#ws#\">turnEffect</field></block></value></block></value></block></next></block></statement></block></next></block></next></block></next></block></next></block></statement><next><block type=\"variables_set\"><field name=\"VAR\" id=\"u,da!rc~NxV!tpYcK,mC\">leftTarget</field><comment pinned=\"false\" h=\"80\" w=\"160\">clamp + rate limit + smoothing</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"function_call_output\"><mutation name=\"clamp\" functionid=\"wc|Pf(YwWBux4ks6BfU2\"><arg name=\"v\" id=\"homtstu2dnb4gklnt8x8qq\" type=\"number\"></arg><arg name=\"lo\" id=\"qyy5ryiwkcobz4ed87taf\" type=\"number\"></arg><arg name=\"hi\" id=\"lx1vhdn70xenll7v6vjh\" type=\"number\"></arg></mutation><value name=\"homtstu2dnb4gklnt8x8qq\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow><block type=\"math_js_round\"><field name=\"OP\">trunc</field><value name=\"ARG0\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"u,da!rc~NxV!tpYcK,mC\">leftTarget</field></block></value></block></value><value name=\"qyy5ryiwkcobz4ed87taf\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MINUS</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"bCR.S=-lL.`%~O%iMqdJ\">MAX_SPEED</field></block></value></block></value><value name=\"lx1vhdn70xenll7v6vjh\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"bCR.S=-lL.`%~O%iMqdJ\">MAX_SPEED</field></block></value></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\";lI5QfQGH8XPrj`hfR}n\">rightTarget</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"function_call_output\"><mutation name=\"clamp\" functionid=\"wc|Pf(YwWBux4ks6BfU2\"><arg name=\"v\" id=\"homtstu2dnb4gklnt8x8qq\" type=\"number\"></arg><arg name=\"lo\" id=\"qyy5ryiwkcobz4ed87taf\" type=\"number\"></arg><arg name=\"hi\" id=\"lx1vhdn70xenll7v6vjh\" type=\"number\"></arg></mutation><value name=\"homtstu2dnb4gklnt8x8qq\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow><block type=\"math_js_round\"><field name=\"OP\">trunc</field><value name=\"ARG0\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\";lI5QfQGH8XPrj`hfR}n\">rightTarget</field></block></value></block></value><value name=\"qyy5ryiwkcobz4ed87taf\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MINUS</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"bCR.S=-lL.`%~O%iMqdJ\">MAX_SPEED</field></block></value></block></value><value name=\"lx1vhdn70xenll7v6vjh\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"bCR.S=-lL.`%~O%iMqdJ\">MAX_SPEED</field></block></value></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"u,da!rc~NxV!tpYcK,mC\">leftTarget</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"function_call_output\"><mutation name=\"rateLimit\" functionid=\"0%su8K;9@4!V76em0y@[\"><arg name=\"prev\" id=\"htqtcajy9pmfckmmhq4t\" type=\"number\"></arg><arg name=\"target\" id=\"ip7ncj6hmse69e79dvjb\" type=\"number\"></arg><arg name=\"maxDelta\" id=\"jcal6ueiy5x794pww9d8\" type=\"number\"></arg></mutation><value name=\"htqtcajy9pmfckmmhq4t\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\",=$?5qUJ.5uWeA5y@%9,\">prevLeft</field></block></value><value name=\"ip7ncj6hmse69e79dvjb\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"u,da!rc~NxV!tpYcK,mC\">leftTarget</field></block></value><value name=\"jcal6ueiy5x794pww9d8\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"Aq~?`[xJi|,lE|r${0D6\">RATE_LIMIT</field></block></value></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\";lI5QfQGH8XPrj`hfR}n\">rightTarget</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"function_call_output\"><mutation name=\"rateLimit\" functionid=\"0%su8K;9@4!V76em0y@[\"><arg name=\"prev\" id=\"htqtcajy9pmfckmmhq4t\" type=\"number\"></arg><arg name=\"target\" id=\"ip7ncj6hmse69e79dvjb\" type=\"number\"></arg><arg name=\"maxDelta\" id=\"jcal6ueiy5x794pww9d8\" type=\"number\"></arg></mutation><value name=\"htqtcajy9pmfckmmhq4t\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"Dc!$yA83;[S2$0%i2o|X\">prevRight</field></block></value><value name=\"ip7ncj6hmse69e79dvjb\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\";lI5QfQGH8XPrj`hfR}n\">rightTarget</field></block></value><value name=\"jcal6ueiy5x794pww9d8\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"Aq~?`[xJi|,lE|r${0D6\">RATE_LIMIT</field></block></value></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"u,da!rc~NxV!tpYcK,mC\">leftTarget</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_js_op\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" op-type=\"infix\"></mutation><field name=\"OP\">idiv</field><value name=\"ARG0\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">ADD</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MULTIPLY</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\",=$?5qUJ.5uWeA5y@%9,\">prevLeft</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MINUS</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"j`pc:-N?%UGa^+F@_A]2\">SMOOTH_FACTOR</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></value></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"u,da!rc~NxV!tpYcK,mC\">leftTarget</field></block></value></block></value><value name=\"ARG1\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"j`pc:-N?%UGa^+F@_A]2\">SMOOTH_FACTOR</field></block></value></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\";lI5QfQGH8XPrj`hfR}n\">rightTarget</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_js_op\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" op-type=\"infix\"></mutation><field name=\"OP\">idiv</field><value name=\"ARG0\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">ADD</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MULTIPLY</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"Dc!$yA83;[S2$0%i2o|X\">prevRight</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MINUS</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"j`pc:-N?%UGa^+F@_A]2\">SMOOTH_FACTOR</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></value></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\";lI5QfQGH8XPrj`hfR}n\">rightTarget</field></block></value></block></value><value name=\"ARG1\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"j`pc:-N?%UGa^+F@_A]2\">SMOOTH_FACTOR</field></block></value></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\",=$?5qUJ.5uWeA5y@%9,\">prevLeft</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"u,da!rc~NxV!tpYcK,mC\">leftTarget</field></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"Dc!$yA83;[S2$0%i2o|X\">prevRight</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\";lI5QfQGH8XPrj`hfR}n\">rightTarget</field></block></value><next><block type=\"radio_datagram_send_string\"><comment pinned=\"false\" h=\"80\" w=\"160\">send \"left,right\"</comment><value name=\"msg\"><block type=\"text_join\"><mutation items=\"3\"></mutation><value name=\"ADD0\"><shadow type=\"text\"><field name=\"TEXT\"></field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"u,da!rc~NxV!tpYcK,mC\">leftTarget</field></block></value><value name=\"ADD1\"><shadow type=\"text\"><field name=\"TEXT\">,</field></shadow></value><value name=\"ADD2\"><shadow type=\"text\"><field name=\"TEXT\"></field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\";lI5QfQGH8XPrj`hfR}n\">rightTarget</field></block></value></block></value><next><block type=\"controls_if\"><mutation elseif=\"2\" else=\"1\"></mutation><comment pinned=\"false\" h=\"80\" w=\"160\">LED arrow pointer for direction:\nIf moving (forward/back) show North/South.\nIf not moving and turning show West/East.\nOtherwise clear screen.</comment><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">GT</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_op3\"><value name=\"x\"><block type=\"variables_get\"><field name=\"VAR\" id=\"p#5b!g?N:]A|~%:fYAF.\">baseSpeed</field></block></value></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">30</field></shadow></value></block></value><statement name=\"DO0\"><block type=\"controls_if\"><mutation else=\"1\"></mutation><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">GT</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"p#5b!g?N:]A|~%:fYAF.\">baseSpeed</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value></block></value><statement name=\"DO0\"><block type=\"basic_show_arrow\"><value name=\"i\"><shadow type=\"device_arrow\"><field name=\"arrow\">ArrowNames.North</field></shadow></value></block></statement><statement name=\"ELSE\"><block type=\"basic_show_arrow\"><value name=\"i\"><shadow type=\"device_arrow\"><field name=\"arrow\">ArrowNames.South</field></shadow></value></block></statement></block></statement><value name=\"IF1\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_operation\"><field name=\"OP\">AND</field><value name=\"A\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"1I$?hgT4[6=Y]UB-#`n@\">a</field></block></value><value name=\"B\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_negate\"><value name=\"BOOL\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"ZZtdEzLmMs^JJnx!R9hS\">b</field></block></value></block></value></block></value><statement name=\"DO1\"><block type=\"basic_show_arrow\"><value name=\"i\"><shadow type=\"device_arrow\"><field name=\"arrow\">ArrowNames.West</field></shadow></value></block></statement><value name=\"IF2\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_operation\"><field name=\"OP\">AND</field><value name=\"A\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"ZZtdEzLmMs^JJnx!R9hS\">b</field></block></value><value name=\"B\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_negate\"><value name=\"BOOL\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"1I$?hgT4[6=Y]UB-#`n@\">a</field></block></value></block></value></block></value><statement name=\"DO2\"><block type=\"basic_show_arrow\"><value name=\"i\"><shadow type=\"device_arrow\"><field name=\"arrow\">ArrowNames.East</field></shadow></value></block></statement><statement name=\"ELSE\"><block type=\"device_clear_display\"></block></statement><next><block type=\"device_pause\"><value name=\"pause\"><shadow type=\"timePicker\"><field name=\"ms\">500</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"AtSL30yGDhnW9-|0ZJV@\">LOOP_MS</field></block></value></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></statement></block><block type=\"function_definition\" x=\"1772\" y=\"20\"><mutation name=\"clamp\" functionid=\"wc|Pf(YwWBux4ks6BfU2\"><arg name=\"v\" id=\"homtstu2dnb4gklnt8x8qq\" type=\"number\"></arg><arg name=\"lo\" id=\"qyy5ryiwkcobz4ed87taf\" type=\"number\"></arg><arg name=\"hi\" id=\"lx1vhdn70xenll7v6vjh\" type=\"number\"></arg></mutation><field name=\"function_name\">clamp</field><value name=\"homtstu2dnb4gklnt8x8qq\"><block type=\"argument_reporter_number\" deletable=\"false\"><field name=\"VALUE\">v</field></block></value><value name=\"qyy5ryiwkcobz4ed87taf\"><block type=\"argument_reporter_number\" deletable=\"false\"><field name=\"VALUE\">lo</field></block></value><value name=\"lx1vhdn70xenll7v6vjh\"><block type=\"argument_reporter_number\" deletable=\"false\"><field name=\"VALUE\">hi</field></block></value><statement name=\"STACK\"><block type=\"controls_if\"><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">LT</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"argument_reporter_number\"><field name=\"VALUE\">v</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"argument_reporter_number\"><field name=\"VALUE\">lo</field></block></value></block></value><statement name=\"DO0\"><block type=\"function_return\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" no_return_value=\"false\"></mutation><value name=\"RETURN_VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"argument_reporter_number\"><field name=\"VALUE\">lo</field></block></value></block></statement><next><block type=\"controls_if\"><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">GT</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"argument_reporter_number\"><field name=\"VALUE\">v</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"argument_reporter_number\"><field name=\"VALUE\">hi</field></block></value></block></value><statement name=\"DO0\"><block type=\"function_return\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" no_return_value=\"false\"></mutation><value name=\"RETURN_VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"argument_reporter_number\"><field name=\"VALUE\">hi</field></block></value></block></statement><next><block type=\"function_return\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" no_return_value=\"false\"></mutation><value name=\"RETURN_VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"argument_reporter_number\"><field name=\"VALUE\">v</field></block></value></block></next></block></next></block></statement></block><block type=\"function_definition\" x=\"2172\" y=\"20\"><mutation name=\"rateLimit\" functionid=\"0%su8K;9@4!V76em0y@[\"><arg name=\"prev\" id=\"htqtcajy9pmfckmmhq4t\" type=\"number\"></arg><arg name=\"target\" id=\"ip7ncj6hmse69e79dvjb\" type=\"number\"></arg><arg name=\"maxDelta\" id=\"jcal6ueiy5x794pww9d8\" type=\"number\"></arg></mutation><field name=\"function_name\">rateLimit</field><value name=\"htqtcajy9pmfckmmhq4t\"><block type=\"argument_reporter_number\" deletable=\"false\"><field name=\"VALUE\">prev</field></block></value><value name=\"ip7ncj6hmse69e79dvjb\"><block type=\"argument_reporter_number\" deletable=\"false\"><field name=\"VALUE\">target</field></block></value><value name=\"jcal6ueiy5x794pww9d8\"><block type=\"argument_reporter_number\" deletable=\"false\"><field name=\"VALUE\">maxDelta</field></block></value><statement name=\"STACK\"><block type=\"variables_set\"><field name=\"VAR\" id=\"JH7$oIBuJJCHcg(kpWF/\">delta</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MINUS</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"argument_reporter_number\"><field name=\"VALUE\">target</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"argument_reporter_number\"><field name=\"VALUE\">prev</field></block></value></block></value><next><block type=\"controls_if\"><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">GT</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"JH7$oIBuJJCHcg(kpWF/\">delta</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"argument_reporter_number\"><field name=\"VALUE\">maxDelta</field></block></value></block></value><statement name=\"DO0\"><block type=\"variables_set\"><field name=\"VAR\" id=\"JH7$oIBuJJCHcg(kpWF/\">delta</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"argument_reporter_number\"><field name=\"VALUE\">maxDelta</field></block></value></block></statement><next><block type=\"controls_if\"><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">LT</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"JH7$oIBuJJCHcg(kpWF/\">delta</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MINUS</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"argument_reporter_number\"><field name=\"VALUE\">maxDelta</field></block></value></block></value></block></value><statement name=\"DO0\"><block type=\"variables_set\"><field name=\"VAR\" id=\"JH7$oIBuJJCHcg(kpWF/\">delta</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MINUS</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"argument_reporter_number\"><field name=\"VALUE\">maxDelta</field></block></value></block></value></block></statement><next><block type=\"function_return\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" no_return_value=\"false\"></mutation><value name=\"RETURN_VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">ADD</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"argument_reporter_number\"><field name=\"VALUE\">prev</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"JH7$oIBuJJCHcg(kpWF/\">delta</field></block></value></block></value></block></next></block></next></block></next></block></statement></block></xml>"]]}]},{"type":"edited","filename":"main.ts","patch":[{"start1":0,"length1":137,"diffs":[[1,"radio.setGroup(7)\n\nconst LOOP_MS = 25\nconst MAX_RAW = 1000\nconst MAX_SPEED = 255\nconst DEADZONE = 30\nconst TURN_POWER = 220      // max spin power when stationary\nconst TURN_MIX = 100        // gentle turning while moving\nconst RATE_LIMIT = 80\n\nlet neutralY = input.acceleration(Dimension.Y)\nlet prevLeft = 0\nlet prevRight = 0\n\nfunction clamp(v: number, lo: number, hi: number): number {\n    if (v < lo) return lo\n    if (v > hi) return hi\n"]]},{"start1":455,"length1":222,"diffs":[[1,"\nfunction rateLimit(prev: number, target: number, maxDelta: number): number {\n    let delta = target - prev\n    if (delta > maxDelta) delta = maxDelta\n    if (delta < -maxDelta) delta = -maxDelta\n"]]},{"start1":677,"length1":472,"diffs":[[1,"\n"]]},{"start1":723,"length1":114,"diffs":[[1,"    let rawY = input.acceleration(Dimension.Y) - neutralY\n    let forwardRaw = -rawY\n    let baseSpeed = 0\n    let absRaw = Math.abs(forwardRaw)\n\n"]]},{"start1":927,"length1":110,"diffs":[[1,"        let mag = (absRaw - DEADZONE) / (MAX_RAW - DEADZONE)\n        if (mag > 1) mag = 1\n"]]},{"start1":1065,"length1":103,"diffs":[[1,"        if (forwardRaw > 0) baseSpeed = -baseSpeed // backward tilt\n"]]},{"start1":1139,"length1":55,"diffs":[[1,"\n    let leftTarget = baseSpeed\n    let rightTarget = baseSpeed\n\n"]]},{"start1":1226,"length1":95,"diffs":[[1,"    let turnLeft = input.buttonIsPressed(Button.A)\n    let turnRight = input.buttonIsPressed(Button.B)\n\n"]]},{"start1":1561,"length1":22,"diffs":[[1,"        if (baseSpeed != 0) {\n"]]},{"start1":1640,"length1":181,"diffs":[[1,"            leftTarget = clamp(baseSpeed - turnSign * TURN_MIX, -MAX_SPEED, MAX_SPEED)\n            rightTarget = clamp(baseSpeed + turnSign * TURN_MIX, -MAX_SPEED, MAX_SPEED)\n"]]},{"start1":1877,"length1":53,"diffs":[[1,"            leftTarget = -turnSign * TURN_POWER\n"]]},{"start1":1983,"length1":145,"diffs":[[1,"\n        if (turnSign > 0) basic.showArrow(ArrowNames.East)\n        else basic.showArrow(ArrowNames.West)\n"]]},{"start1":2138,"length1":219,"diffs":[[1,"        if (baseSpeed > 30) basic.showArrow(ArrowNames.North)\n        else if (baseSpeed < -30) basic.showArrow(ArrowNames.South)\n        else basic.clearScreen()\n"]]},{"start1":2307,"length1":0,"diffs":[[1,"\n"]]},{"start1":2330,"length1":191,"diffs":[[1,"    leftTarget = rateLimit(prevLeft, clamp(leftTarget, -MAX_SPEED, MAX_SPEED), RATE_LIMIT)\n    rightTarget = rateLimit(prevRight, clamp(rightTarget, -MAX_SPEED, MAX_SPEED), RATE_LIMIT)\n\n"]]},{"start1":2570,"length1":80,"diffs":[[1,"\n    radio.sendString(leftTarget.toString() + \",\" + rightTarget.toString())\n"]]}]},{"type":"edited","filename":"pxt.json","patch":[{"start1":349,"length1":35,"diffs":[[1,"    \"preferredEditor\": \"tsprj\"\n"]]}]}]},{"timestamp":1759721028865,"editorVersion":"8.0.16","changes":[{"type":"edited","filename":"pxt.json","patch":[{"start1":349,"length1":31,"diffs":[[1,"    \"preferredEditor\": \"blocksprj\"\n"]]}]}]},{"timestamp":1759723572544,"editorVersion":"8.0.16","changes":[{"type":"edited","filename":"main.ts","patch":[{"start1":0,"length1":0,"diffs":[[1,"function clamp (v: number, lo: number, hi: number) {\n    if (v < lo) {\n        return lo\n    }\n    if (v > hi) {\n        return hi\n    }\n    return v\n}\nfunction rateLimit (prev: number, target: number, maxDelta: number) {\n    delta = target - prev\n    if (delta > maxDelta) {\n        delta = maxDelta\n    }\n    if (delta < 0 - maxDelta) {\n        delta = 0 - maxDelta\n    }\n    return prev + delta\n}\nlet prevRight = 0\nlet prevLeft = 0\nlet turnRight = false\nlet turnLeft = false\nlet rightTarget = 0\nlet leftTarget = 0\nlet baseSpeed = 0\nlet mag = 0\nlet absRaw = 0\nlet forwardRaw = 0\nlet rawY = 0\nlet delta = 0\n"]]},{"start1":626,"length1":106,"diffs":[[1,"let LOOP_MS = 25\nlet MAX_RAW = 1000\nlet MAX_SPEED = 255\nlet DEADZONE = 30\n// max spin power when stationary\nlet TURN_POWER = 220\n// gentle turning while moving\nlet TURN_MIX = 100\nlet RATE_LIMIT = 80\nlet neutralY = input.acceleration(Dimension.Y)\n"]]},{"start1":900,"length1":726,"diffs":[[1,"    // read tilt\n    rawY = input.acceleration(Dimension.Y) - neutralY\n    forwardRaw = 0 - rawY\n    absRaw = Math.abs(forwardRaw)\n    // convert tilt to speed\n    if (absRaw > DEADZONE) {\n        mag = (absRaw - DEADZONE) / (MAX_RAW - DEADZONE)\n        if (mag > 1) {\n            mag = 1\n        }\n        baseSpeed = Math.trunc(mag * MAX_SPEED)\n        // backward tilt\n        if (forwardRaw > 0) {\n            baseSpeed = 0 - baseSpeed\n        }\n    }\n    leftTarget = baseSpeed\n    rightTarget = baseSpeed\n    // steering logic\n    turnLeft = input.buttonIsPressed(Button.A)\n    turnRight = input.buttonIsPressed(Button.B)\n    if (turnLeft && turnRight) {\n        // stop if both pressed\n        leftTarget = 0\n        rightTarget = 0\n        basic.showIcon(IconNames.No)\n    } else if (turnLeft || turnRight) {\n        let turnSign = turnRight ? 1 : -1\nif (baseSpeed != 0) {\n            // turning while moving  gentle mix\n            leftTarget = clamp(baseSpeed - turnSign * TURN_MIX, 0 - MAX_SPEED, MAX_SPEED)\n            rightTarget = clamp(baseSpeed + turnSign * TURN_MIX, 0 - MAX_SPEED, MAX_SPEED)\n"]]},{"start1":2028,"length1":522,"diffs":[[1,"            // spin in place when stationary\n            leftTarget = (0 - turnSign) * TURN_POWER\n            rightTarget = turnSign * TURN_POWER\n"]]},{"start1":2184,"length1":0,"diffs":[[1,"        if (turnSign > 0) {\n            basic.showArrow(ArrowNames.East)\n        } else {\n            basic.showArrow(ArrowNames.West)\n        }\n"]]},{"start1":2342,"length1":386,"diffs":[[1,"        // show direction of motion\n        if (baseSpeed > 30) {\n            basic.showArrow(ArrowNames.North)\n        } else if (baseSpeed < -30) {\n            basic.showArrow(ArrowNames.South)\n"]]},{"start1":2555,"length1":50,"diffs":[[1,"            basic.clearScreen()\n"]]},{"start1":2603,"length1":34,"diffs":[[1,"    // clamp & smooth\n    leftTarget = rateLimit(prevLeft, clamp(leftTarget, 0 - MAX_SPEED, MAX_SPEED), RATE_LIMIT)\n    rightTarget = rateLimit(prevRight, clamp(rightTarget, 0 - MAX_SPEED, MAX_SPEED), RATE_LIMIT)\n    prevLeft = leftTarget\n    prevRight = rightTarget\n    radio.sendString(\"\" + leftTarget.toString() + \",\" + rightTarget.toString())\n    basic.pause(LOOP_MS)\n"]]}]}]},{"timestamp":1759723574516,"editorVersion":"8.0.16","changes":[{"type":"edited","filename":"main.ts","patch":[{"start1":0,"length1":189,"diffs":[[1,""]]},{"start1":19,"length1":0,"diffs":[[1,"// Settings\n"]]},{"start1":69,"length1":48,"diffs":[[1,"let TILT_FORWARD = 200\nlet UPDATE_INTERVAL = 50 // ms\n"]]},{"start1":250,"length1":0,"diffs":[[1,"    let moving = false\n"]]},{"start1":274,"length1":623,"diffs":[[1,"    if (absY > DEADZONE) {\n        moving = true\n        if (forward > TILT_FORWARD) {\n            // Tilted forward\n"]]},{"start1":589,"length1":60,"diffs":[[1,"                radio.sendMessage(RadioMessage.Left) // Forward left\n"]]},{"start1":716,"length1":61,"diffs":[[1,"                radio.sendMessage(RadioMessage.Right) // Forward right\n"]]},{"start1":895,"length1":24,"diffs":[[1,"            // Tilted backward\n"]]},{"start1":1124,"length1":61,"diffs":[[1,"                radio.sendMessage(RadioMessage.Left) // Backward left\n"]]},{"start1":1252,"length1":62,"diffs":[[1,"                radio.sendMessage(RadioMessage.Right) // Backward right\n"]]},{"start1":1345,"length1":57,"diffs":[[1,"                radio.sendMessage(RadioMessage.Backwards)\n"]]},{"start1":1427,"length1":0,"diffs":[[1,"    } else {\n        // No tilt = idle, check turn-in-place\n        if (input.buttonIsPressed(Button.A) && input.buttonIsPressed(Button.B)) {\n            radio.sendMessage(RadioMessage.Brake)\n        } else if (input.buttonIsPressed(Button.A)) {\n            radio.sendMessage(RadioMessage.Left)\n        } else if (input.buttonIsPressed(Button.B)) {\n            radio.sendMessage(RadioMessage.Right)\n        } else {\n            radio.sendMessage(RadioMessage.Brake)\n        }\n"]]}]}]},{"timestamp":1759723741707,"editorVersion":"8.0.16","changes":[{"type":"edited","filename":"main.ts","patch":[{"start1":0,"length1":453,"diffs":[[1,"enum RadioMessage {\n    Brake = 0,\n    Forward = 1,\n    Backward = 2,\n    Left = 3,\n    Right = 4,\n    ForwardLeft = 5,\n    ForwardRight = 6,\n    BackwardLeft = 7,\n    BackwardRight = 8\n"]]},{"start1":189,"length1":221,"diffs":[[1,"radio.setGroup(7)\n"]]},{"start1":208,"length1":0,"diffs":[[1,"let MAX_RAW = 1200\nlet DEADZONE = 150\nlet FORWARD_TILT = 200\nlet UPDATE_INTERVAL = 50\n\n"]]},{"start1":323,"length1":162,"diffs":[[1,"    let y = input.acceleration(Dimension.Y)\n    let forward = -y\n    let absY = Math.abs(forward)\n"]]},{"start1":422,"length1":946,"diffs":[[1,"    if (absY < DEADZONE) {\n        // Not tilted\n        if (input.buttonIsPressed(Button.A) && input.buttonIsPressed(Button.B)) {\n            radio.sendMessage(RadioMessage.Brake)\n        } else if (input.buttonIsPressed(Button.A)) {\n            radio.sendMessage(RadioMessage.Left) // rotate left in place\n        } else if (input.buttonIsPressed(Button.B)) {\n            radio.sendMessage(RadioMessage.Right) // rotate right in place\n"]]},{"start1":876,"length1":141,"diffs":[[1,"            radio.sendMessage(RadioMessage.Brake)\n"]]},{"start1":936,"length1":106,"diffs":[[1,""]]},{"start1":949,"length1":199,"diffs":[[1,"        // Tilted forward/backward\n        if (forward > FORWARD_TILT) {\n            // Forward\n            if (input.buttonIsPressed(Button.A) && input.buttonIsPressed(Button.B)) {\n                radio.sendMessage(RadioMessage.Brake)\n            } else if (input.buttonIsPressed(Button.A)) {\n                radio.sendMessage(RadioMessage.ForwardLeft)\n            } else if (input.buttonIsPressed(Button.B)) {\n                radio.sendMessage(RadioMessage.ForwardRight)\n            } else {\n                radio.sendMessage(RadioMessage.Forward)\n            }\n        } else {\n            // Backward\n            if (input.buttonIsPressed(Button.A) && input.buttonIsPressed(Button.B)) {\n                radio.sendMessage(RadioMessage.Brake)\n            } else if (input.buttonIsPressed(Button.A)) {\n                radio.sendMessage(RadioMessage.BackwardLeft)\n            } else if (input.buttonIsPressed(Button.B)) {\n                radio.sendMessage(RadioMessage.BackwardRight)\n            } else {\n                radio.sendMessage(RadioMessage.Backward)\n            }\n        }\n"]]},{"start1":2042,"length1":408,"diffs":[[1,"    basic.pause(UPDATE_INTERVAL)\n"]]}]}]},{"timestamp":1759764170192,"editorVersion":"8.0.16","changes":[{"type":"edited","filename":"main.ts","patch":[{"start1":101,"length1":0,"diffs":[[1,"const TURN_POWER = 220      // max spin power when stationary\nconst TURN_MIX = 100        // gentle turning while moving\n"]]},{"start1":706,"length1":17,"diffs":[[1,"    // read tilt\n"]]},{"start1":808,"length1":0,"diffs":[[1,"    let baseSpeed = 0\n"]]},{"start1":869,"length1":50,"diffs":[[1,"    // convert tilt to speed\n"]]},{"start1":1204,"length1":207,"diffs":[[1,"    // steering logic\n    let turnLeft = input.buttonIsPressed(Button.A)\n    let turnRight = input.buttonIsPressed(Button.B)\n"]]},{"start1":1330,"length1":328,"diffs":[[1,"    if (turnLeft && turnRight) {\n        // stop if both pressed\n"]]},{"start1":1479,"length1":0,"diffs":[[1,"    } else if (turnLeft || turnRight) {\n        let turnSign = turnRight ? 1 : -1\n        if (baseSpeed != 0) {\n            // turning while moving  gentle mix\n            leftTarget = clamp(baseSpeed - turnSign * TURN_MIX, -MAX_SPEED, MAX_SPEED)\n            rightTarget = clamp(baseSpeed + turnSign * TURN_MIX, -MAX_SPEED, MAX_SPEED)\n        } else {\n            // spin in place when stationary\n            leftTarget = -turnSign * TURN_POWER\n            rightTarget = turnSign * TURN_POWER\n        }\n\n        if (turnSign > 0) basic.showArrow(ArrowNames.East)\n        else basic.showArrow(ArrowNames.West)\n"]]},{"start1":2102,"length1":29,"diffs":[[1,"        // show direction of motion\n"]]},{"start1":2268,"length1":132,"diffs":[[1,""]]},{"start1":2308,"length1":158,"diffs":[[1,"    // clamp & smooth\n    leftTarget = rateLimit(prevLeft, clamp(leftTarget, -MAX_SPEED, MAX_SPEED), RATE_LIMIT)\n    rightTarget = rateLimit(prevRight, clamp(rightTarget, -MAX_SPEED, MAX_SPEED), RATE_LIMIT)\n"]]},{"start1":2571,"length1":24,"diffs":[[1,"    // send speeds as a string for receiver\n"]]}]}]},{"timestamp":1759764473903,"editorVersion":"8.0.16","changes":[{"type":"edited","filename":"main.ts","patch":[{"start1":101,"length1":121,"diffs":[[1,""]]},{"start1":585,"length1":17,"diffs":[[1,"    // Read tilt\n"]]},{"start1":687,"length1":22,"diffs":[[1,""]]},{"start1":726,"length1":29,"diffs":[[1,"    // Base speed from tilt\n    let baseSpeed = 0\n"]]},{"start1":1082,"length1":125,"diffs":[[1,"    // Smooth proportional turning using buttons\n    let turnFactor = 0\n    if (input.buttonIsPressed(Button.A)) turnFactor -= 0.4 // left\n    if (input.buttonIsPressed(Button.B)) turnFactor += 0.4 // right\n"]]},{"start1":1290,"length1":65,"diffs":[[1,"    // Apply turn proportionally\n    leftTarget = clamp(Math.trunc(leftTarget * (1 - turnFactor)), -MAX_SPEED, MAX_SPEED)\n    rightTarget = clamp(Math.trunc(rightTarget * (1 + turnFactor)), -MAX_SPEED, MAX_SPEED)\n\n    // Stop if both buttons pressed\n    if (input.buttonIsPressed(Button.A) && input.buttonIsPressed(Button.B)) {\n"]]},{"start1":1702,"length1":610,"diffs":[[1,""]]},{"start1":1715,"length1":36,"diffs":[[1,"        // Display direction\n"]]},{"start1":1874,"length1":0,"diffs":[[1,"        else if (turnFactor > 0) basic.showArrow(ArrowNames.East)\n        else if (turnFactor < 0) basic.showArrow(ArrowNames.West)\n"]]},{"start1":2046,"length1":207,"diffs":[[1,"    // Rate limit for smoothness\n    leftTarget = rateLimit(prevLeft, leftTarget, RATE_LIMIT)\n    rightTarget = rateLimit(prevRight, rightTarget, RATE_LIMIT)\n"]]},{"start1":2260,"length1":0,"diffs":[[1,"    // Send to receiver\n"]]},{"start1":2359,"length1":0,"diffs":[[1,"\n"]]},{"start1":2388,"length1":1,"diffs":[[1,""]]}]}]},{"timestamp":1759765070586,"editorVersion":"8.0.16","changes":[{"type":"edited","filename":"main.ts","patch":[{"start1":0,"length1":54,"diffs":[[1,""]]},{"start1":19,"length1":55,"diffs":[[1,"const LOOP_MS = 25\nconst MAX_RAW = 1000\n"]]},{"start1":81,"length1":40,"diffs":[[1,"const DEADZONE = 30\nconst TURN_POWER = 220      // max spin power when stationary\nconst TURN_MIX = 100        // gentle turning while moving\nconst RATE_LIMIT = 80\n"]]},{"start1":245,"length1":128,"diffs":[[1,"let neutralY = input.acceleration(Dimension.Y)\nlet prevLeft = 0\nlet prevRight = 0\n"]]},{"start1":328,"length1":114,"diffs":[[1,""]]},{"start1":456,"length1":175,"diffs":[[1,"function rateLimit(prev: number, target: number, maxDelta: number): number {\n    let delta = target - prev\n    if (delta > maxDelta) delta = maxDelta\n    if (delta < -maxDelta) delta = -maxDelta\n    return prev + delta\n}\n"]]},{"start1":678,"length1":424,"diffs":[[1,""]]},{"start1":706,"length1":319,"diffs":[[1,"    // read tilt\n    let rawY = input.acceleration(Dimension.Y) - neutralY\n    let forwardRaw = -rawY\n    let baseSpeed = 0\n    let absRaw = Math.abs(forwardRaw)\n"]]},{"start1":869,"length1":243,"diffs":[[1,"    // convert tilt to speed\n    if (absRaw > DEADZONE) {\n        let mag = (absRaw - DEADZONE) / (MAX_RAW - DEADZONE)\n        if (mag > 1) mag = 1\n        baseSpeed = Math.trunc(mag * MAX_SPEED)\n        if (forwardRaw > 0) baseSpeed = -baseSpeed // backward tilt\n"]]},{"start1":1140,"length1":225,"diffs":[[1,"    let leftTarget = baseSpeed\n    let rightTarget = baseSpeed\n"]]},{"start1":1204,"length1":118,"diffs":[[1,"    // steering logic\n    let turnLeft = input.buttonIsPressed(Button.A)\n    let turnRight = input.buttonIsPressed(Button.B)\n"]]},{"start1":1330,"length1":291,"diffs":[[1,"    if (turnLeft && turnRight) {\n        // stop if both pressed\n        leftTarget = 0\n        rightTarget = 0\n        basic.showIcon(IconNames.No)\n    } else if (turnLeft || turnRight) {\n        let turnSign = turnRight ? 1 : -1\n        if (baseSpeed != 0) {\n            // turning while moving  gentle mix\n            leftTarget = clamp(baseSpeed - turnSign * TURN_MIX, -MAX_SPEED, MAX_SPEED)\n            rightTarget = clamp(baseSpeed + turnSign * TURN_MIX, -MAX_SPEED, MAX_SPEED)\n        } else {\n            // spin in place when stationary\n            leftTarget = -turnSign * TURN_POWER\n            rightTarget = turnSign * TURN_POWER\n        }\n"]]},{"start1":1984,"length1":233,"diffs":[[1,"        if (turnSign > 0) basic.showArrow(ArrowNames.East)\n        else basic.showArrow(ArrowNames.West)\n"]]},{"start1":2102,"length1":44,"diffs":[[1,"        // show direction of motion\n        if (baseSpeed > 30) basic.showArrow(ArrowNames.North)\n        else if (baseSpeed < -30) basic.showArrow(ArrowNames.South)\n        else basic.clearScreen()\n"]]},{"start1":2308,"length1":0,"diffs":[[1,"    // clamp & smooth\n    leftTarget = rateLimit(prevLeft, clamp(leftTarget, -MAX_SPEED, MAX_SPEED), RATE_LIMIT)\n    rightTarget = rateLimit(prevRight, clamp(rightTarget, -MAX_SPEED, MAX_SPEED), RATE_LIMIT)\n\n    prevLeft = leftTarget\n    prevRight = rightTarget\n\n    radio.sendString(leftTarget.toString() + \",\" + rightTarget.toString())\n"]]},{"start1":2674,"length1":0,"diffs":[[1,"\n"]]}]}]},{"timestamp":1759766866286,"editorVersion":"8.0.16","changes":[{"type":"edited","filename":"pxt.json","patch":[{"start1":2,"length1":24,"diffs":[[1,"    \"name\": \"ftir\",\n"]]}]}]},{"timestamp":1759767077282,"editorVersion":"8.0.16","changes":[{"type":"edited","filename":"main.ts","patch":[{"start1":0,"length1":0,"diffs":[[1,"// Receiver: Rekabit driver (no LEDs/visual feedback)\n"]]},{"start1":150,"length1":19,"diffs":[[1,"const RAMP_STEP = 32\nconst LOOP_MS = 40\n"]]},{"start1":280,"length1":0,"diffs":[[1,"let actualLeft = 0\nlet actualRight = 0\n"]]},{"start1":320,"length1":27,"diffs":[[1,"// invert if physically needed\n"]]},{"start1":704,"length1":33,"diffs":[[1,"    if (parts.length < 2) return\n"]]},{"start1":738,"length1":125,"diffs":[[1,"    let leftVal = 0\n    let rightVal = 0\n"]]},{"start1":780,"length1":0,"diffs":[[1,"    if (parts.length >= 3) {\n        leftVal = parseInt(parts[1])\n        rightVal = parseInt(parts[2])\n    } else {\n        leftVal = parseInt(parts[0])\n        rightVal = parseInt(parts[1])\n    }\n\n    if (isNaN(leftVal) || isNaN(rightVal)) {\n        return\n    }\n\n"]]},{"start1":1269,"length1":0,"diffs":[[1,"        // no signal -> immediate stop and zero targets\n"]]},{"start1":1372,"length1":0,"diffs":[[1,"        actualLeft = 0\n        actualRight = 0\n"]]},{"start1":1510,"length1":118,"diffs":[[1,"    // ramp actual towards target\n    if (actualLeft < targetLeft) {\n        actualLeft = Math.min(actualLeft + RAMP_STEP, targetLeft)\n    } else if (actualLeft > targetLeft) {\n        actualLeft = Math.max(actualLeft - RAMP_STEP, targetLeft)\n    }\n"]]},{"start1":1760,"length1":246,"diffs":[[1,"    if (actualRight < targetRight) {\n        actualRight = Math.min(actualRight + RAMP_STEP, targetRight)\n    } else if (actualRight > targetRight) {\n        actualRight = Math.max(actualRight - RAMP_STEP, targetRight)\n    }\n"]]},{"start1":1986,"length1":251,"diffs":[[1,"    let outLeft = INVERT_LEFT ? -actualLeft : actualLeft\n    let outRight = INVERT_RIGHT ? -actualRight : actualRight\n"]]},{"start1":2105,"length1":0,"diffs":[[1,"    // LEFT motor (M1)\n    if (outLeft > 0) {\n        rekabit.runMotor(MotorChannel.M1, MotorDirection.Forward, outLeft)\n    } else if (outLeft < 0) {\n        rekabit.runMotor(MotorChannel.M1, MotorDirection.Backward, -outLeft)\n    } else {\n        rekabit.brakeMotor(MotorChannel.M1)\n    }\n\n    // RIGHT motor (M2)\n    if (outRight > 0) {\n        rekabit.runMotor(MotorChannel.M2, MotorDirection.Forward, outRight)\n    } else if (outRight < 0) {\n        rekabit.runMotor(MotorChannel.M2, MotorDirection.Backward, -outRight)\n    } else {\n        rekabit.brakeMotor(MotorChannel.M2)\n    }\n\n"]]}]}]},{"timestamp":1759767647918,"editorVersion":"8.0.16","changes":[{"type":"edited","filename":"main.ts","patch":[{"start1":19,"length1":0,"diffs":[[1,"// CONFIG\n"]]},{"start1":116,"length1":0,"diffs":[[1,"// STATE\n"]]},{"start1":206,"length1":0,"diffs":[[1,"// invert motors if needed\n"]]},{"start1":1226,"length1":0,"diffs":[[1,"    // LEFT motor\n"]]},{"start1":1473,"length1":0,"diffs":[[1,"    // RIGHT motor\n"]]}]}]},{"timestamp":1759767850859,"editorVersion":"8.0.16","changes":[{"type":"edited","filename":"main.blocks","patch":[{"start1":0,"length1":1238,"diffs":[[1,"<xml xmlns=\"https://developers.google.com/blockly/xml\"><variables><variable id=\"4:qPykg5)^72Mhc8kql}\">delta</variable><variable id=\"J~]M!m;mE5DW7I!UzXlz\">rawY</variable><variable id=\"A*]H3zIaO1gF@6fz@*1K\">neutralY</variable><variable id=\"9{@^NwNBa!QRe#(_VCi0\">forwardRaw</variable><variable id=\"$eL(:q~u7?6|ZwQrtu?2\">absRaw</variable><variable id=\";s*9nsIt0CB$dpODbVt#\">DEADZONE</variable><variable id=\"}?l`f.LshgyX9Whg-p3_\">mag</variable><variable id=\"r?h3NfTK9%[%vf0PxQE]\">MAX_RAW</variable><variable id=\";k;Ru+Mjb9-AZB`aGz%C\">baseSpeed</variable><variable id=\"GA?c$GIud;2mk955iHB)\">MAX_SPEED</variable><variable id=\"T96T~1D)7{lqyiV3WS)h\">leftTarget</variable><variable id=\"Ximo`t(?un[/3,AIzDrW\">rightTarget</variable><variable id=\"2!XA-pg#%]OGla$n2Q2i\">turnLeft</variable><variable id=\"VH$HYlt55|/|r7N4]|PR\">turnRight</variable><variable id=\"t-|=(RsvZI3K6rwt~+%`\">turnSign</variable><variable id=\"U9@tZIoRj4N:pmG-LdEm\">TURN_MIX</variable><variable id=\"c5|VYf(M9wz[@zQPu5gu\">TURN_POWER</variable><variable id=\"1()+F|!eRLjWE*WL%jGq\">prevLeft</variable><variable id=\",8P~(Pvfh-rvWv,TFs04\">RATE_LIMIT</variable><variable id=\"+`RHQ}Hp.j2swMc%S$$k\">prevRight</variable><variable id=\"/tan]#m)^RocHI]84Syt\">LOOP_MS</variable></variables><block type=\"pxt-on-start\" x=\"0\" y=\"0\"><statement name=\"HANDLER\"><block type=\"radio_set_group\"><value name=\"ID\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"255\" precision=\"0\"></mutation><field name=\"SLIDER\">7</field></shadow></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"/tan]#m)^RocHI]84Syt\">LOOP_MS</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">25</field></shadow></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"r?h3NfTK9%[%vf0PxQE]\">MAX_RAW</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">1000</field></shadow></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"GA?c$GIud;2mk955iHB)\">MAX_SPEED</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">255</field></shadow></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\";s*9nsIt0CB$dpODbVt#\">DEADZONE</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">30</field></shadow></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"c5|VYf(M9wz[@zQPu5gu\">TURN_POWER</field><comment pinned=\"false\" h=\"80\" w=\"160\">max spin power when stationary</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">220</field></shadow></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"U9@tZIoRj4N:pmG-LdEm\">TURN_MIX</field><comment pinned=\"false\" h=\"80\" w=\"160\">gentle turning while moving</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">100</field></shadow></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\",8P~(Pvfh-rvWv,TFs04\">RATE_LIMIT</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">80</field></shadow></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"A*]H3zIaO1gF@6fz@*1K\">neutralY</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"device_acceleration\"><field name=\"NAME\">Dimension.Y</field></block></value></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></statement></block><block type=\"device_forever\" x=\"503\" y=\"0\"><statement name=\"HANDLER\"><block type=\"variables_set\"><field name=\"VAR\" id=\"J~]M!m;mE5DW7I!UzXlz\">rawY</field><comment pinned=\"false\" h=\"80\" w=\"160\">read tilt</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MINUS</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"device_acceleration\"><field name=\"NAME\">Dimension.Y</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"A*]H3zIaO1gF@6fz@*1K\">neutralY</field></block></value></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"9{@^NwNBa!QRe#(_VCi0\">forwardRaw</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MINUS</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"J~]M!m;mE5DW7I!UzXlz\">rawY</field></block></value></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"$eL(:q~u7?6|ZwQrtu?2\">absRaw</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_op3\"><value name=\"x\"><block type=\"variables_get\"><field name=\"VAR\" id=\"9{@^NwNBa!QRe#(_VCi0\">forwardRaw</field></block></value></block></value><next><block type=\"controls_if\"><comment pinned=\"false\" h=\"80\" w=\"160\">convert tilt to speed</comment><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">GT</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"$eL(:q~u7?6|ZwQrtu?2\">absRaw</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\";s*9nsIt0CB$dpODbVt#\">DEADZONE</field></block></value></block></value><statement name=\"DO0\"><block type=\"variables_set\"><field name=\"VAR\" id=\"}?l`f.LshgyX9Whg-p3_\">mag</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">DIVIDE</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MINUS</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"$eL(:q~u7?6|ZwQrtu?2\">absRaw</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\";s*9nsIt0CB$dpODbVt#\">DEADZONE</field></block></value></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MINUS</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"r?h3NfTK9%[%vf0PxQE]\">MAX_RAW</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\";s*9nsIt0CB$dpODbVt#\">DEADZONE</field></block></value></block></value></block></value><next><block type=\"controls_if\"><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">GT</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"}?l`f.LshgyX9Whg-p3_\">mag</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></value><statement name=\"DO0\"><block type=\"variables_set\"><field name=\"VAR\" id=\"}?l`f.LshgyX9Whg-p3_\">mag</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></statement><next><block type=\"variables_set\"><field name=\"VAR\" id=\";k;Ru+Mjb9-AZB`aGz%C\">baseSpeed</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_js_round\"><field name=\"OP\">trunc</field><value name=\"ARG0\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MULTIPLY</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"}?l`f.LshgyX9Whg-p3_\">mag</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"GA?c$GIud;2mk955iHB)\">MAX_SPEED</field></block></value></block></value></block></value><next><block type=\"controls_if\"><comment pinned=\"false\" h=\"80\" w=\"160\">backward tilt</comment><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">GT</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"9{@^NwNBa!QRe#(_VCi0\">forwardRaw</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value></block></value><statement name=\"DO0\"><block type=\"variables_set\"><field name=\"VAR\" id=\";k;Ru+Mjb9-AZB`aGz%C\">baseSpeed</field><data>{\"commentRefs\":[],\"fieldData\":{}}</data><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MINUS</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\";k;Ru+Mjb9-AZB`aGz%C\">baseSpeed</field></block></value></block></value></block></statement></block></next></block></next></block></next></block></statement><next><block type=\"variables_set\"><field name=\"VAR\" id=\"T96T~1D)7{lqyiV3WS)h\">leftTarget</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\";k;Ru+Mjb9-AZB`aGz%C\">baseSpeed</field></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"Ximo`t(?un[/3,AIzDrW\">rightTarget</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\";k;Ru+Mjb9-AZB`aGz%C\">baseSpeed</field></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"2!XA-pg#%]OGla$n2Q2i\">turnLeft</field><comment pinned=\"false\" h=\"80\" w=\"160\">steering logic</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"device_get_button2\"><field name=\"NAME\">Button.A</field></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"VH$HYlt55|/|r7N4]|PR\">turnRight</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"device_get_button2\"><field name=\"NAME\">Button.B</field></block></value><next><block type=\"controls_if\"><mutation elseif=\"1\" else=\"1\"></mutation><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_operation\"><field name=\"OP\">AND</field><value name=\"A\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"2!XA-pg#%]OGla$n2Q2i\">turnLeft</field></block></value><value name=\"B\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"VH$HYlt55|/|r7N4]|PR\">turnRight</field></block></value></block></value><statement name=\"DO0\"><block type=\"variables_set\"><field name=\"VAR\" id=\"T96T~1D)7{lqyiV3WS)h\">leftTarget</field><comment pinned=\"false\" h=\"80\" w=\"160\">stop if both pressed</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"Ximo`t(?un[/3,AIzDrW\">rightTarget</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><next><block type=\"basic_show_icon\"><field name=\"i\">IconNames.No</field></block></next></block></next></block></statement><value name=\"IF1\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_operation\"><field name=\"OP\">OR</field><value name=\"A\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"2!XA-pg#%]OGla$n2Q2i\">turnLeft</field></block></value><value name=\"B\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"VH$HYlt55|/|r7N4]|PR\">turnRight</field></block></value></block></value><statement name=\"DO1\"><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"let turnSign = turnRight ? 1 : -1\" numlines=\"1\" declaredvars=\"turnSign\"></mutation><next><block type=\"controls_if\"><mutation else=\"1\"></mutation><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">NEQ</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\";k;Ru+Mjb9-AZB`aGz%C\">baseSpeed</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value></block></value><statement name=\"DO0\"><block type=\"variables_set\"><field name=\"VAR\" id=\"T96T~1D)7{lqyiV3WS)h\">leftTarget</field><comment pinned=\"false\" h=\"80\" w=\"160\">turning while moving  gentle mix</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"function_call_output\"><mutation name=\"clamp\" functionid=\"gd^T]Tx{O~.LP,PX]Ke%\"><arg name=\"v\" id=\"44kzxz4owmihy1tawpb3\" type=\"number\"></arg><arg name=\"lo\" id=\"qoqf9ciqb4y3crv8laayo\" type=\"number\"></arg><arg name=\"hi\" id=\"247682caveqe065wi9nef\" type=\"number\"></arg></mutation><value name=\"44kzxz4owmihy1tawpb3\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MINUS</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\";k;Ru+Mjb9-AZB`aGz%C\">baseSpeed</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MULTIPLY</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"t-|=(RsvZI3K6rwt~+%`\">turnSign</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"U9@tZIoRj4N:pmG-LdEm\">TURN_MIX</field></block></value></block></value></block></value><value name=\"qoqf9ciqb4y3crv8laayo\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MINUS</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"GA?c$GIud;2mk955iHB)\">MAX_SPEED</field></block></value></block></value><value name=\"247682caveqe065wi9nef\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"GA?c$GIud;2mk955iHB)\">MAX_SPEED</field></block></value></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"Ximo`t(?un[/3,AIzDrW\">rightTarget</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"function_call_output\"><mutation name=\"clamp\" functionid=\"gd^T]Tx{O~.LP,PX]Ke%\"><arg name=\"v\" id=\"44kzxz4owmihy1tawpb3\" type=\"number\"></arg><arg name=\"lo\" id=\"qoqf9ciqb4y3crv8laayo\" type=\"number\"></arg><arg name=\"hi\" id=\"247682caveqe065wi9nef\" type=\"number\"></arg></mutation><value name=\"44kzxz4owmihy1tawpb3\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">ADD</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\";k;Ru+Mjb9-AZB`aGz%C\">baseSpeed</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MULTIPLY</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"t-|=(RsvZI3K6rwt~+%`\">turnSign</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"U9@tZIoRj4N:pmG-LdEm\">TURN_MIX</field></block></value></block></value></block></value><value name=\"qoqf9ciqb4y3crv8laayo\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MINUS</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"GA?c$GIud;2mk955iHB)\">MAX_SPEED</field></block></value></block></value><value name=\"247682caveqe065wi9nef\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"GA?c$GIud;2mk955iHB)\">MAX_SPEED</field></block></value></block></value></block></next></block></statement><statement name=\"ELSE\"><block type=\"variables_set\"><field name=\"VAR\" id=\"T96T~1D)7{lqyiV3WS)h\">leftTarget</field><comment pinned=\"false\" h=\"80\" w=\"160\">spin in place when stationary</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MULTIPLY</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MINUS</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"t-|=(RsvZI3K6rwt~+%`\">turnSign</field></block></value></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"c5|VYf(M9wz[@zQPu5gu\">TURN_POWER</field></block></value></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"Ximo`t(?un[/3,AIzDrW\">rightTarget</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MULTIPLY</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"t-|=(RsvZI3K6rwt~+%`\">turnSign</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"c5|VYf(M9wz[@zQPu5gu\">TURN_POWER</field></block></value></block></value></block></next></block></statement><next><block type=\"controls_if\"><mutation else=\"1\"></mutation><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">GT</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"t-|=(RsvZI3K6rwt~+%`\">turnSign</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value></block></value><statement name=\"DO0\"><block type=\"basic_show_arrow\"><value name=\"i\"><shadow type=\"device_arrow\"><field name=\"arrow\">ArrowNames.East</field></shadow></value></block></statement><statement name=\"ELSE\"><block type=\"basic_show_arrow\"><value name=\"i\"><shadow type=\"device_arrow\"><field name=\"arrow\">ArrowNames.West</field></shadow></value></block></statement></block></next></block></next></block></statement><statement name=\"ELSE\"><block type=\"controls_if\"><mutation elseif=\"1\" else=\"1\"></mutation><comment pinned=\"false\" h=\"80\" w=\"160\">show direction of motion</comment><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">GT</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\";k;Ru+Mjb9-AZB`aGz%C\">baseSpeed</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">30</field></shadow></value></block></value><statement name=\"DO0\"><block type=\"basic_show_arrow\"><value name=\"i\"><shadow type=\"device_arrow\"><field name=\"arrow\">ArrowNames.North</field></shadow></value></block></statement><value name=\"IF1\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">LT</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\";k;Ru+Mjb9-AZB`aGz%C\">baseSpeed</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">-30</field></shadow></value></block></value><statement name=\"DO1\"><block type=\"basic_show_arrow\"><value name=\"i\"><shadow type=\"device_arrow\"><field name=\"arrow\">ArrowNames.South</field></shadow></value></block></statement><statement name=\"ELSE\"><block type=\"device_clear_display\"></block></statement></block></statement><next><block type=\"variables_set\"><field name=\"VAR\" id=\"T96T~1D)7{lqyiV3WS)h\">leftTarget</field><comment pinned=\"false\" h=\"80\" w=\"160\">clamp &amp; smooth</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"function_call_output\"><mutation name=\"rateLimit\" functionid=\"-qd,)4i)W8~vi}R,ICR?\"><arg name=\"prev\" id=\"t3rapsv83ogcq7yl2vv6d\" type=\"number\"></arg><arg name=\"target\" id=\"g3rhmejmcyht7hertyafg\" type=\"number\"></arg><arg name=\"maxDelta\" id=\"v6ev7wym39hrt3nyabg3\" type=\"number\"></arg></mutation><value name=\"t3rapsv83ogcq7yl2vv6d\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"1()+F|!eRLjWE*WL%jGq\">prevLeft</field></block></value><value name=\"g3rhmejmcyht7hertyafg\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow><block type=\"function_call_output\"><mutation name=\"clamp\" functionid=\"gd^T]Tx{O~.LP,PX]Ke%\"><arg name=\"v\" id=\"44kzxz4owmihy1tawpb3\" type=\"number\"></arg><arg name=\"lo\" id=\"qoqf9ciqb4y3crv8laayo\" type=\"number\"></arg><arg name=\"hi\" id=\"247682caveqe065wi9nef\" type=\"number\"></arg></mutation><value name=\"44kzxz4owmihy1tawpb3\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"T96T~1D)7{lqyiV3WS)h\">leftTarget</field></block></value><value name=\"qoqf9ciqb4y3crv8laayo\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MINUS</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"GA?c$GIud;2mk955iHB)\">MAX_SPEED</field></block></value></block></value><value name=\"247682caveqe065wi9nef\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"GA?c$GIud;2mk955iHB)\">MAX_SPEED</field></block></value></block></value><value name=\"v6ev7wym39hrt3nyabg3\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\",8P~(Pvfh-rvWv,TFs04\">RATE_LIMIT</field></block></value></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"Ximo`t(?un[/3,AIzDrW\">rightTarget</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"function_call_output\"><mutation name=\"rateLimit\" functionid=\"-qd,)4i)W8~vi}R,ICR?\"><arg name=\"prev\" id=\"t3rapsv83ogcq7yl2vv6d\" type=\"number\"></arg><arg name=\"target\" id=\"g3rhmejmcyht7hertyafg\" type=\"number\"></arg><arg name=\"maxDelta\" id=\"v6ev7wym39hrt3nyabg3\" type=\"number\"></arg></mutation><value name=\"t3rapsv83ogcq7yl2vv6d\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"+`RHQ}Hp.j2swMc%S$$k\">prevRight</field></block></value><value name=\"g3rhmejmcyht7hertyafg\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow><block type=\"function_call_output\"><mutation name=\"clamp\" functionid=\"gd^T]Tx{O~.LP,PX]Ke%\"><arg name=\"v\" id=\"44kzxz4owmihy1tawpb3\" type=\"number\"></arg><arg name=\"lo\" id=\"qoqf9ciqb4y3crv8laayo\" type=\"number\"></arg><arg name=\"hi\" id=\"247682caveqe065wi9nef\" type=\"number\"></arg></mutation><value name=\"44kzxz4owmihy1tawpb3\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"Ximo`t(?un[/3,AIzDrW\">rightTarget</field></block></value><value name=\"qoqf9ciqb4y3crv8laayo\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MINUS</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"GA?c$GIud;2mk955iHB)\">MAX_SPEED</field></block></value></block></value><value name=\"247682caveqe065wi9nef\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"GA?c$GIud;2mk955iHB)\">MAX_SPEED</field></block></value></block></value><value name=\"v6ev7wym39hrt3nyabg3\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\",8P~(Pvfh-rvWv,TFs04\">RATE_LIMIT</field></block></value></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"1()+F|!eRLjWE*WL%jGq\">prevLeft</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"T96T~1D)7{lqyiV3WS)h\">leftTarget</field></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"+`RHQ}Hp.j2swMc%S$$k\">prevRight</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"Ximo`t(?un[/3,AIzDrW\">rightTarget</field></block></value><next><block type=\"radio_datagram_send_string\"><value name=\"msg\"><block type=\"text_join\"><mutation items=\"3\"></mutation><value name=\"ADD0\"><shadow type=\"text\"><field name=\"TEXT\"></field></shadow><block type=\"typescript_expression\"><field name=\"EXPRESSION\">leftTarget.toString()</field></block></value><value name=\"ADD1\"><shadow type=\"text\"><field name=\"TEXT\">,</field></shadow></value><value name=\"ADD2\"><shadow type=\"text\"><field name=\"TEXT\"></field></shadow><block type=\"typescript_expression\"><field name=\"EXPRESSION\">rightTarget.toString()</field></block></value></block></value><next><block type=\"device_pause\"><value name=\"pause\"><shadow type=\"timePicker\"><field name=\"ms\">500</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"/tan]#m)^RocHI]84Syt\">LOOP_MS</field></block></value></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></statement></block><block type=\"function_definition\" x=\"1752\" y=\"0\"><mutation name=\"clamp\" functionid=\"gd^T]Tx{O~.LP,PX]Ke%\"><arg name=\"v\" id=\"44kzxz4owmihy1tawpb3\" type=\"number\"></arg><arg name=\"lo\" id=\"qoqf9ciqb4y3crv8laayo\" type=\"number\"></arg><arg name=\"hi\" id=\"247682caveqe065wi9nef\" type=\"number\"></arg></mutation><field name=\"function_name\">clamp</field><value name=\"44kzxz4owmihy1tawpb3\"><block type=\"argument_reporter_number\" deletable=\"false\"><field name=\"VALUE\">v</field></block></value><value name=\"qoqf9ciqb4y3crv8laayo\"><block type=\"argument_reporter_number\" deletable=\"false\"><field name=\"VALUE\">lo</field></block></value><value name=\"247682caveqe065wi9nef\"><block type=\"argument_reporter_number\" deletable=\"false\"><field name=\"VALUE\">hi</field></block></value><statement name=\"STACK\"><block type=\"controls_if\"><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">LT</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"argument_reporter_number\"><field name=\"VALUE\">v</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"argument_reporter_number\"><field name=\"VALUE\">lo</field></block></value></block></value><statement name=\"DO0\"><block type=\"function_return\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" no_return_value=\"false\"></mutation><value name=\"RETURN_VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"argument_reporter_number\"><field name=\"VALUE\">lo</field></block></value></block></statement><next><block type=\"controls_if\"><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">GT</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"argument_reporter_number\"><field name=\"VALUE\">v</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"argument_reporter_number\"><field name=\"VALUE\">hi</field></block></value></block></value><statement name=\"DO0\"><block type=\"function_return\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" no_return_value=\"false\"></mutation><value name=\"RETURN_VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"argument_reporter_number\"><field name=\"VALUE\">hi</field></block></value></block></statement><next><block type=\"function_return\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" no_return_value=\"false\"></mutation><value name=\"RETURN_VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"argument_reporter_number\"><field name=\"VALUE\">v</field></block></value></block></next></block></next></block></statement></block><block type=\"function_definition\" x=\"2152\" y=\"0\"><mutation name=\"rateLimit\" functionid=\"-qd,)4i)W8~vi}R,ICR?\"><arg name=\"prev\" id=\"t3rapsv83ogcq7yl2vv6d\" type=\"number\"></arg><arg name=\"target\" id=\"g3rhmejmcyht7hertyafg\" type=\"number\"></arg><arg name=\"maxDelta\" id=\"v6ev7wym39hrt3nyabg3\" type=\"number\"></arg></mutation><field name=\"function_name\">rateLimit</field><value name=\"t3rapsv83ogcq7yl2vv6d\"><block type=\"argument_reporter_number\" deletable=\"false\"><field name=\"VALUE\">prev</field></block></value><value name=\"g3rhmejmcyht7hertyafg\"><block type=\"argument_reporter_number\" deletable=\"false\"><field name=\"VALUE\">target</field></block></value><value name=\"v6ev7wym39hrt3nyabg3\"><block type=\"argument_reporter_number\" deletable=\"false\"><field name=\"VALUE\">maxDelta</field></block></value><statement name=\"STACK\"><block type=\"variables_set\"><field name=\"VAR\" id=\"4:qPykg5)^72Mhc8kql}\">delta</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MINUS</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"argument_reporter_number\"><field name=\"VALUE\">target</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"argument_reporter_number\"><field name=\"VALUE\">prev</field></block></value></block></value><next><block type=\"controls_if\"><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">GT</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"4:qPykg5)^72Mhc8kql}\">delta</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"argument_reporter_number\"><field name=\"VALUE\">maxDelta</field></block></value></block></value><statement name=\"DO0\"><block type=\"variables_set\"><field name=\"VAR\" id=\"4:qPykg5)^72Mhc8kql}\">delta</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"argument_reporter_number\"><field name=\"VALUE\">maxDelta</field></block></value></block></statement><next><block type=\"controls_if\"><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">LT</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"4:qPykg5)^72Mhc8kql}\">delta</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MINUS</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"argument_reporter_number\"><field name=\"VALUE\">maxDelta</field></block></value></block></value></block></value><statement name=\"DO0\"><block type=\"variables_set\"><field name=\"VAR\" id=\"4:qPykg5)^72Mhc8kql}\">delta</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MINUS</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"argument_reporter_number\"><field name=\"VALUE\">maxDelta</field></block></value></block></value></block></statement><next><block type=\"function_return\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" no_return_value=\"false\"></mutation><value name=\"RETURN_VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">ADD</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"argument_reporter_number\"><field name=\"VALUE\">prev</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"4:qPykg5)^72Mhc8kql}\">delta</field></block></value></block></value></block></next></block></next></block></next></block></statement></block></xml>"]]}]}]},{"timestamp":1759798990191,"editorVersion":"8.0.16","changes":[{"type":"edited","filename":"pxt.json","patch":[{"start1":353,"length1":44,"diffs":[[1,""]]}]},{"type":"added","filename":"test.ts","value":"// tests go here; this will not be compiled when this package is used as an extension.\n"}]}],"snapshots":[{"timestamp":1759715667404,"editorVersion":"8.0.16","text":{"main.blocks":"<xml xmlns=\"http://www.w3.org/1999/xhtml\">\n  <block type=\"pxt-on-start\"></block>\n  <block type=\"device_forever\"></block>\n</xml>","main.ts":"\n","README.md":"","pxt.json":"{\n    \"name\": \"ftir\",\n    \"description\": \"\",\n    \"dependencies\": {\n        \"core\": \"*\",\n        \"radio\": \"*\",\n        \"microphone\": \"*\"\n    },\n    \"files\": [\n        \"main.blocks\",\n        \"main.ts\",\n        \"README.md\"\n    ],\n    \"additionalFilePaths\": []\n}\n"}},{"timestamp":1759717512654,"editorVersion":"8.0.16","text":{"main.blocks":"<xml xmlns=\"https://developers.google.com/blockly/xml\"><variables><variable id=\"~U_zudSh2-[Huvd`mecM\">delta</variable><variable id=\"YOL~bEp{DuE?~VY~pH[`\">rawY</variable><variable id=\"B}fwCt7Do=$0Q0?#sl5`\">neutralY</variable><variable id=\"jvQp}X^5~W(B{gw%iVG$\">forwardRaw</variable><variable id=\"6cm$#3ShJY$6/S-6WH?[\">absRaw</variable><variable id=\"wZnMHCsK@Via,(ZvfDov\">DEADZONE</variable><variable id=\"(eoD{Jy1IH4wF%nsU+Mp\">mag</variable><variable id=\"l=KioqHwFTcF!W-p/Xb}\">MAX_RAW</variable><variable id=\"R!9us,`.fd+xv9`Mtl,X\">baseSpeed</variable><variable id=\"sWIFw1!$:?thMF@v%_+H\">MAX_SPEED</variable><variable id=\"pUVQ9^j*`=3/GHkI}IG0\">sign</variable><variable id=\"A-70K23%O-G:u0NI~nKx\">leftTarget</variable><variable id=\"MbZ1=ADHa,W0)oDLmQXg\">rightTarget</variable><variable id=\"j4C=d,5jZJcF-U$%XZDB\">a</variable><variable id=\"s+1KjFg%X:om[+623+eq\">b</variable><variable id=\"Z`=i)aq0*j3e?TsBTM1G\">speedFrac</variable><variable id=\"$303o*Pskt|!Z+C0Ts~e\">reduction</variable><variable id=\"Z.T~p/(93}t_dn*2f98h\">turnEffect</variable><variable id=\"_gh5}RP?#?)`Cpa7Kodk\">TURN_BASE</variable><variable id=\"8Z2H40vrZJ#^hz$TmJ)#\">turnSign</variable><variable id=\"m1TA5VpaFowWi3$UbYuE\">prevLeft</variable><variable id=\"(88?/v8!~,Wf|v$qtp+G\">RATE_LIMIT</variable><variable id=\"X3Zo?G*km]8eqNu}6_BV\">prevRight</variable><variable id=\"|T0.0N=nm)6,v]sw?FdG\">SMOOTH_FACTOR</variable><variable id=\"Rx-8k9FA::,3f]DZc!PM\">LOOP_MS</variable></variables><block type=\"pxt-on-start\" x=\"0\" y=\"0\"><statement name=\"HANDLER\"><block type=\"radio_set_group\"><value name=\"ID\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"255\" precision=\"0\"></mutation><field name=\"SLIDER\">3</field></shadow></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"Rx-8k9FA::,3f]DZc!PM\">LOOP_MS</field><comment pinned=\"false\" h=\"80\" w=\"160\">Sender: tilt-to-drive with steering while moving (no LEDs)</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">25</field></shadow></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"l=KioqHwFTcF!W-p/Xb}\">MAX_RAW</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">1000</field></shadow></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"sWIFw1!$:?thMF@v%_+H\">MAX_SPEED</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">255</field></shadow></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"wZnMHCsK@Via,(ZvfDov\">DEADZONE</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">30</field></shadow></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"_gh5}RP?#?)`Cpa7Kodk\">TURN_BASE</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">220</field></shadow></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"|T0.0N=nm)6,v]sw?FdG\">SMOOTH_FACTOR</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">2</field></shadow></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"(88?/v8!~,Wf|v$qtp+G\">RATE_LIMIT</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">160</field></shadow></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"B}fwCt7Do=$0Q0?#sl5`\">neutralY</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"device_acceleration\"><field name=\"NAME\">Dimension.Y</field></block></value></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></statement></block><block type=\"device_forever\" x=\"503\" y=\"0\"><comment pinned=\"false\" h=\"80\" w=\"160\">compute base speed (signed): forwardRaw &lt; 0 -&gt; forward positive, else backward negative</comment><statement name=\"HANDLER\"><block type=\"variables_set\"><field name=\"VAR\" id=\"YOL~bEp{DuE?~VY~pH[`\">rawY</field><comment pinned=\"false\" h=\"80\" w=\"160\">read and center Y</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MINUS</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"device_acceleration\"><field name=\"NAME\">Dimension.Y</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"B}fwCt7Do=$0Q0?#sl5`\">neutralY</field></block></value></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"jvQp}X^5~W(B{gw%iVG$\">forwardRaw</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MINUS</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"YOL~bEp{DuE?~VY~pH[`\">rawY</field></block></value></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"6cm$#3ShJY$6/S-6WH?[\">absRaw</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_op3\"><value name=\"x\"><block type=\"variables_get\"><field name=\"VAR\" id=\"jvQp}X^5~W(B{gw%iVG$\">forwardRaw</field></block></value></block></value><next><block type=\"controls_if\"><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">GT</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"6cm$#3ShJY$6/S-6WH?[\">absRaw</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"wZnMHCsK@Via,(ZvfDov\">DEADZONE</field></block></value></block></value><statement name=\"DO0\"><block type=\"variables_set\"><field name=\"VAR\" id=\"(eoD{Jy1IH4wF%nsU+Mp\">mag</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">DIVIDE</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MINUS</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"6cm$#3ShJY$6/S-6WH?[\">absRaw</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"wZnMHCsK@Via,(ZvfDov\">DEADZONE</field></block></value></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MINUS</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"l=KioqHwFTcF!W-p/Xb}\">MAX_RAW</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"wZnMHCsK@Via,(ZvfDov\">DEADZONE</field></block></value></block></value></block></value><next><block type=\"controls_if\"><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">GT</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"(eoD{Jy1IH4wF%nsU+Mp\">mag</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></value><statement name=\"DO0\"><block type=\"variables_set\"><field name=\"VAR\" id=\"(eoD{Jy1IH4wF%nsU+Mp\">mag</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></statement><next><block type=\"variables_set\"><field name=\"VAR\" id=\"(eoD{Jy1IH4wF%nsU+Mp\">mag</field><comment pinned=\"false\" h=\"80\" w=\"160\">slightly aggressive curve for punch</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">POWER</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"(eoD{Jy1IH4wF%nsU+Mp\">mag</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0.9</field></shadow></value></block></value><next><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"let sign = forwardRaw &lt; 0 ? 1 : -1\" numlines=\"1\" declaredvars=\"sign\"></mutation><next><block type=\"variables_set\"><field name=\"VAR\" id=\"R!9us,`.fd+xv9`Mtl,X\">baseSpeed</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MULTIPLY</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_js_round\"><field name=\"OP\">trunc</field><value name=\"ARG0\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MULTIPLY</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"(eoD{Jy1IH4wF%nsU+Mp\">mag</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"sWIFw1!$:?thMF@v%_+H\">MAX_SPEED</field></block></value></block></value></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"pUVQ9^j*`=3/GHkI}IG0\">sign</field></block></value></block></value></block></next></block></next></block></next></block></next></block></statement><next><block type=\"variables_set\"><field name=\"VAR\" id=\"A-70K23%O-G:u0NI~nKx\">leftTarget</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"R!9us,`.fd+xv9`Mtl,X\">baseSpeed</field></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"MbZ1=ADHa,W0)oDLmQXg\">rightTarget</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"R!9us,`.fd+xv9`Mtl,X\">baseSpeed</field></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"j4C=d,5jZJcF-U$%XZDB\">a</field><comment pinned=\"false\" h=\"80\" w=\"160\">buttons</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"device_get_button2\"><field name=\"NAME\">Button.A</field></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"s+1KjFg%X:om[+623+eq\">b</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"device_get_button2\"><field name=\"NAME\">Button.B</field></block></value><next><block type=\"controls_if\"><mutation elseif=\"1\"></mutation><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_operation\"><field name=\"OP\">AND</field><value name=\"A\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"j4C=d,5jZJcF-U$%XZDB\">a</field></block></value><value name=\"B\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"s+1KjFg%X:om[+623+eq\">b</field></block></value></block></value><statement name=\"DO0\"><block type=\"variables_set\"><field name=\"VAR\" id=\"A-70K23%O-G:u0NI~nKx\">leftTarget</field><comment pinned=\"false\" h=\"80\" w=\"160\">both -&gt; immediate stop</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"MbZ1=ADHa,W0)oDLmQXg\">rightTarget</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value></block></next></block></statement><value name=\"IF1\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_operation\"><field name=\"OP\">OR</field><value name=\"A\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"j4C=d,5jZJcF-U$%XZDB\">a</field></block></value><value name=\"B\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"s+1KjFg%X:om[+623+eq\">b</field></block></value></block></value><statement name=\"DO1\"><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"let turnSign = a ? -1 : 1\" numlines=\"1\" declaredvars=\"turnSign\"></mutation><comment pinned=\"false\" h=\"80\" w=\"160\">A = left (-1), B = right (+1)</comment><next><block type=\"variables_set\"><field name=\"VAR\" id=\"Z`=i)aq0*j3e?TsBTM1G\">speedFrac</field><data>{\"commentRefs\":[],\"fieldData\":{}}</data><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_op2\"><field name=\"op\">min</field><value name=\"x\"><block type=\"math_arithmetic\"><field name=\"OP\">DIVIDE</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_op3\"><value name=\"x\"><block type=\"variables_get\"><field name=\"VAR\" id=\"R!9us,`.fd+xv9`Mtl,X\">baseSpeed</field></block></value></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"sWIFw1!$:?thMF@v%_+H\">MAX_SPEED</field></block></value></block></value><value name=\"y\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"$303o*Pskt|!Z+C0Ts~e\">reduction</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">POWER</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MINUS</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"Z`=i)aq0*j3e?TsBTM1G\">speedFrac</field></block></value></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0.7</field></shadow></value></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"Z.T~p/(93}t_dn*2f98h\">turnEffect</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_js_round\"><field name=\"OP\">trunc</field><value name=\"ARG0\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MULTIPLY</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"_gh5}RP?#?)`Cpa7Kodk\">TURN_BASE</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">ADD</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0.6</field></shadow></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MULTIPLY</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0.4</field></shadow></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"$303o*Pskt|!Z+C0Ts~e\">reduction</field></block></value></block></value></block></value></block></value></block></value><next><block type=\"controls_if\"><mutation else=\"1\"></mutation><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">NEQ</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"R!9us,`.fd+xv9`Mtl,X\">baseSpeed</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value></block></value><statement name=\"DO0\"><block type=\"variables_set\"><field name=\"VAR\" id=\"A-70K23%O-G:u0NI~nKx\">leftTarget</field><comment pinned=\"false\" h=\"80\" w=\"160\">preserve forward/back component and add/subtract turning</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MINUS</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"R!9us,`.fd+xv9`Mtl,X\">baseSpeed</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MULTIPLY</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"8Z2H40vrZJ#^hz$TmJ)#\">turnSign</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"Z.T~p/(93}t_dn*2f98h\">turnEffect</field></block></value></block></value></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"MbZ1=ADHa,W0)oDLmQXg\">rightTarget</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">ADD</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"R!9us,`.fd+xv9`Mtl,X\">baseSpeed</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MULTIPLY</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"8Z2H40vrZJ#^hz$TmJ)#\">turnSign</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"Z.T~p/(93}t_dn*2f98h\">turnEffect</field></block></value></block></value></block></value></block></next></block></statement><statement name=\"ELSE\"><block type=\"variables_set\"><field name=\"VAR\" id=\"A-70K23%O-G:u0NI~nKx\">leftTarget</field><comment pinned=\"false\" h=\"80\" w=\"160\">no forward -&gt; rotate in place</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MULTIPLY</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MINUS</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"8Z2H40vrZJ#^hz$TmJ)#\">turnSign</field></block></value></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"Z.T~p/(93}t_dn*2f98h\">turnEffect</field></block></value></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"MbZ1=ADHa,W0)oDLmQXg\">rightTarget</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MULTIPLY</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"8Z2H40vrZJ#^hz$TmJ)#\">turnSign</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"Z.T~p/(93}t_dn*2f98h\">turnEffect</field></block></value></block></value></block></next></block></statement></block></next></block></next></block></next></block></next></block></statement><next><block type=\"variables_set\"><field name=\"VAR\" id=\"A-70K23%O-G:u0NI~nKx\">leftTarget</field><comment pinned=\"false\" h=\"80\" w=\"160\">clamp, rate limit, smoothing</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"function_call_output\"><mutation name=\"clamp\" functionid=\"s]V]~$TH4r3[:Awx.3S:\"><arg name=\"v\" id=\"1axx2fbxg5u02lvq8vug9\" type=\"number\"></arg><arg name=\"lo\" id=\"gde5bt153tlvnm58htb\" type=\"number\"></arg><arg name=\"hi\" id=\"lk8taf97zb43x2ujrue6\" type=\"number\"></arg></mutation><value name=\"1axx2fbxg5u02lvq8vug9\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow><block type=\"math_js_round\"><field name=\"OP\">trunc</field><value name=\"ARG0\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"A-70K23%O-G:u0NI~nKx\">leftTarget</field></block></value></block></value><value name=\"gde5bt153tlvnm58htb\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MINUS</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"sWIFw1!$:?thMF@v%_+H\">MAX_SPEED</field></block></value></block></value><value name=\"lk8taf97zb43x2ujrue6\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"sWIFw1!$:?thMF@v%_+H\">MAX_SPEED</field></block></value></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"MbZ1=ADHa,W0)oDLmQXg\">rightTarget</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"function_call_output\"><mutation name=\"clamp\" functionid=\"s]V]~$TH4r3[:Awx.3S:\"><arg name=\"v\" id=\"1axx2fbxg5u02lvq8vug9\" type=\"number\"></arg><arg name=\"lo\" id=\"gde5bt153tlvnm58htb\" type=\"number\"></arg><arg name=\"hi\" id=\"lk8taf97zb43x2ujrue6\" type=\"number\"></arg></mutation><value name=\"1axx2fbxg5u02lvq8vug9\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow><block type=\"math_js_round\"><field name=\"OP\">trunc</field><value name=\"ARG0\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"MbZ1=ADHa,W0)oDLmQXg\">rightTarget</field></block></value></block></value><value name=\"gde5bt153tlvnm58htb\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MINUS</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"sWIFw1!$:?thMF@v%_+H\">MAX_SPEED</field></block></value></block></value><value name=\"lk8taf97zb43x2ujrue6\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"sWIFw1!$:?thMF@v%_+H\">MAX_SPEED</field></block></value></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"A-70K23%O-G:u0NI~nKx\">leftTarget</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"function_call_output\"><mutation name=\"rateLimit\" functionid=\"VfCqQ9(I+m-B!E0G,{IL\"><arg name=\"prev\" id=\"1um9s2ve3h2zvmyfaf8y6k\" type=\"number\"></arg><arg name=\"target\" id=\"765nzfmuk5kb75cw2xrbe\" type=\"number\"></arg><arg name=\"maxDelta\" id=\"c2lqp5zewyc83g55qvweg\" type=\"number\"></arg></mutation><value name=\"1um9s2ve3h2zvmyfaf8y6k\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"m1TA5VpaFowWi3$UbYuE\">prevLeft</field></block></value><value name=\"765nzfmuk5kb75cw2xrbe\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"A-70K23%O-G:u0NI~nKx\">leftTarget</field></block></value><value name=\"c2lqp5zewyc83g55qvweg\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"(88?/v8!~,Wf|v$qtp+G\">RATE_LIMIT</field></block></value></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"MbZ1=ADHa,W0)oDLmQXg\">rightTarget</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"function_call_output\"><mutation name=\"rateLimit\" functionid=\"VfCqQ9(I+m-B!E0G,{IL\"><arg name=\"prev\" id=\"1um9s2ve3h2zvmyfaf8y6k\" type=\"number\"></arg><arg name=\"target\" id=\"765nzfmuk5kb75cw2xrbe\" type=\"number\"></arg><arg name=\"maxDelta\" id=\"c2lqp5zewyc83g55qvweg\" type=\"number\"></arg></mutation><value name=\"1um9s2ve3h2zvmyfaf8y6k\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"X3Zo?G*km]8eqNu}6_BV\">prevRight</field></block></value><value name=\"765nzfmuk5kb75cw2xrbe\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"MbZ1=ADHa,W0)oDLmQXg\">rightTarget</field></block></value><value name=\"c2lqp5zewyc83g55qvweg\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"(88?/v8!~,Wf|v$qtp+G\">RATE_LIMIT</field></block></value></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"A-70K23%O-G:u0NI~nKx\">leftTarget</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_js_op\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" op-type=\"infix\"></mutation><field name=\"OP\">idiv</field><value name=\"ARG0\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">ADD</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MULTIPLY</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"m1TA5VpaFowWi3$UbYuE\">prevLeft</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MINUS</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"|T0.0N=nm)6,v]sw?FdG\">SMOOTH_FACTOR</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></value></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"A-70K23%O-G:u0NI~nKx\">leftTarget</field></block></value></block></value><value name=\"ARG1\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"|T0.0N=nm)6,v]sw?FdG\">SMOOTH_FACTOR</field></block></value></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"MbZ1=ADHa,W0)oDLmQXg\">rightTarget</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_js_op\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" op-type=\"infix\"></mutation><field name=\"OP\">idiv</field><value name=\"ARG0\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">ADD</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MULTIPLY</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"X3Zo?G*km]8eqNu}6_BV\">prevRight</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MINUS</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"|T0.0N=nm)6,v]sw?FdG\">SMOOTH_FACTOR</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></value></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"MbZ1=ADHa,W0)oDLmQXg\">rightTarget</field></block></value></block></value><value name=\"ARG1\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"|T0.0N=nm)6,v]sw?FdG\">SMOOTH_FACTOR</field></block></value></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"m1TA5VpaFowWi3$UbYuE\">prevLeft</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"A-70K23%O-G:u0NI~nKx\">leftTarget</field></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"X3Zo?G*km]8eqNu}6_BV\">prevRight</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"MbZ1=ADHa,W0)oDLmQXg\">rightTarget</field></block></value><next><block type=\"radio_datagram_send_string\"><comment pinned=\"false\" h=\"80\" w=\"160\">send \"left,right\"</comment><value name=\"msg\"><block type=\"text_join\"><mutation items=\"3\"></mutation><value name=\"ADD0\"><shadow type=\"text\"><field name=\"TEXT\"></field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"A-70K23%O-G:u0NI~nKx\">leftTarget</field></block></value><value name=\"ADD1\"><shadow type=\"text\"><field name=\"TEXT\">,</field></shadow></value><value name=\"ADD2\"><shadow type=\"text\"><field name=\"TEXT\"></field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"MbZ1=ADHa,W0)oDLmQXg\">rightTarget</field></block></value></block></value><next><block type=\"device_pause\"><value name=\"pause\"><shadow type=\"timePicker\"><field name=\"ms\">500</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"Rx-8k9FA::,3f]DZc!PM\">LOOP_MS</field></block></value></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></statement></block><block type=\"function_definition\" x=\"1752\" y=\"0\"><mutation name=\"clamp\" functionid=\"s]V]~$TH4r3[:Awx.3S:\"><arg name=\"v\" id=\"1axx2fbxg5u02lvq8vug9\" type=\"number\"></arg><arg name=\"lo\" id=\"gde5bt153tlvnm58htb\" type=\"number\"></arg><arg name=\"hi\" id=\"lk8taf97zb43x2ujrue6\" type=\"number\"></arg></mutation><field name=\"function_name\">clamp</field><value name=\"1axx2fbxg5u02lvq8vug9\"><block type=\"argument_reporter_number\" deletable=\"false\"><field name=\"VALUE\">v</field></block></value><value name=\"gde5bt153tlvnm58htb\"><block type=\"argument_reporter_number\" deletable=\"false\"><field name=\"VALUE\">lo</field></block></value><value name=\"lk8taf97zb43x2ujrue6\"><block type=\"argument_reporter_number\" deletable=\"false\"><field name=\"VALUE\">hi</field></block></value><statement name=\"STACK\"><block type=\"controls_if\"><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">LT</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"argument_reporter_number\"><field name=\"VALUE\">v</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"argument_reporter_number\"><field name=\"VALUE\">lo</field></block></value></block></value><statement name=\"DO0\"><block type=\"function_return\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" no_return_value=\"false\"></mutation><value name=\"RETURN_VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"argument_reporter_number\"><field name=\"VALUE\">lo</field></block></value></block></statement><next><block type=\"controls_if\"><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">GT</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"argument_reporter_number\"><field name=\"VALUE\">v</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"argument_reporter_number\"><field name=\"VALUE\">hi</field></block></value></block></value><statement name=\"DO0\"><block type=\"function_return\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" no_return_value=\"false\"></mutation><value name=\"RETURN_VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"argument_reporter_number\"><field name=\"VALUE\">hi</field></block></value></block></statement><next><block type=\"function_return\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" no_return_value=\"false\"></mutation><value name=\"RETURN_VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"argument_reporter_number\"><field name=\"VALUE\">v</field></block></value></block></next></block></next></block></statement></block><block type=\"function_definition\" x=\"2152\" y=\"0\"><mutation name=\"rateLimit\" functionid=\"VfCqQ9(I+m-B!E0G,{IL\"><arg name=\"prev\" id=\"1um9s2ve3h2zvmyfaf8y6k\" type=\"number\"></arg><arg name=\"target\" id=\"765nzfmuk5kb75cw2xrbe\" type=\"number\"></arg><arg name=\"maxDelta\" id=\"c2lqp5zewyc83g55qvweg\" type=\"number\"></arg></mutation><field name=\"function_name\">rateLimit</field><value name=\"1um9s2ve3h2zvmyfaf8y6k\"><block type=\"argument_reporter_number\" deletable=\"false\"><field name=\"VALUE\">prev</field></block></value><value name=\"765nzfmuk5kb75cw2xrbe\"><block type=\"argument_reporter_number\" deletable=\"false\"><field name=\"VALUE\">target</field></block></value><value name=\"c2lqp5zewyc83g55qvweg\"><block type=\"argument_reporter_number\" deletable=\"false\"><field name=\"VALUE\">maxDelta</field></block></value><statement name=\"STACK\"><block type=\"variables_set\"><field name=\"VAR\" id=\"~U_zudSh2-[Huvd`mecM\">delta</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MINUS</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"argument_reporter_number\"><field name=\"VALUE\">target</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"argument_reporter_number\"><field name=\"VALUE\">prev</field></block></value></block></value><next><block type=\"controls_if\"><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">GT</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"~U_zudSh2-[Huvd`mecM\">delta</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"argument_reporter_number\"><field name=\"VALUE\">maxDelta</field></block></value></block></value><statement name=\"DO0\"><block type=\"variables_set\"><field name=\"VAR\" id=\"~U_zudSh2-[Huvd`mecM\">delta</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"argument_reporter_number\"><field name=\"VALUE\">maxDelta</field></block></value></block></statement><next><block type=\"controls_if\"><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">LT</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"~U_zudSh2-[Huvd`mecM\">delta</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MINUS</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"argument_reporter_number\"><field name=\"VALUE\">maxDelta</field></block></value></block></value></block></value><statement name=\"DO0\"><block type=\"variables_set\"><field name=\"VAR\" id=\"~U_zudSh2-[Huvd`mecM\">delta</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MINUS</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"argument_reporter_number\"><field name=\"VALUE\">maxDelta</field></block></value></block></value></block></statement><next><block type=\"function_return\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" no_return_value=\"false\"></mutation><value name=\"RETURN_VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">ADD</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"argument_reporter_number\"><field name=\"VALUE\">prev</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"~U_zudSh2-[Huvd`mecM\">delta</field></block></value></block></value></block></next></block></next></block></next></block></statement></block></xml>","main.ts":"radio.setGroup(7)\n\n// Sender: tilt-to-drive with A/B steering and arrow indicator\nconst LOOP_MS = 25\nconst MAX_RAW = 1000\nconst MAX_SPEED = 255\nconst DEADZONE = 30\nconst TURN_BASE = 220\nconst SMOOTH_FACTOR = 2\nconst RATE_LIMIT = 160\n\nlet prevLeft = 0\nlet prevRight = 0\nlet neutralY: number = input.acceleration(Dimension.Y) // initial center\n\nfunction clamp(v: number, lo: number, hi: number): number {\n    if (v < lo) return lo\n    if (v > hi) return hi\n    return v\n}\n\nfunction rateLimit(prev: number, target: number, maxDelta: number): number {\n    let delta = target - prev\n    if (delta > maxDelta) delta = maxDelta\n    if (delta < -maxDelta) delta = -maxDelta\n    return prev + delta\n}\n\nlet aWasDown = false\nlet bWasDown = false\nlet abStart = 0\n\nbasic.forever(function () {\n    let now = input.runningTime()\n    let a = input.buttonIsPressed(Button.A)\n    let b = input.buttonIsPressed(Button.B)\n\n    // A+B long press -> recalibrate neutral (refresh)\n    if (a && b) {\n        if (!(aWasDown && bWasDown)) {\n            abStart = now\n        } else {\n            if (now - abStart >= 1200) {\n                neutralY = input.acceleration(Dimension.Y)\n                // no visual splash; we only keep direction arrow below\n            }\n        }\n    }\n\n    aWasDown = a\n    bWasDown = b\n\n    // Read and center Y so tilt forward -> positive forward\n    let curY: number = input.acceleration(Dimension.Y)\n    // delta positive when device tilted forward (top away from you)\n    let delta = neutralY - curY\n    let absDelta = Math.abs(delta)\n\n    // compute base speed (signed)\n    let baseSpeed = 0\n    if (absDelta > DEADZONE) {\n        let mag = (absDelta - DEADZONE) / (MAX_RAW - DEADZONE)\n        if (mag > 1) mag = 1\n        mag = Math.pow(mag, 0.9)\n        let sign = delta > 0 ? 1 : -1  // delta>0 = forward, delta<0 = backward\n        baseSpeed = Math.trunc(mag * MAX_SPEED) * sign\n    } else {\n        baseSpeed = 0\n    }\n\n    let leftTarget = baseSpeed\n    let rightTarget = baseSpeed\n\n    // turning logic: A = left, B = right\n    if (a && b) {\n        // immediate stop\n        leftTarget = 0\n        rightTarget = 0\n    } else if (a || b) {\n        let turnSign = a ? -1 : 1\n        let speedFrac = Math.min(Math.abs(baseSpeed) / MAX_SPEED, 1)\n        let reduction = Math.pow(1 - speedFrac, 0.7)\n        let turnEffect = Math.trunc(TURN_BASE * (0.6 + 0.4 * reduction))\n\n        if (baseSpeed != 0) {\n            // move forward/back while turning\n            leftTarget = baseSpeed - turnSign * turnEffect\n            rightTarget = baseSpeed + turnSign * turnEffect\n        } else {\n            // rotate in place when no tilt\n            leftTarget = -turnSign * turnEffect\n            rightTarget = turnSign * turnEffect\n        }\n    }\n\n    // clamp + rate limit + smoothing\n    leftTarget = clamp(Math.trunc(leftTarget), -MAX_SPEED, MAX_SPEED)\n    rightTarget = clamp(Math.trunc(rightTarget), -MAX_SPEED, MAX_SPEED)\n\n    leftTarget = rateLimit(prevLeft, leftTarget, RATE_LIMIT)\n    rightTarget = rateLimit(prevRight, rightTarget, RATE_LIMIT)\n\n    leftTarget = Math.idiv(prevLeft * (SMOOTH_FACTOR - 1) + leftTarget, SMOOTH_FACTOR)\n    rightTarget = Math.idiv(prevRight * (SMOOTH_FACTOR - 1) + rightTarget, SMOOTH_FACTOR)\n\n    prevLeft = leftTarget\n    prevRight = rightTarget\n\n    // send \"left,right\"\n    radio.sendString(\"\" + leftTarget + \",\" + rightTarget)\n\n    // LED arrow pointer for direction:\n    // If moving (forward/back) show North/South.\n    // If not moving and turning show West/East.\n    // Otherwise clear screen.\n    if (Math.abs(baseSpeed) > 30) {\n        if (baseSpeed > 0) basic.showArrow(ArrowNames.North) else basic.showArrow(ArrowNames.South)\n    } else if (a && !b) {\n        basic.showArrow(ArrowNames.West)\n    } else if (b && !a) {\n        basic.showArrow(ArrowNames.East)\n    } else {\n        basic.clearScreen()\n    }\n\n    basic.pause(LOOP_MS)\n})\n","README.md":"","pxt.json":"{\n    \"name\": \"ftir\",\n    \"description\": \"\",\n    \"dependencies\": {\n        \"core\": \"*\",\n        \"radio\": \"*\",\n        \"microphone\": \"*\",\n        \"radio-broadcast\": \"*\",\n        \"pxt-rekabit\": \"github:cytrontechnologies/pxt-rekabit#v1.2.3\"\n    },\n    \"files\": [\n        \"main.blocks\",\n        \"main.ts\",\n        \"README.md\"\n    ],\n    \"preferredEditor\": \"tsprj\"\n}\n"}},{"timestamp":1759720815180,"editorVersion":"8.0.16","text":{"main.blocks":"<xml xmlns=\"https://developers.google.com/blockly/xml\"><variables><variable id=\"JH7$oIBuJJCHcg(kpWF/\">delta</variable><variable id=\"1#sr=6fk9/{2Xg9icSCF\">now</variable><variable id=\"1I$?hgT4[6=Y]UB-#`n@\">a</variable><variable id=\"ZZtdEzLmMs^JJnx!R9hS\">b</variable><variable id=\"(}93%{W]#R]![S1]I9xb\">aWasDown</variable><variable id=\"#:OkF(_;-:wb{vzG-!C1\">bWasDown</variable><variable id=\"b#J67s#r{[|2ok^`6[0l\">abStart</variable><variable id=\"L[|}(6LRt!0|sZVrD10^\">CALIBRATE_HOLD</variable><variable id=\"*PX/}.c|~kj8VC5pjA%X\">neutralY</variable><variable id=\"RC;wl(*R@X_m|OSwq/W(\">curY</variable><variable id=\"?6^#2mRm=G;lu;WyWnvR\">delta2</variable><variable id=\"gK$)?+1|9(]YSY)s7Ts5\">absDelta</variable><variable id=\"w6r]Q%P?CMJ,#/q^;l=8\">DEADZONE</variable><variable id=\"`-X/KaiEs8n1Wq1!as!j\">mag</variable><variable id=\"(#%?egH-^_e=DF61f;pJ\">MAX_RAW</variable><variable id=\"p#5b!g?N:]A|~%:fYAF.\">baseSpeed</variable><variable id=\"bCR.S=-lL.`%~O%iMqdJ\">MAX_SPEED</variable><variable id=\"a4U8*(Sy%PUj%)-v)@{?\">sign</variable><variable id=\"u,da!rc~NxV!tpYcK,mC\">leftTarget</variable><variable id=\";lI5QfQGH8XPrj`hfR}n\">rightTarget</variable><variable id=\"irxRzOuzDD3Q)ksUo/Gc\">speedFrac</variable><variable id=\"EB+lCM!w^h5Y-_T?)@WY\">reduction</variable><variable id=\"oyJRKBX)^0H,):X6#ws#\">turnEffect</variable><variable id=\"sspb++*WR$~p$yG|s$sN\">TURN_BASE</variable><variable id=\"1_rP;9~d)#}eKBBFN/$e\">turnSign</variable><variable id=\",=$?5qUJ.5uWeA5y@%9,\">prevLeft</variable><variable id=\"Aq~?`[xJi|,lE|r${0D6\">RATE_LIMIT</variable><variable id=\"Dc!$yA83;[S2$0%i2o|X\">prevRight</variable><variable id=\"j`pc:-N?%UGa^+F@_A]2\">SMOOTH_FACTOR</variable><variable id=\"AtSL30yGDhnW9-|0ZJV@\">LOOP_MS</variable></variables><block type=\"pxt-on-start\" x=\"20\" y=\"20\"><statement name=\"HANDLER\"><block type=\"radio_set_group\"><value name=\"ID\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"255\" precision=\"0\"></mutation><field name=\"SLIDER\">7</field></shadow></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"AtSL30yGDhnW9-|0ZJV@\">LOOP_MS</field><comment pinned=\"false\" h=\"80\" w=\"160\">Sender: tilt-to-drive with A/B steering and arrow indicator</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">25</field></shadow></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"(#%?egH-^_e=DF61f;pJ\">MAX_RAW</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">1000</field></shadow></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"bCR.S=-lL.`%~O%iMqdJ\">MAX_SPEED</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">255</field></shadow></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"w6r]Q%P?CMJ,#/q^;l=8\">DEADZONE</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">30</field></shadow></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"sspb++*WR$~p$yG|s$sN\">TURN_BASE</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">220</field></shadow></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"j`pc:-N?%UGa^+F@_A]2\">SMOOTH_FACTOR</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">2</field></shadow></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"Aq~?`[xJi|,lE|r${0D6\">RATE_LIMIT</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">160</field></shadow></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"L[|}(6LRt!0|sZVrD10^\">CALIBRATE_HOLD</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">1200</field></shadow></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"*PX/}.c|~kj8VC5pjA%X\">neutralY</field><comment pinned=\"false\" h=\"80\" w=\"160\">initial center</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"device_acceleration\"><field name=\"NAME\">Dimension.Y</field></block></value></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></statement></block><block type=\"device_forever\" x=\"523\" y=\"20\"><comment pinned=\"false\" h=\"80\" w=\"160\">compute base speed (signed)</comment><statement name=\"HANDLER\"><block type=\"variables_set\"><field name=\"VAR\" id=\"1#sr=6fk9/{2Xg9icSCF\">now</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"device_get_running_time\"></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"1I$?hgT4[6=Y]UB-#`n@\">a</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"device_get_button2\"><field name=\"NAME\">Button.A</field></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"ZZtdEzLmMs^JJnx!R9hS\">b</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"device_get_button2\"><field name=\"NAME\">Button.B</field></block></value><next><block type=\"controls_if\"><comment pinned=\"false\" h=\"80\" w=\"160\">A+B long press -&gt; recalibrate neutral (refresh)</comment><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_operation\"><field name=\"OP\">AND</field><value name=\"A\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"1I$?hgT4[6=Y]UB-#`n@\">a</field></block></value><value name=\"B\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"ZZtdEzLmMs^JJnx!R9hS\">b</field></block></value></block></value><statement name=\"DO0\"><block type=\"controls_if\"><mutation else=\"1\"></mutation><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_negate\"><value name=\"BOOL\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_operation\"><field name=\"OP\">AND</field><value name=\"A\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"(}93%{W]#R]![S1]I9xb\">aWasDown</field></block></value><value name=\"B\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"#:OkF(_;-:wb{vzG-!C1\">bWasDown</field></block></value></block></value></block></value><statement name=\"DO0\"><block type=\"variables_set\"><field name=\"VAR\" id=\"b#J67s#r{[|2ok^`6[0l\">abStart</field><comment pinned=\"false\" h=\"80\" w=\"160\">start of simultaneous press</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"1#sr=6fk9/{2Xg9icSCF\">now</field></block></value></block></statement><statement name=\"ELSE\"><block type=\"controls_if\"><comment pinned=\"false\" h=\"80\" w=\"160\">No extra visual besides arrow below</comment><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">GTE</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MINUS</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"1#sr=6fk9/{2Xg9icSCF\">now</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"b#J67s#r{[|2ok^`6[0l\">abStart</field></block></value></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"L[|}(6LRt!0|sZVrD10^\">CALIBRATE_HOLD</field></block></value></block></value><statement name=\"DO0\"><block type=\"variables_set\"><field name=\"VAR\" id=\"*PX/}.c|~kj8VC5pjA%X\">neutralY</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"device_acceleration\"><field name=\"NAME\">Dimension.Y</field></block></value></block></statement></block></statement></block></statement><next><block type=\"variables_set\"><field name=\"VAR\" id=\"(}93%{W]#R]![S1]I9xb\">aWasDown</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"1I$?hgT4[6=Y]UB-#`n@\">a</field></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"#:OkF(_;-:wb{vzG-!C1\">bWasDown</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"ZZtdEzLmMs^JJnx!R9hS\">b</field></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"RC;wl(*R@X_m|OSwq/W(\">curY</field><comment pinned=\"false\" h=\"80\" w=\"160\">Read and center Y so tilt forward -&gt; positive forward</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"device_acceleration\"><field name=\"NAME\">Dimension.Y</field></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"?6^#2mRm=G;lu;WyWnvR\">delta2</field><comment pinned=\"false\" h=\"80\" w=\"160\">delta positive when device tilted forward</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MINUS</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"*PX/}.c|~kj8VC5pjA%X\">neutralY</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"RC;wl(*R@X_m|OSwq/W(\">curY</field></block></value></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"gK$)?+1|9(]YSY)s7Ts5\">absDelta</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_op3\"><value name=\"x\"><block type=\"variables_get\"><field name=\"VAR\" id=\"?6^#2mRm=G;lu;WyWnvR\">delta2</field></block></value></block></value><next><block type=\"controls_if\"><mutation else=\"1\"></mutation><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">GT</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"gK$)?+1|9(]YSY)s7Ts5\">absDelta</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"w6r]Q%P?CMJ,#/q^;l=8\">DEADZONE</field></block></value></block></value><statement name=\"DO0\"><block type=\"variables_set\"><field name=\"VAR\" id=\"`-X/KaiEs8n1Wq1!as!j\">mag</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">DIVIDE</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MINUS</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"gK$)?+1|9(]YSY)s7Ts5\">absDelta</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"w6r]Q%P?CMJ,#/q^;l=8\">DEADZONE</field></block></value></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MINUS</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"(#%?egH-^_e=DF61f;pJ\">MAX_RAW</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"w6r]Q%P?CMJ,#/q^;l=8\">DEADZONE</field></block></value></block></value></block></value><next><block type=\"controls_if\"><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">GT</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"`-X/KaiEs8n1Wq1!as!j\">mag</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></value><statement name=\"DO0\"><block type=\"variables_set\"><field name=\"VAR\" id=\"`-X/KaiEs8n1Wq1!as!j\">mag</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></statement><next><block type=\"variables_set\"><field name=\"VAR\" id=\"`-X/KaiEs8n1Wq1!as!j\">mag</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">POWER</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"`-X/KaiEs8n1Wq1!as!j\">mag</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0.9</field></shadow></value></block></value><next><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"let sign = delta2 &gt; 0 ? 1 : -1\" numlines=\"1\" declaredvars=\"sign\"></mutation><comment pinned=\"false\" h=\"80\" w=\"160\">delta&gt;0 = forward, delta&lt;0 = backward</comment><next><block type=\"variables_set\"><field name=\"VAR\" id=\"p#5b!g?N:]A|~%:fYAF.\">baseSpeed</field><data>{\"commentRefs\":[],\"fieldData\":{}}</data><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MULTIPLY</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_js_round\"><field name=\"OP\">trunc</field><value name=\"ARG0\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MULTIPLY</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"`-X/KaiEs8n1Wq1!as!j\">mag</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"bCR.S=-lL.`%~O%iMqdJ\">MAX_SPEED</field></block></value></block></value></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"a4U8*(Sy%PUj%)-v)@{?\">sign</field></block></value></block></value></block></next></block></next></block></next></block></next></block></statement><statement name=\"ELSE\"><block type=\"variables_set\"><field name=\"VAR\" id=\"p#5b!g?N:]A|~%:fYAF.\">baseSpeed</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value></block></statement><next><block type=\"variables_set\"><field name=\"VAR\" id=\"u,da!rc~NxV!tpYcK,mC\">leftTarget</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"p#5b!g?N:]A|~%:fYAF.\">baseSpeed</field></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\";lI5QfQGH8XPrj`hfR}n\">rightTarget</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"p#5b!g?N:]A|~%:fYAF.\">baseSpeed</field></block></value><next><block type=\"controls_if\"><mutation elseif=\"1\"></mutation><comment pinned=\"false\" h=\"80\" w=\"160\">turning logic: A = left, B = right</comment><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_operation\"><field name=\"OP\">AND</field><value name=\"A\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"1I$?hgT4[6=Y]UB-#`n@\">a</field></block></value><value name=\"B\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"ZZtdEzLmMs^JJnx!R9hS\">b</field></block></value></block></value><statement name=\"DO0\"><block type=\"variables_set\"><field name=\"VAR\" id=\"u,da!rc~NxV!tpYcK,mC\">leftTarget</field><comment pinned=\"false\" h=\"80\" w=\"160\">immediate stop</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\";lI5QfQGH8XPrj`hfR}n\">rightTarget</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value></block></next></block></statement><value name=\"IF1\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_operation\"><field name=\"OP\">OR</field><value name=\"A\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"1I$?hgT4[6=Y]UB-#`n@\">a</field></block></value><value name=\"B\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"ZZtdEzLmMs^JJnx!R9hS\">b</field></block></value></block></value><statement name=\"DO1\"><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"let turnSign = a ? -1 : 1\" numlines=\"1\" declaredvars=\"turnSign\"></mutation><next><block type=\"variables_set\"><field name=\"VAR\" id=\"irxRzOuzDD3Q)ksUo/Gc\">speedFrac</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_op2\"><field name=\"op\">min</field><value name=\"x\"><block type=\"math_arithmetic\"><field name=\"OP\">DIVIDE</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_op3\"><value name=\"x\"><block type=\"variables_get\"><field name=\"VAR\" id=\"p#5b!g?N:]A|~%:fYAF.\">baseSpeed</field></block></value></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"bCR.S=-lL.`%~O%iMqdJ\">MAX_SPEED</field></block></value></block></value><value name=\"y\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"EB+lCM!w^h5Y-_T?)@WY\">reduction</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">POWER</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MINUS</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"irxRzOuzDD3Q)ksUo/Gc\">speedFrac</field></block></value></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0.7</field></shadow></value></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"oyJRKBX)^0H,):X6#ws#\">turnEffect</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_js_round\"><field name=\"OP\">trunc</field><value name=\"ARG0\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MULTIPLY</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"sspb++*WR$~p$yG|s$sN\">TURN_BASE</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">ADD</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0.6</field></shadow></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MULTIPLY</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0.4</field></shadow></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"EB+lCM!w^h5Y-_T?)@WY\">reduction</field></block></value></block></value></block></value></block></value></block></value><next><block type=\"controls_if\"><mutation else=\"1\"></mutation><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">NEQ</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"p#5b!g?N:]A|~%:fYAF.\">baseSpeed</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value></block></value><statement name=\"DO0\"><block type=\"variables_set\"><field name=\"VAR\" id=\"u,da!rc~NxV!tpYcK,mC\">leftTarget</field><comment pinned=\"false\" h=\"80\" w=\"160\">move forward/back while turning</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MINUS</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"p#5b!g?N:]A|~%:fYAF.\">baseSpeed</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MULTIPLY</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"1_rP;9~d)#}eKBBFN/$e\">turnSign</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"oyJRKBX)^0H,):X6#ws#\">turnEffect</field></block></value></block></value></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\";lI5QfQGH8XPrj`hfR}n\">rightTarget</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">ADD</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"p#5b!g?N:]A|~%:fYAF.\">baseSpeed</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MULTIPLY</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"1_rP;9~d)#}eKBBFN/$e\">turnSign</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"oyJRKBX)^0H,):X6#ws#\">turnEffect</field></block></value></block></value></block></value></block></next></block></statement><statement name=\"ELSE\"><block type=\"variables_set\"><field name=\"VAR\" id=\"u,da!rc~NxV!tpYcK,mC\">leftTarget</field><comment pinned=\"false\" h=\"80\" w=\"160\">rotate in place when no tilt</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MULTIPLY</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MINUS</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"1_rP;9~d)#}eKBBFN/$e\">turnSign</field></block></value></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"oyJRKBX)^0H,):X6#ws#\">turnEffect</field></block></value></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\";lI5QfQGH8XPrj`hfR}n\">rightTarget</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MULTIPLY</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"1_rP;9~d)#}eKBBFN/$e\">turnSign</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"oyJRKBX)^0H,):X6#ws#\">turnEffect</field></block></value></block></value></block></next></block></statement></block></next></block></next></block></next></block></next></block></statement><next><block type=\"variables_set\"><field name=\"VAR\" id=\"u,da!rc~NxV!tpYcK,mC\">leftTarget</field><comment pinned=\"false\" h=\"80\" w=\"160\">clamp + rate limit + smoothing</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"function_call_output\"><mutation name=\"clamp\" functionid=\"wc|Pf(YwWBux4ks6BfU2\"><arg name=\"v\" id=\"homtstu2dnb4gklnt8x8qq\" type=\"number\"></arg><arg name=\"lo\" id=\"qyy5ryiwkcobz4ed87taf\" type=\"number\"></arg><arg name=\"hi\" id=\"lx1vhdn70xenll7v6vjh\" type=\"number\"></arg></mutation><value name=\"homtstu2dnb4gklnt8x8qq\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow><block type=\"math_js_round\"><field name=\"OP\">trunc</field><value name=\"ARG0\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"u,da!rc~NxV!tpYcK,mC\">leftTarget</field></block></value></block></value><value name=\"qyy5ryiwkcobz4ed87taf\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MINUS</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"bCR.S=-lL.`%~O%iMqdJ\">MAX_SPEED</field></block></value></block></value><value name=\"lx1vhdn70xenll7v6vjh\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"bCR.S=-lL.`%~O%iMqdJ\">MAX_SPEED</field></block></value></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\";lI5QfQGH8XPrj`hfR}n\">rightTarget</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"function_call_output\"><mutation name=\"clamp\" functionid=\"wc|Pf(YwWBux4ks6BfU2\"><arg name=\"v\" id=\"homtstu2dnb4gklnt8x8qq\" type=\"number\"></arg><arg name=\"lo\" id=\"qyy5ryiwkcobz4ed87taf\" type=\"number\"></arg><arg name=\"hi\" id=\"lx1vhdn70xenll7v6vjh\" type=\"number\"></arg></mutation><value name=\"homtstu2dnb4gklnt8x8qq\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow><block type=\"math_js_round\"><field name=\"OP\">trunc</field><value name=\"ARG0\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\";lI5QfQGH8XPrj`hfR}n\">rightTarget</field></block></value></block></value><value name=\"qyy5ryiwkcobz4ed87taf\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MINUS</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"bCR.S=-lL.`%~O%iMqdJ\">MAX_SPEED</field></block></value></block></value><value name=\"lx1vhdn70xenll7v6vjh\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"bCR.S=-lL.`%~O%iMqdJ\">MAX_SPEED</field></block></value></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"u,da!rc~NxV!tpYcK,mC\">leftTarget</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"function_call_output\"><mutation name=\"rateLimit\" functionid=\"0%su8K;9@4!V76em0y@[\"><arg name=\"prev\" id=\"htqtcajy9pmfckmmhq4t\" type=\"number\"></arg><arg name=\"target\" id=\"ip7ncj6hmse69e79dvjb\" type=\"number\"></arg><arg name=\"maxDelta\" id=\"jcal6ueiy5x794pww9d8\" type=\"number\"></arg></mutation><value name=\"htqtcajy9pmfckmmhq4t\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\",=$?5qUJ.5uWeA5y@%9,\">prevLeft</field></block></value><value name=\"ip7ncj6hmse69e79dvjb\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"u,da!rc~NxV!tpYcK,mC\">leftTarget</field></block></value><value name=\"jcal6ueiy5x794pww9d8\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"Aq~?`[xJi|,lE|r${0D6\">RATE_LIMIT</field></block></value></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\";lI5QfQGH8XPrj`hfR}n\">rightTarget</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"function_call_output\"><mutation name=\"rateLimit\" functionid=\"0%su8K;9@4!V76em0y@[\"><arg name=\"prev\" id=\"htqtcajy9pmfckmmhq4t\" type=\"number\"></arg><arg name=\"target\" id=\"ip7ncj6hmse69e79dvjb\" type=\"number\"></arg><arg name=\"maxDelta\" id=\"jcal6ueiy5x794pww9d8\" type=\"number\"></arg></mutation><value name=\"htqtcajy9pmfckmmhq4t\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"Dc!$yA83;[S2$0%i2o|X\">prevRight</field></block></value><value name=\"ip7ncj6hmse69e79dvjb\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\";lI5QfQGH8XPrj`hfR}n\">rightTarget</field></block></value><value name=\"jcal6ueiy5x794pww9d8\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"Aq~?`[xJi|,lE|r${0D6\">RATE_LIMIT</field></block></value></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"u,da!rc~NxV!tpYcK,mC\">leftTarget</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_js_op\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" op-type=\"infix\"></mutation><field name=\"OP\">idiv</field><value name=\"ARG0\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">ADD</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MULTIPLY</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\",=$?5qUJ.5uWeA5y@%9,\">prevLeft</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MINUS</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"j`pc:-N?%UGa^+F@_A]2\">SMOOTH_FACTOR</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></value></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"u,da!rc~NxV!tpYcK,mC\">leftTarget</field></block></value></block></value><value name=\"ARG1\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"j`pc:-N?%UGa^+F@_A]2\">SMOOTH_FACTOR</field></block></value></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\";lI5QfQGH8XPrj`hfR}n\">rightTarget</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_js_op\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" op-type=\"infix\"></mutation><field name=\"OP\">idiv</field><value name=\"ARG0\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">ADD</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MULTIPLY</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"Dc!$yA83;[S2$0%i2o|X\">prevRight</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MINUS</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"j`pc:-N?%UGa^+F@_A]2\">SMOOTH_FACTOR</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></value></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\";lI5QfQGH8XPrj`hfR}n\">rightTarget</field></block></value></block></value><value name=\"ARG1\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"j`pc:-N?%UGa^+F@_A]2\">SMOOTH_FACTOR</field></block></value></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\",=$?5qUJ.5uWeA5y@%9,\">prevLeft</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"u,da!rc~NxV!tpYcK,mC\">leftTarget</field></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"Dc!$yA83;[S2$0%i2o|X\">prevRight</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\";lI5QfQGH8XPrj`hfR}n\">rightTarget</field></block></value><next><block type=\"radio_datagram_send_string\"><comment pinned=\"false\" h=\"80\" w=\"160\">send \"left,right\"</comment><value name=\"msg\"><block type=\"text_join\"><mutation items=\"3\"></mutation><value name=\"ADD0\"><shadow type=\"text\"><field name=\"TEXT\"></field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"u,da!rc~NxV!tpYcK,mC\">leftTarget</field></block></value><value name=\"ADD1\"><shadow type=\"text\"><field name=\"TEXT\">,</field></shadow></value><value name=\"ADD2\"><shadow type=\"text\"><field name=\"TEXT\"></field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\";lI5QfQGH8XPrj`hfR}n\">rightTarget</field></block></value></block></value><next><block type=\"controls_if\"><mutation elseif=\"2\" else=\"1\"></mutation><comment pinned=\"false\" h=\"80\" w=\"160\">LED arrow pointer for direction:\nIf moving (forward/back) show North/South.\nIf not moving and turning show West/East.\nOtherwise clear screen.</comment><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">GT</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_op3\"><value name=\"x\"><block type=\"variables_get\"><field name=\"VAR\" id=\"p#5b!g?N:]A|~%:fYAF.\">baseSpeed</field></block></value></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">30</field></shadow></value></block></value><statement name=\"DO0\"><block type=\"controls_if\"><mutation else=\"1\"></mutation><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">GT</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"p#5b!g?N:]A|~%:fYAF.\">baseSpeed</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value></block></value><statement name=\"DO0\"><block type=\"basic_show_arrow\"><value name=\"i\"><shadow type=\"device_arrow\"><field name=\"arrow\">ArrowNames.North</field></shadow></value></block></statement><statement name=\"ELSE\"><block type=\"basic_show_arrow\"><value name=\"i\"><shadow type=\"device_arrow\"><field name=\"arrow\">ArrowNames.South</field></shadow></value></block></statement></block></statement><value name=\"IF1\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_operation\"><field name=\"OP\">AND</field><value name=\"A\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"1I$?hgT4[6=Y]UB-#`n@\">a</field></block></value><value name=\"B\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_negate\"><value name=\"BOOL\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"ZZtdEzLmMs^JJnx!R9hS\">b</field></block></value></block></value></block></value><statement name=\"DO1\"><block type=\"basic_show_arrow\"><value name=\"i\"><shadow type=\"device_arrow\"><field name=\"arrow\">ArrowNames.West</field></shadow></value></block></statement><value name=\"IF2\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_operation\"><field name=\"OP\">AND</field><value name=\"A\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"ZZtdEzLmMs^JJnx!R9hS\">b</field></block></value><value name=\"B\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_negate\"><value name=\"BOOL\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"1I$?hgT4[6=Y]UB-#`n@\">a</field></block></value></block></value></block></value><statement name=\"DO2\"><block type=\"basic_show_arrow\"><value name=\"i\"><shadow type=\"device_arrow\"><field name=\"arrow\">ArrowNames.East</field></shadow></value></block></statement><statement name=\"ELSE\"><block type=\"device_clear_display\"></block></statement><next><block type=\"device_pause\"><value name=\"pause\"><shadow type=\"timePicker\"><field name=\"ms\">500</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"AtSL30yGDhnW9-|0ZJV@\">LOOP_MS</field></block></value></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></statement></block><block type=\"function_definition\" x=\"1772\" y=\"20\"><mutation name=\"clamp\" functionid=\"wc|Pf(YwWBux4ks6BfU2\"><arg name=\"v\" id=\"homtstu2dnb4gklnt8x8qq\" type=\"number\"></arg><arg name=\"lo\" id=\"qyy5ryiwkcobz4ed87taf\" type=\"number\"></arg><arg name=\"hi\" id=\"lx1vhdn70xenll7v6vjh\" type=\"number\"></arg></mutation><field name=\"function_name\">clamp</field><value name=\"homtstu2dnb4gklnt8x8qq\"><block type=\"argument_reporter_number\" deletable=\"false\"><field name=\"VALUE\">v</field></block></value><value name=\"qyy5ryiwkcobz4ed87taf\"><block type=\"argument_reporter_number\" deletable=\"false\"><field name=\"VALUE\">lo</field></block></value><value name=\"lx1vhdn70xenll7v6vjh\"><block type=\"argument_reporter_number\" deletable=\"false\"><field name=\"VALUE\">hi</field></block></value><statement name=\"STACK\"><block type=\"controls_if\"><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">LT</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"argument_reporter_number\"><field name=\"VALUE\">v</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"argument_reporter_number\"><field name=\"VALUE\">lo</field></block></value></block></value><statement name=\"DO0\"><block type=\"function_return\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" no_return_value=\"false\"></mutation><value name=\"RETURN_VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"argument_reporter_number\"><field name=\"VALUE\">lo</field></block></value></block></statement><next><block type=\"controls_if\"><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">GT</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"argument_reporter_number\"><field name=\"VALUE\">v</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"argument_reporter_number\"><field name=\"VALUE\">hi</field></block></value></block></value><statement name=\"DO0\"><block type=\"function_return\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" no_return_value=\"false\"></mutation><value name=\"RETURN_VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"argument_reporter_number\"><field name=\"VALUE\">hi</field></block></value></block></statement><next><block type=\"function_return\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" no_return_value=\"false\"></mutation><value name=\"RETURN_VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"argument_reporter_number\"><field name=\"VALUE\">v</field></block></value></block></next></block></next></block></statement></block><block type=\"function_definition\" x=\"2172\" y=\"20\"><mutation name=\"rateLimit\" functionid=\"0%su8K;9@4!V76em0y@[\"><arg name=\"prev\" id=\"htqtcajy9pmfckmmhq4t\" type=\"number\"></arg><arg name=\"target\" id=\"ip7ncj6hmse69e79dvjb\" type=\"number\"></arg><arg name=\"maxDelta\" id=\"jcal6ueiy5x794pww9d8\" type=\"number\"></arg></mutation><field name=\"function_name\">rateLimit</field><value name=\"htqtcajy9pmfckmmhq4t\"><block type=\"argument_reporter_number\" deletable=\"false\"><field name=\"VALUE\">prev</field></block></value><value name=\"ip7ncj6hmse69e79dvjb\"><block type=\"argument_reporter_number\" deletable=\"false\"><field name=\"VALUE\">target</field></block></value><value name=\"jcal6ueiy5x794pww9d8\"><block type=\"argument_reporter_number\" deletable=\"false\"><field name=\"VALUE\">maxDelta</field></block></value><statement name=\"STACK\"><block type=\"variables_set\"><field name=\"VAR\" id=\"JH7$oIBuJJCHcg(kpWF/\">delta</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MINUS</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"argument_reporter_number\"><field name=\"VALUE\">target</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"argument_reporter_number\"><field name=\"VALUE\">prev</field></block></value></block></value><next><block type=\"controls_if\"><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">GT</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"JH7$oIBuJJCHcg(kpWF/\">delta</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"argument_reporter_number\"><field name=\"VALUE\">maxDelta</field></block></value></block></value><statement name=\"DO0\"><block type=\"variables_set\"><field name=\"VAR\" id=\"JH7$oIBuJJCHcg(kpWF/\">delta</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"argument_reporter_number\"><field name=\"VALUE\">maxDelta</field></block></value></block></statement><next><block type=\"controls_if\"><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">LT</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"JH7$oIBuJJCHcg(kpWF/\">delta</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MINUS</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"argument_reporter_number\"><field name=\"VALUE\">maxDelta</field></block></value></block></value></block></value><statement name=\"DO0\"><block type=\"variables_set\"><field name=\"VAR\" id=\"JH7$oIBuJJCHcg(kpWF/\">delta</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MINUS</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"argument_reporter_number\"><field name=\"VALUE\">maxDelta</field></block></value></block></value></block></statement><next><block type=\"function_return\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" no_return_value=\"false\"></mutation><value name=\"RETURN_VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">ADD</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"argument_reporter_number\"><field name=\"VALUE\">prev</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"JH7$oIBuJJCHcg(kpWF/\">delta</field></block></value></block></value></block></next></block></next></block></next></block></statement></block></xml>","main.ts":"// ========================================\n// SENDER MICRO:BIT - Remote Controller\n// ========================================\n// Upload this to the HAND-HELD micro:bit\n\n// Radio setup - must match receiver\nradio.setGroup(1)\nradio.setTransmitPower(7)\n\n// Tilt sensitivity threshold (lower = more sensitive)\nconst TILT_THRESHOLD = 200\n\n// Command codes\nenum Command {\n    STOP = 0,\n    FORWARD = 1,\n    BACKWARD = 2,\n    LEFT = 3,\n    RIGHT = 4,\n    FORWARD_LEFT = 5,\n    FORWARD_RIGHT = 6,\n    BACKWARD_LEFT = 7,\n    BACKWARD_RIGHT = 8\n}\n\n// Helper functions to show arrows\nfunction showArrowUp() {\n    basic.showLeds(`\n        . . # . .\n        . # # # .\n        # . # . #\n        . . # . .\n        . . # . .\n        `)\n}\n\nfunction showArrowDown() {\n    basic.showLeds(`\n        . . # . .\n        . . # . .\n        # . # . #\n        . # # # .\n        . . # . .\n        `)\n}\n\nfunction showArrowLeft() {\n    basic.showLeds(`\n        . . # . .\n        . # . . .\n        # # # # #\n        . # . . .\n        . . # . .\n        `)\n}\n\nfunction showArrowRight() {\n    basic.showLeds(`\n        . . # . .\n        . . . # .\n        # # # # #\n        . . . # .\n        . . # . .\n        `)\n}\n\nfunction showArrowUpLeft() {\n    basic.showLeds(`\n        # # # . .\n        # # . . .\n        # . # . .\n        . . . # .\n        . . . . #\n        `)\n}\n\nfunction showArrowUpRight() {\n    basic.showLeds(`\n        . . # # #\n        . . . # #\n        . . # . #\n        . # . . .\n        # . . . .\n        `)\n}\n\nfunction showArrowDownLeft() {\n    basic.showLeds(`\n        . . . . #\n        . . . # .\n        # . # . .\n        # # . . .\n        # # # . .\n        `)\n}\n\nfunction showArrowDownRight() {\n    basic.showLeds(`\n        # . . . .\n        . # . . .\n        . . # . #\n        . . . # #\n        . . # # #\n        `)\n}\n\nlet currentCommand = Command.STOP\nlet lastSentCommand = Command.STOP\n\n// Main control loop\nbasic.forever(function () {\n    // Read tilt (accelerometer)\n    let pitch = input.acceleration(Dimension.X)  // Forward/Backward\n    let roll = input.acceleration(Dimension.Y)   // Left/Right\n\n    // Read buttons\n    let buttonA = input.buttonIsPressed(Button.A)\n    let buttonB = input.buttonIsPressed(Button.B)\n\n    // Detect tilt direction\n    let isTiltForward = pitch < -TILT_THRESHOLD\n    let isTiltBackward = pitch > TILT_THRESHOLD\n\n    // Determine command based on input combination\n    if (isTiltForward && buttonA && !buttonB) {\n        // Forward + Left = Diagonal forward-left\n        currentCommand = Command.FORWARD_LEFT\n        showArrowUpLeft()\n\n    } else if (isTiltForward && buttonB && !buttonA) {\n        // Forward + Right = Diagonal forward-right\n        currentCommand = Command.FORWARD_RIGHT\n        showArrowUpRight()\n\n    } else if (isTiltBackward && buttonA && !buttonB) {\n        // Backward + Left = Diagonal backward-left\n        currentCommand = Command.BACKWARD_LEFT\n        showArrowDownLeft()\n\n    } else if (isTiltBackward && buttonB && !buttonA) {\n        // Backward + Right = Diagonal backward-right\n        currentCommand = Command.BACKWARD_RIGHT\n        showArrowDownRight()\n\n    } else if (isTiltForward) {\n        // Forward only\n        currentCommand = Command.FORWARD\n        showArrowUp()\n\n    } else if (isTiltBackward) {\n        // Backward only\n        currentCommand = Command.BACKWARD\n        showArrowDown()\n\n    } else if (buttonA && !buttonB) {\n        // Left only (turn in place)\n        currentCommand = Command.LEFT\n        showArrowLeft()\n\n    } else if (buttonB && !buttonA) {\n        // Right only (turn in place)\n        currentCommand = Command.RIGHT\n        showArrowRight()\n\n    } else {\n        // No input = Stop\n        currentCommand = Command.STOP\n        basic.clearScreen()\n    }\n\n    // Send command via radio (send every time for instant response)\n    radio.sendNumber(currentCommand)\n    lastSentCommand = currentCommand\n\n    // Faster loop for better response time\n    basic.pause(20)\n})\n\n// Startup indicator\nbasic.showIcon(IconNames.Yes)\nbasic.pause(1000)\nbasic.clearScreen()","README.md":"","main.py":"","pxt.json":"{\n    \"name\": \"ftir\",\n    \"description\": \"\",\n    \"dependencies\": {\n        \"core\": \"*\",\n        \"radio\": \"*\",\n        \"microphone\": \"*\",\n        \"radio-broadcast\": \"*\",\n        \"pxt-rekabit\": \"github:cytrontechnologies/pxt-rekabit#v1.2.3\"\n    },\n    \"files\": [\n        \"main.blocks\",\n        \"main.ts\",\n        \"README.md\",\n        \"main.py\"\n    ],\n    \"preferredEditor\": \"tsprj\"\n}\n"}},{"timestamp":1759723572544,"editorVersion":"8.0.16","text":{"main.blocks":"<xml xmlns=\"https://developers.google.com/blockly/xml\"><variables><variable id=\"4:qPykg5)^72Mhc8kql}\">delta</variable><variable id=\"J~]M!m;mE5DW7I!UzXlz\">rawY</variable><variable id=\"A*]H3zIaO1gF@6fz@*1K\">neutralY</variable><variable id=\"9{@^NwNBa!QRe#(_VCi0\">forwardRaw</variable><variable id=\"$eL(:q~u7?6|ZwQrtu?2\">absRaw</variable><variable id=\";s*9nsIt0CB$dpODbVt#\">DEADZONE</variable><variable id=\"}?l`f.LshgyX9Whg-p3_\">mag</variable><variable id=\"r?h3NfTK9%[%vf0PxQE]\">MAX_RAW</variable><variable id=\";k;Ru+Mjb9-AZB`aGz%C\">baseSpeed</variable><variable id=\"GA?c$GIud;2mk955iHB)\">MAX_SPEED</variable><variable id=\"T96T~1D)7{lqyiV3WS)h\">leftTarget</variable><variable id=\"Ximo`t(?un[/3,AIzDrW\">rightTarget</variable><variable id=\"2!XA-pg#%]OGla$n2Q2i\">turnLeft</variable><variable id=\"VH$HYlt55|/|r7N4]|PR\">turnRight</variable><variable id=\"t-|=(RsvZI3K6rwt~+%`\">turnSign</variable><variable id=\"U9@tZIoRj4N:pmG-LdEm\">TURN_MIX</variable><variable id=\"c5|VYf(M9wz[@zQPu5gu\">TURN_POWER</variable><variable id=\"1()+F|!eRLjWE*WL%jGq\">prevLeft</variable><variable id=\",8P~(Pvfh-rvWv,TFs04\">RATE_LIMIT</variable><variable id=\"+`RHQ}Hp.j2swMc%S$$k\">prevRight</variable><variable id=\"/tan]#m)^RocHI]84Syt\">LOOP_MS</variable></variables><block type=\"pxt-on-start\" x=\"0\" y=\"0\"><statement name=\"HANDLER\"><block type=\"radio_set_group\"><value name=\"ID\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"255\" precision=\"0\"></mutation><field name=\"SLIDER\">7</field></shadow></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"/tan]#m)^RocHI]84Syt\">LOOP_MS</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">25</field></shadow></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"r?h3NfTK9%[%vf0PxQE]\">MAX_RAW</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">1000</field></shadow></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"GA?c$GIud;2mk955iHB)\">MAX_SPEED</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">255</field></shadow></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\";s*9nsIt0CB$dpODbVt#\">DEADZONE</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">30</field></shadow></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"c5|VYf(M9wz[@zQPu5gu\">TURN_POWER</field><comment pinned=\"false\" h=\"80\" w=\"160\">max spin power when stationary</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">220</field></shadow></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"U9@tZIoRj4N:pmG-LdEm\">TURN_MIX</field><comment pinned=\"false\" h=\"80\" w=\"160\">gentle turning while moving</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">100</field></shadow></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\",8P~(Pvfh-rvWv,TFs04\">RATE_LIMIT</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">80</field></shadow></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"A*]H3zIaO1gF@6fz@*1K\">neutralY</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"device_acceleration\"><field name=\"NAME\">Dimension.Y</field></block></value></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></statement></block><block type=\"device_forever\" x=\"503\" y=\"0\"><statement name=\"HANDLER\"><block type=\"variables_set\"><field name=\"VAR\" id=\"J~]M!m;mE5DW7I!UzXlz\">rawY</field><comment pinned=\"false\" h=\"80\" w=\"160\">read tilt</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MINUS</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"device_acceleration\"><field name=\"NAME\">Dimension.Y</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"A*]H3zIaO1gF@6fz@*1K\">neutralY</field></block></value></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"9{@^NwNBa!QRe#(_VCi0\">forwardRaw</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MINUS</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"J~]M!m;mE5DW7I!UzXlz\">rawY</field></block></value></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"$eL(:q~u7?6|ZwQrtu?2\">absRaw</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_op3\"><value name=\"x\"><block type=\"variables_get\"><field name=\"VAR\" id=\"9{@^NwNBa!QRe#(_VCi0\">forwardRaw</field></block></value></block></value><next><block type=\"controls_if\"><comment pinned=\"false\" h=\"80\" w=\"160\">convert tilt to speed</comment><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">GT</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"$eL(:q~u7?6|ZwQrtu?2\">absRaw</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\";s*9nsIt0CB$dpODbVt#\">DEADZONE</field></block></value></block></value><statement name=\"DO0\"><block type=\"variables_set\"><field name=\"VAR\" id=\"}?l`f.LshgyX9Whg-p3_\">mag</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">DIVIDE</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MINUS</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"$eL(:q~u7?6|ZwQrtu?2\">absRaw</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\";s*9nsIt0CB$dpODbVt#\">DEADZONE</field></block></value></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MINUS</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"r?h3NfTK9%[%vf0PxQE]\">MAX_RAW</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\";s*9nsIt0CB$dpODbVt#\">DEADZONE</field></block></value></block></value></block></value><next><block type=\"controls_if\"><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">GT</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"}?l`f.LshgyX9Whg-p3_\">mag</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></value><statement name=\"DO0\"><block type=\"variables_set\"><field name=\"VAR\" id=\"}?l`f.LshgyX9Whg-p3_\">mag</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></statement><next><block type=\"variables_set\"><field name=\"VAR\" id=\";k;Ru+Mjb9-AZB`aGz%C\">baseSpeed</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_js_round\"><field name=\"OP\">trunc</field><value name=\"ARG0\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MULTIPLY</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"}?l`f.LshgyX9Whg-p3_\">mag</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"GA?c$GIud;2mk955iHB)\">MAX_SPEED</field></block></value></block></value></block></value><next><block type=\"controls_if\"><comment pinned=\"false\" h=\"80\" w=\"160\">backward tilt</comment><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">GT</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"9{@^NwNBa!QRe#(_VCi0\">forwardRaw</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value></block></value><statement name=\"DO0\"><block type=\"variables_set\"><field name=\"VAR\" id=\";k;Ru+Mjb9-AZB`aGz%C\">baseSpeed</field><data>{\"commentRefs\":[],\"fieldData\":{}}</data><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MINUS</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\";k;Ru+Mjb9-AZB`aGz%C\">baseSpeed</field></block></value></block></value></block></statement></block></next></block></next></block></next></block></statement><next><block type=\"variables_set\"><field name=\"VAR\" id=\"T96T~1D)7{lqyiV3WS)h\">leftTarget</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\";k;Ru+Mjb9-AZB`aGz%C\">baseSpeed</field></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"Ximo`t(?un[/3,AIzDrW\">rightTarget</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\";k;Ru+Mjb9-AZB`aGz%C\">baseSpeed</field></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"2!XA-pg#%]OGla$n2Q2i\">turnLeft</field><comment pinned=\"false\" h=\"80\" w=\"160\">steering logic</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"device_get_button2\"><field name=\"NAME\">Button.A</field></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"VH$HYlt55|/|r7N4]|PR\">turnRight</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"device_get_button2\"><field name=\"NAME\">Button.B</field></block></value><next><block type=\"controls_if\"><mutation elseif=\"1\" else=\"1\"></mutation><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_operation\"><field name=\"OP\">AND</field><value name=\"A\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"2!XA-pg#%]OGla$n2Q2i\">turnLeft</field></block></value><value name=\"B\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"VH$HYlt55|/|r7N4]|PR\">turnRight</field></block></value></block></value><statement name=\"DO0\"><block type=\"variables_set\"><field name=\"VAR\" id=\"T96T~1D)7{lqyiV3WS)h\">leftTarget</field><comment pinned=\"false\" h=\"80\" w=\"160\">stop if both pressed</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"Ximo`t(?un[/3,AIzDrW\">rightTarget</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><next><block type=\"basic_show_icon\"><field name=\"i\">IconNames.No</field></block></next></block></next></block></statement><value name=\"IF1\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_operation\"><field name=\"OP\">OR</field><value name=\"A\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"2!XA-pg#%]OGla$n2Q2i\">turnLeft</field></block></value><value name=\"B\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"VH$HYlt55|/|r7N4]|PR\">turnRight</field></block></value></block></value><statement name=\"DO1\"><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"let turnSign = turnRight ? 1 : -1\" numlines=\"1\" declaredvars=\"turnSign\"></mutation><next><block type=\"controls_if\"><mutation else=\"1\"></mutation><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">NEQ</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\";k;Ru+Mjb9-AZB`aGz%C\">baseSpeed</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value></block></value><statement name=\"DO0\"><block type=\"variables_set\"><field name=\"VAR\" id=\"T96T~1D)7{lqyiV3WS)h\">leftTarget</field><comment pinned=\"false\" h=\"80\" w=\"160\">turning while moving  gentle mix</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"function_call_output\"><mutation name=\"clamp\" functionid=\"gd^T]Tx{O~.LP,PX]Ke%\"><arg name=\"v\" id=\"44kzxz4owmihy1tawpb3\" type=\"number\"></arg><arg name=\"lo\" id=\"qoqf9ciqb4y3crv8laayo\" type=\"number\"></arg><arg name=\"hi\" id=\"247682caveqe065wi9nef\" type=\"number\"></arg></mutation><value name=\"44kzxz4owmihy1tawpb3\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MINUS</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\";k;Ru+Mjb9-AZB`aGz%C\">baseSpeed</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MULTIPLY</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"t-|=(RsvZI3K6rwt~+%`\">turnSign</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"U9@tZIoRj4N:pmG-LdEm\">TURN_MIX</field></block></value></block></value></block></value><value name=\"qoqf9ciqb4y3crv8laayo\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MINUS</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"GA?c$GIud;2mk955iHB)\">MAX_SPEED</field></block></value></block></value><value name=\"247682caveqe065wi9nef\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"GA?c$GIud;2mk955iHB)\">MAX_SPEED</field></block></value></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"Ximo`t(?un[/3,AIzDrW\">rightTarget</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"function_call_output\"><mutation name=\"clamp\" functionid=\"gd^T]Tx{O~.LP,PX]Ke%\"><arg name=\"v\" id=\"44kzxz4owmihy1tawpb3\" type=\"number\"></arg><arg name=\"lo\" id=\"qoqf9ciqb4y3crv8laayo\" type=\"number\"></arg><arg name=\"hi\" id=\"247682caveqe065wi9nef\" type=\"number\"></arg></mutation><value name=\"44kzxz4owmihy1tawpb3\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">ADD</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\";k;Ru+Mjb9-AZB`aGz%C\">baseSpeed</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MULTIPLY</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"t-|=(RsvZI3K6rwt~+%`\">turnSign</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"U9@tZIoRj4N:pmG-LdEm\">TURN_MIX</field></block></value></block></value></block></value><value name=\"qoqf9ciqb4y3crv8laayo\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MINUS</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"GA?c$GIud;2mk955iHB)\">MAX_SPEED</field></block></value></block></value><value name=\"247682caveqe065wi9nef\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"GA?c$GIud;2mk955iHB)\">MAX_SPEED</field></block></value></block></value></block></next></block></statement><statement name=\"ELSE\"><block type=\"variables_set\"><field name=\"VAR\" id=\"T96T~1D)7{lqyiV3WS)h\">leftTarget</field><comment pinned=\"false\" h=\"80\" w=\"160\">spin in place when stationary</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MULTIPLY</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MINUS</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"t-|=(RsvZI3K6rwt~+%`\">turnSign</field></block></value></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"c5|VYf(M9wz[@zQPu5gu\">TURN_POWER</field></block></value></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"Ximo`t(?un[/3,AIzDrW\">rightTarget</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MULTIPLY</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"t-|=(RsvZI3K6rwt~+%`\">turnSign</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"c5|VYf(M9wz[@zQPu5gu\">TURN_POWER</field></block></value></block></value></block></next></block></statement><next><block type=\"controls_if\"><mutation else=\"1\"></mutation><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">GT</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"t-|=(RsvZI3K6rwt~+%`\">turnSign</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value></block></value><statement name=\"DO0\"><block type=\"basic_show_arrow\"><value name=\"i\"><shadow type=\"device_arrow\"><field name=\"arrow\">ArrowNames.East</field></shadow></value></block></statement><statement name=\"ELSE\"><block type=\"basic_show_arrow\"><value name=\"i\"><shadow type=\"device_arrow\"><field name=\"arrow\">ArrowNames.West</field></shadow></value></block></statement></block></next></block></next></block></statement><statement name=\"ELSE\"><block type=\"controls_if\"><mutation elseif=\"1\" else=\"1\"></mutation><comment pinned=\"false\" h=\"80\" w=\"160\">show direction of motion</comment><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">GT</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\";k;Ru+Mjb9-AZB`aGz%C\">baseSpeed</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">30</field></shadow></value></block></value><statement name=\"DO0\"><block type=\"basic_show_arrow\"><value name=\"i\"><shadow type=\"device_arrow\"><field name=\"arrow\">ArrowNames.North</field></shadow></value></block></statement><value name=\"IF1\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">LT</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\";k;Ru+Mjb9-AZB`aGz%C\">baseSpeed</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">-30</field></shadow></value></block></value><statement name=\"DO1\"><block type=\"basic_show_arrow\"><value name=\"i\"><shadow type=\"device_arrow\"><field name=\"arrow\">ArrowNames.South</field></shadow></value></block></statement><statement name=\"ELSE\"><block type=\"device_clear_display\"></block></statement></block></statement><next><block type=\"variables_set\"><field name=\"VAR\" id=\"T96T~1D)7{lqyiV3WS)h\">leftTarget</field><comment pinned=\"false\" h=\"80\" w=\"160\">clamp &amp; smooth</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"function_call_output\"><mutation name=\"rateLimit\" functionid=\"-qd,)4i)W8~vi}R,ICR?\"><arg name=\"prev\" id=\"t3rapsv83ogcq7yl2vv6d\" type=\"number\"></arg><arg name=\"target\" id=\"g3rhmejmcyht7hertyafg\" type=\"number\"></arg><arg name=\"maxDelta\" id=\"v6ev7wym39hrt3nyabg3\" type=\"number\"></arg></mutation><value name=\"t3rapsv83ogcq7yl2vv6d\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"1()+F|!eRLjWE*WL%jGq\">prevLeft</field></block></value><value name=\"g3rhmejmcyht7hertyafg\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow><block type=\"function_call_output\"><mutation name=\"clamp\" functionid=\"gd^T]Tx{O~.LP,PX]Ke%\"><arg name=\"v\" id=\"44kzxz4owmihy1tawpb3\" type=\"number\"></arg><arg name=\"lo\" id=\"qoqf9ciqb4y3crv8laayo\" type=\"number\"></arg><arg name=\"hi\" id=\"247682caveqe065wi9nef\" type=\"number\"></arg></mutation><value name=\"44kzxz4owmihy1tawpb3\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"T96T~1D)7{lqyiV3WS)h\">leftTarget</field></block></value><value name=\"qoqf9ciqb4y3crv8laayo\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MINUS</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"GA?c$GIud;2mk955iHB)\">MAX_SPEED</field></block></value></block></value><value name=\"247682caveqe065wi9nef\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"GA?c$GIud;2mk955iHB)\">MAX_SPEED</field></block></value></block></value><value name=\"v6ev7wym39hrt3nyabg3\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\",8P~(Pvfh-rvWv,TFs04\">RATE_LIMIT</field></block></value></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"Ximo`t(?un[/3,AIzDrW\">rightTarget</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"function_call_output\"><mutation name=\"rateLimit\" functionid=\"-qd,)4i)W8~vi}R,ICR?\"><arg name=\"prev\" id=\"t3rapsv83ogcq7yl2vv6d\" type=\"number\"></arg><arg name=\"target\" id=\"g3rhmejmcyht7hertyafg\" type=\"number\"></arg><arg name=\"maxDelta\" id=\"v6ev7wym39hrt3nyabg3\" type=\"number\"></arg></mutation><value name=\"t3rapsv83ogcq7yl2vv6d\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"+`RHQ}Hp.j2swMc%S$$k\">prevRight</field></block></value><value name=\"g3rhmejmcyht7hertyafg\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow><block type=\"function_call_output\"><mutation name=\"clamp\" functionid=\"gd^T]Tx{O~.LP,PX]Ke%\"><arg name=\"v\" id=\"44kzxz4owmihy1tawpb3\" type=\"number\"></arg><arg name=\"lo\" id=\"qoqf9ciqb4y3crv8laayo\" type=\"number\"></arg><arg name=\"hi\" id=\"247682caveqe065wi9nef\" type=\"number\"></arg></mutation><value name=\"44kzxz4owmihy1tawpb3\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"Ximo`t(?un[/3,AIzDrW\">rightTarget</field></block></value><value name=\"qoqf9ciqb4y3crv8laayo\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MINUS</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"GA?c$GIud;2mk955iHB)\">MAX_SPEED</field></block></value></block></value><value name=\"247682caveqe065wi9nef\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"GA?c$GIud;2mk955iHB)\">MAX_SPEED</field></block></value></block></value><value name=\"v6ev7wym39hrt3nyabg3\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\",8P~(Pvfh-rvWv,TFs04\">RATE_LIMIT</field></block></value></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"1()+F|!eRLjWE*WL%jGq\">prevLeft</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"T96T~1D)7{lqyiV3WS)h\">leftTarget</field></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"+`RHQ}Hp.j2swMc%S$$k\">prevRight</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"Ximo`t(?un[/3,AIzDrW\">rightTarget</field></block></value><next><block type=\"radio_datagram_send_string\"><value name=\"msg\"><block type=\"text_join\"><mutation items=\"3\"></mutation><value name=\"ADD0\"><shadow type=\"text\"><field name=\"TEXT\"></field></shadow><block type=\"typescript_expression\"><field name=\"EXPRESSION\">leftTarget.toString()</field></block></value><value name=\"ADD1\"><shadow type=\"text\"><field name=\"TEXT\">,</field></shadow></value><value name=\"ADD2\"><shadow type=\"text\"><field name=\"TEXT\"></field></shadow><block type=\"typescript_expression\"><field name=\"EXPRESSION\">rightTarget.toString()</field></block></value></block></value><next><block type=\"device_pause\"><value name=\"pause\"><shadow type=\"timePicker\"><field name=\"ms\">500</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"/tan]#m)^RocHI]84Syt\">LOOP_MS</field></block></value></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></statement></block><block type=\"function_definition\" x=\"1752\" y=\"0\"><mutation name=\"clamp\" functionid=\"gd^T]Tx{O~.LP,PX]Ke%\"><arg name=\"v\" id=\"44kzxz4owmihy1tawpb3\" type=\"number\"></arg><arg name=\"lo\" id=\"qoqf9ciqb4y3crv8laayo\" type=\"number\"></arg><arg name=\"hi\" id=\"247682caveqe065wi9nef\" type=\"number\"></arg></mutation><field name=\"function_name\">clamp</field><value name=\"44kzxz4owmihy1tawpb3\"><block type=\"argument_reporter_number\" deletable=\"false\"><field name=\"VALUE\">v</field></block></value><value name=\"qoqf9ciqb4y3crv8laayo\"><block type=\"argument_reporter_number\" deletable=\"false\"><field name=\"VALUE\">lo</field></block></value><value name=\"247682caveqe065wi9nef\"><block type=\"argument_reporter_number\" deletable=\"false\"><field name=\"VALUE\">hi</field></block></value><statement name=\"STACK\"><block type=\"controls_if\"><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">LT</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"argument_reporter_number\"><field name=\"VALUE\">v</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"argument_reporter_number\"><field name=\"VALUE\">lo</field></block></value></block></value><statement name=\"DO0\"><block type=\"function_return\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" no_return_value=\"false\"></mutation><value name=\"RETURN_VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"argument_reporter_number\"><field name=\"VALUE\">lo</field></block></value></block></statement><next><block type=\"controls_if\"><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">GT</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"argument_reporter_number\"><field name=\"VALUE\">v</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"argument_reporter_number\"><field name=\"VALUE\">hi</field></block></value></block></value><statement name=\"DO0\"><block type=\"function_return\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" no_return_value=\"false\"></mutation><value name=\"RETURN_VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"argument_reporter_number\"><field name=\"VALUE\">hi</field></block></value></block></statement><next><block type=\"function_return\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" no_return_value=\"false\"></mutation><value name=\"RETURN_VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"argument_reporter_number\"><field name=\"VALUE\">v</field></block></value></block></next></block></next></block></statement></block><block type=\"function_definition\" x=\"2152\" y=\"0\"><mutation name=\"rateLimit\" functionid=\"-qd,)4i)W8~vi}R,ICR?\"><arg name=\"prev\" id=\"t3rapsv83ogcq7yl2vv6d\" type=\"number\"></arg><arg name=\"target\" id=\"g3rhmejmcyht7hertyafg\" type=\"number\"></arg><arg name=\"maxDelta\" id=\"v6ev7wym39hrt3nyabg3\" type=\"number\"></arg></mutation><field name=\"function_name\">rateLimit</field><value name=\"t3rapsv83ogcq7yl2vv6d\"><block type=\"argument_reporter_number\" deletable=\"false\"><field name=\"VALUE\">prev</field></block></value><value name=\"g3rhmejmcyht7hertyafg\"><block type=\"argument_reporter_number\" deletable=\"false\"><field name=\"VALUE\">target</field></block></value><value name=\"v6ev7wym39hrt3nyabg3\"><block type=\"argument_reporter_number\" deletable=\"false\"><field name=\"VALUE\">maxDelta</field></block></value><statement name=\"STACK\"><block type=\"variables_set\"><field name=\"VAR\" id=\"4:qPykg5)^72Mhc8kql}\">delta</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MINUS</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"argument_reporter_number\"><field name=\"VALUE\">target</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"argument_reporter_number\"><field name=\"VALUE\">prev</field></block></value></block></value><next><block type=\"controls_if\"><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">GT</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"4:qPykg5)^72Mhc8kql}\">delta</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"argument_reporter_number\"><field name=\"VALUE\">maxDelta</field></block></value></block></value><statement name=\"DO0\"><block type=\"variables_set\"><field name=\"VAR\" id=\"4:qPykg5)^72Mhc8kql}\">delta</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"argument_reporter_number\"><field name=\"VALUE\">maxDelta</field></block></value></block></statement><next><block type=\"controls_if\"><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">LT</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"4:qPykg5)^72Mhc8kql}\">delta</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MINUS</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"argument_reporter_number\"><field name=\"VALUE\">maxDelta</field></block></value></block></value></block></value><statement name=\"DO0\"><block type=\"variables_set\"><field name=\"VAR\" id=\"4:qPykg5)^72Mhc8kql}\">delta</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MINUS</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"argument_reporter_number\"><field name=\"VALUE\">maxDelta</field></block></value></block></value></block></statement><next><block type=\"function_return\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" no_return_value=\"false\"></mutation><value name=\"RETURN_VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">ADD</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"argument_reporter_number\"><field name=\"VALUE\">prev</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"4:qPykg5)^72Mhc8kql}\">delta</field></block></value></block></value></block></next></block></next></block></next></block></statement></block></xml>","main.ts":"","README.md":"","main.py":"","pxt.json":"{\n    \"name\": \"ftir\",\n    \"description\": \"\",\n    \"dependencies\": {\n        \"core\": \"*\",\n        \"radio\": \"*\",\n        \"microphone\": \"*\",\n        \"radio-broadcast\": \"*\",\n        \"pxt-rekabit\": \"github:cytrontechnologies/pxt-rekabit#v1.2.3\"\n    },\n    \"files\": [\n        \"main.blocks\",\n        \"main.ts\",\n        \"README.md\",\n        \"main.py\"\n    ],\n    \"preferredEditor\": \"blocksprj\"\n}\n"}},{"timestamp":1759764170192,"editorVersion":"8.0.16","text":{"main.blocks":"<xml xmlns=\"https://developers.google.com/blockly/xml\"><variables><variable id=\"4:qPykg5)^72Mhc8kql}\">delta</variable><variable id=\"J~]M!m;mE5DW7I!UzXlz\">rawY</variable><variable id=\"A*]H3zIaO1gF@6fz@*1K\">neutralY</variable><variable id=\"9{@^NwNBa!QRe#(_VCi0\">forwardRaw</variable><variable id=\"$eL(:q~u7?6|ZwQrtu?2\">absRaw</variable><variable id=\";s*9nsIt0CB$dpODbVt#\">DEADZONE</variable><variable id=\"}?l`f.LshgyX9Whg-p3_\">mag</variable><variable id=\"r?h3NfTK9%[%vf0PxQE]\">MAX_RAW</variable><variable id=\";k;Ru+Mjb9-AZB`aGz%C\">baseSpeed</variable><variable id=\"GA?c$GIud;2mk955iHB)\">MAX_SPEED</variable><variable id=\"T96T~1D)7{lqyiV3WS)h\">leftTarget</variable><variable id=\"Ximo`t(?un[/3,AIzDrW\">rightTarget</variable><variable id=\"2!XA-pg#%]OGla$n2Q2i\">turnLeft</variable><variable id=\"VH$HYlt55|/|r7N4]|PR\">turnRight</variable><variable id=\"t-|=(RsvZI3K6rwt~+%`\">turnSign</variable><variable id=\"U9@tZIoRj4N:pmG-LdEm\">TURN_MIX</variable><variable id=\"c5|VYf(M9wz[@zQPu5gu\">TURN_POWER</variable><variable id=\"1()+F|!eRLjWE*WL%jGq\">prevLeft</variable><variable id=\",8P~(Pvfh-rvWv,TFs04\">RATE_LIMIT</variable><variable id=\"+`RHQ}Hp.j2swMc%S$$k\">prevRight</variable><variable id=\"/tan]#m)^RocHI]84Syt\">LOOP_MS</variable></variables><block type=\"pxt-on-start\" x=\"0\" y=\"0\"><statement name=\"HANDLER\"><block type=\"radio_set_group\"><value name=\"ID\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"255\" precision=\"0\"></mutation><field name=\"SLIDER\">7</field></shadow></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"/tan]#m)^RocHI]84Syt\">LOOP_MS</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">25</field></shadow></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"r?h3NfTK9%[%vf0PxQE]\">MAX_RAW</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">1000</field></shadow></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"GA?c$GIud;2mk955iHB)\">MAX_SPEED</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">255</field></shadow></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\";s*9nsIt0CB$dpODbVt#\">DEADZONE</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">30</field></shadow></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"c5|VYf(M9wz[@zQPu5gu\">TURN_POWER</field><comment pinned=\"false\" h=\"80\" w=\"160\">max spin power when stationary</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">220</field></shadow></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"U9@tZIoRj4N:pmG-LdEm\">TURN_MIX</field><comment pinned=\"false\" h=\"80\" w=\"160\">gentle turning while moving</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">100</field></shadow></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\",8P~(Pvfh-rvWv,TFs04\">RATE_LIMIT</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">80</field></shadow></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"A*]H3zIaO1gF@6fz@*1K\">neutralY</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"device_acceleration\"><field name=\"NAME\">Dimension.Y</field></block></value></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></statement></block><block type=\"device_forever\" x=\"503\" y=\"0\"><statement name=\"HANDLER\"><block type=\"variables_set\"><field name=\"VAR\" id=\"J~]M!m;mE5DW7I!UzXlz\">rawY</field><comment pinned=\"false\" h=\"80\" w=\"160\">read tilt</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MINUS</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"device_acceleration\"><field name=\"NAME\">Dimension.Y</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"A*]H3zIaO1gF@6fz@*1K\">neutralY</field></block></value></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"9{@^NwNBa!QRe#(_VCi0\">forwardRaw</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MINUS</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"J~]M!m;mE5DW7I!UzXlz\">rawY</field></block></value></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"$eL(:q~u7?6|ZwQrtu?2\">absRaw</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_op3\"><value name=\"x\"><block type=\"variables_get\"><field name=\"VAR\" id=\"9{@^NwNBa!QRe#(_VCi0\">forwardRaw</field></block></value></block></value><next><block type=\"controls_if\"><comment pinned=\"false\" h=\"80\" w=\"160\">convert tilt to speed</comment><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">GT</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"$eL(:q~u7?6|ZwQrtu?2\">absRaw</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\";s*9nsIt0CB$dpODbVt#\">DEADZONE</field></block></value></block></value><statement name=\"DO0\"><block type=\"variables_set\"><field name=\"VAR\" id=\"}?l`f.LshgyX9Whg-p3_\">mag</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">DIVIDE</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MINUS</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"$eL(:q~u7?6|ZwQrtu?2\">absRaw</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\";s*9nsIt0CB$dpODbVt#\">DEADZONE</field></block></value></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MINUS</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"r?h3NfTK9%[%vf0PxQE]\">MAX_RAW</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\";s*9nsIt0CB$dpODbVt#\">DEADZONE</field></block></value></block></value></block></value><next><block type=\"controls_if\"><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">GT</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"}?l`f.LshgyX9Whg-p3_\">mag</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></value><statement name=\"DO0\"><block type=\"variables_set\"><field name=\"VAR\" id=\"}?l`f.LshgyX9Whg-p3_\">mag</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></statement><next><block type=\"variables_set\"><field name=\"VAR\" id=\";k;Ru+Mjb9-AZB`aGz%C\">baseSpeed</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_js_round\"><field name=\"OP\">trunc</field><value name=\"ARG0\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MULTIPLY</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"}?l`f.LshgyX9Whg-p3_\">mag</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"GA?c$GIud;2mk955iHB)\">MAX_SPEED</field></block></value></block></value></block></value><next><block type=\"controls_if\"><comment pinned=\"false\" h=\"80\" w=\"160\">backward tilt</comment><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">GT</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"9{@^NwNBa!QRe#(_VCi0\">forwardRaw</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value></block></value><statement name=\"DO0\"><block type=\"variables_set\"><field name=\"VAR\" id=\";k;Ru+Mjb9-AZB`aGz%C\">baseSpeed</field><data>{\"commentRefs\":[],\"fieldData\":{}}</data><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MINUS</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\";k;Ru+Mjb9-AZB`aGz%C\">baseSpeed</field></block></value></block></value></block></statement></block></next></block></next></block></next></block></statement><next><block type=\"variables_set\"><field name=\"VAR\" id=\"T96T~1D)7{lqyiV3WS)h\">leftTarget</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\";k;Ru+Mjb9-AZB`aGz%C\">baseSpeed</field></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"Ximo`t(?un[/3,AIzDrW\">rightTarget</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\";k;Ru+Mjb9-AZB`aGz%C\">baseSpeed</field></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"2!XA-pg#%]OGla$n2Q2i\">turnLeft</field><comment pinned=\"false\" h=\"80\" w=\"160\">steering logic</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"device_get_button2\"><field name=\"NAME\">Button.A</field></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"VH$HYlt55|/|r7N4]|PR\">turnRight</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"device_get_button2\"><field name=\"NAME\">Button.B</field></block></value><next><block type=\"controls_if\"><mutation elseif=\"1\" else=\"1\"></mutation><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_operation\"><field name=\"OP\">AND</field><value name=\"A\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"2!XA-pg#%]OGla$n2Q2i\">turnLeft</field></block></value><value name=\"B\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"VH$HYlt55|/|r7N4]|PR\">turnRight</field></block></value></block></value><statement name=\"DO0\"><block type=\"variables_set\"><field name=\"VAR\" id=\"T96T~1D)7{lqyiV3WS)h\">leftTarget</field><comment pinned=\"false\" h=\"80\" w=\"160\">stop if both pressed</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"Ximo`t(?un[/3,AIzDrW\">rightTarget</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><next><block type=\"basic_show_icon\"><field name=\"i\">IconNames.No</field></block></next></block></next></block></statement><value name=\"IF1\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_operation\"><field name=\"OP\">OR</field><value name=\"A\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"2!XA-pg#%]OGla$n2Q2i\">turnLeft</field></block></value><value name=\"B\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"VH$HYlt55|/|r7N4]|PR\">turnRight</field></block></value></block></value><statement name=\"DO1\"><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"let turnSign = turnRight ? 1 : -1\" numlines=\"1\" declaredvars=\"turnSign\"></mutation><next><block type=\"controls_if\"><mutation else=\"1\"></mutation><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">NEQ</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\";k;Ru+Mjb9-AZB`aGz%C\">baseSpeed</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value></block></value><statement name=\"DO0\"><block type=\"variables_set\"><field name=\"VAR\" id=\"T96T~1D)7{lqyiV3WS)h\">leftTarget</field><comment pinned=\"false\" h=\"80\" w=\"160\">turning while moving  gentle mix</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"function_call_output\"><mutation name=\"clamp\" functionid=\"gd^T]Tx{O~.LP,PX]Ke%\"><arg name=\"v\" id=\"44kzxz4owmihy1tawpb3\" type=\"number\"></arg><arg name=\"lo\" id=\"qoqf9ciqb4y3crv8laayo\" type=\"number\"></arg><arg name=\"hi\" id=\"247682caveqe065wi9nef\" type=\"number\"></arg></mutation><value name=\"44kzxz4owmihy1tawpb3\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MINUS</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\";k;Ru+Mjb9-AZB`aGz%C\">baseSpeed</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MULTIPLY</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"t-|=(RsvZI3K6rwt~+%`\">turnSign</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"U9@tZIoRj4N:pmG-LdEm\">TURN_MIX</field></block></value></block></value></block></value><value name=\"qoqf9ciqb4y3crv8laayo\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MINUS</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"GA?c$GIud;2mk955iHB)\">MAX_SPEED</field></block></value></block></value><value name=\"247682caveqe065wi9nef\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"GA?c$GIud;2mk955iHB)\">MAX_SPEED</field></block></value></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"Ximo`t(?un[/3,AIzDrW\">rightTarget</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"function_call_output\"><mutation name=\"clamp\" functionid=\"gd^T]Tx{O~.LP,PX]Ke%\"><arg name=\"v\" id=\"44kzxz4owmihy1tawpb3\" type=\"number\"></arg><arg name=\"lo\" id=\"qoqf9ciqb4y3crv8laayo\" type=\"number\"></arg><arg name=\"hi\" id=\"247682caveqe065wi9nef\" type=\"number\"></arg></mutation><value name=\"44kzxz4owmihy1tawpb3\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">ADD</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\";k;Ru+Mjb9-AZB`aGz%C\">baseSpeed</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MULTIPLY</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"t-|=(RsvZI3K6rwt~+%`\">turnSign</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"U9@tZIoRj4N:pmG-LdEm\">TURN_MIX</field></block></value></block></value></block></value><value name=\"qoqf9ciqb4y3crv8laayo\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MINUS</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"GA?c$GIud;2mk955iHB)\">MAX_SPEED</field></block></value></block></value><value name=\"247682caveqe065wi9nef\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"GA?c$GIud;2mk955iHB)\">MAX_SPEED</field></block></value></block></value></block></next></block></statement><statement name=\"ELSE\"><block type=\"variables_set\"><field name=\"VAR\" id=\"T96T~1D)7{lqyiV3WS)h\">leftTarget</field><comment pinned=\"false\" h=\"80\" w=\"160\">spin in place when stationary</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MULTIPLY</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MINUS</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"t-|=(RsvZI3K6rwt~+%`\">turnSign</field></block></value></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"c5|VYf(M9wz[@zQPu5gu\">TURN_POWER</field></block></value></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"Ximo`t(?un[/3,AIzDrW\">rightTarget</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MULTIPLY</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"t-|=(RsvZI3K6rwt~+%`\">turnSign</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"c5|VYf(M9wz[@zQPu5gu\">TURN_POWER</field></block></value></block></value></block></next></block></statement><next><block type=\"controls_if\"><mutation else=\"1\"></mutation><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">GT</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"t-|=(RsvZI3K6rwt~+%`\">turnSign</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value></block></value><statement name=\"DO0\"><block type=\"basic_show_arrow\"><value name=\"i\"><shadow type=\"device_arrow\"><field name=\"arrow\">ArrowNames.East</field></shadow></value></block></statement><statement name=\"ELSE\"><block type=\"basic_show_arrow\"><value name=\"i\"><shadow type=\"device_arrow\"><field name=\"arrow\">ArrowNames.West</field></shadow></value></block></statement></block></next></block></next></block></statement><statement name=\"ELSE\"><block type=\"controls_if\"><mutation elseif=\"1\" else=\"1\"></mutation><comment pinned=\"false\" h=\"80\" w=\"160\">show direction of motion</comment><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">GT</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\";k;Ru+Mjb9-AZB`aGz%C\">baseSpeed</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">30</field></shadow></value></block></value><statement name=\"DO0\"><block type=\"basic_show_arrow\"><value name=\"i\"><shadow type=\"device_arrow\"><field name=\"arrow\">ArrowNames.North</field></shadow></value></block></statement><value name=\"IF1\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">LT</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\";k;Ru+Mjb9-AZB`aGz%C\">baseSpeed</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">-30</field></shadow></value></block></value><statement name=\"DO1\"><block type=\"basic_show_arrow\"><value name=\"i\"><shadow type=\"device_arrow\"><field name=\"arrow\">ArrowNames.South</field></shadow></value></block></statement><statement name=\"ELSE\"><block type=\"device_clear_display\"></block></statement></block></statement><next><block type=\"variables_set\"><field name=\"VAR\" id=\"T96T~1D)7{lqyiV3WS)h\">leftTarget</field><comment pinned=\"false\" h=\"80\" w=\"160\">clamp &amp; smooth</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"function_call_output\"><mutation name=\"rateLimit\" functionid=\"-qd,)4i)W8~vi}R,ICR?\"><arg name=\"prev\" id=\"t3rapsv83ogcq7yl2vv6d\" type=\"number\"></arg><arg name=\"target\" id=\"g3rhmejmcyht7hertyafg\" type=\"number\"></arg><arg name=\"maxDelta\" id=\"v6ev7wym39hrt3nyabg3\" type=\"number\"></arg></mutation><value name=\"t3rapsv83ogcq7yl2vv6d\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"1()+F|!eRLjWE*WL%jGq\">prevLeft</field></block></value><value name=\"g3rhmejmcyht7hertyafg\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow><block type=\"function_call_output\"><mutation name=\"clamp\" functionid=\"gd^T]Tx{O~.LP,PX]Ke%\"><arg name=\"v\" id=\"44kzxz4owmihy1tawpb3\" type=\"number\"></arg><arg name=\"lo\" id=\"qoqf9ciqb4y3crv8laayo\" type=\"number\"></arg><arg name=\"hi\" id=\"247682caveqe065wi9nef\" type=\"number\"></arg></mutation><value name=\"44kzxz4owmihy1tawpb3\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"T96T~1D)7{lqyiV3WS)h\">leftTarget</field></block></value><value name=\"qoqf9ciqb4y3crv8laayo\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MINUS</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"GA?c$GIud;2mk955iHB)\">MAX_SPEED</field></block></value></block></value><value name=\"247682caveqe065wi9nef\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"GA?c$GIud;2mk955iHB)\">MAX_SPEED</field></block></value></block></value><value name=\"v6ev7wym39hrt3nyabg3\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\",8P~(Pvfh-rvWv,TFs04\">RATE_LIMIT</field></block></value></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"Ximo`t(?un[/3,AIzDrW\">rightTarget</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"function_call_output\"><mutation name=\"rateLimit\" functionid=\"-qd,)4i)W8~vi}R,ICR?\"><arg name=\"prev\" id=\"t3rapsv83ogcq7yl2vv6d\" type=\"number\"></arg><arg name=\"target\" id=\"g3rhmejmcyht7hertyafg\" type=\"number\"></arg><arg name=\"maxDelta\" id=\"v6ev7wym39hrt3nyabg3\" type=\"number\"></arg></mutation><value name=\"t3rapsv83ogcq7yl2vv6d\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"+`RHQ}Hp.j2swMc%S$$k\">prevRight</field></block></value><value name=\"g3rhmejmcyht7hertyafg\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow><block type=\"function_call_output\"><mutation name=\"clamp\" functionid=\"gd^T]Tx{O~.LP,PX]Ke%\"><arg name=\"v\" id=\"44kzxz4owmihy1tawpb3\" type=\"number\"></arg><arg name=\"lo\" id=\"qoqf9ciqb4y3crv8laayo\" type=\"number\"></arg><arg name=\"hi\" id=\"247682caveqe065wi9nef\" type=\"number\"></arg></mutation><value name=\"44kzxz4owmihy1tawpb3\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"Ximo`t(?un[/3,AIzDrW\">rightTarget</field></block></value><value name=\"qoqf9ciqb4y3crv8laayo\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MINUS</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"GA?c$GIud;2mk955iHB)\">MAX_SPEED</field></block></value></block></value><value name=\"247682caveqe065wi9nef\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"GA?c$GIud;2mk955iHB)\">MAX_SPEED</field></block></value></block></value><value name=\"v6ev7wym39hrt3nyabg3\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\",8P~(Pvfh-rvWv,TFs04\">RATE_LIMIT</field></block></value></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"1()+F|!eRLjWE*WL%jGq\">prevLeft</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"T96T~1D)7{lqyiV3WS)h\">leftTarget</field></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"+`RHQ}Hp.j2swMc%S$$k\">prevRight</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"Ximo`t(?un[/3,AIzDrW\">rightTarget</field></block></value><next><block type=\"radio_datagram_send_string\"><value name=\"msg\"><block type=\"text_join\"><mutation items=\"3\"></mutation><value name=\"ADD0\"><shadow type=\"text\"><field name=\"TEXT\"></field></shadow><block type=\"typescript_expression\"><field name=\"EXPRESSION\">leftTarget.toString()</field></block></value><value name=\"ADD1\"><shadow type=\"text\"><field name=\"TEXT\">,</field></shadow></value><value name=\"ADD2\"><shadow type=\"text\"><field name=\"TEXT\"></field></shadow><block type=\"typescript_expression\"><field name=\"EXPRESSION\">rightTarget.toString()</field></block></value></block></value><next><block type=\"device_pause\"><value name=\"pause\"><shadow type=\"timePicker\"><field name=\"ms\">500</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"/tan]#m)^RocHI]84Syt\">LOOP_MS</field></block></value></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></statement></block><block type=\"function_definition\" x=\"1752\" y=\"0\"><mutation name=\"clamp\" functionid=\"gd^T]Tx{O~.LP,PX]Ke%\"><arg name=\"v\" id=\"44kzxz4owmihy1tawpb3\" type=\"number\"></arg><arg name=\"lo\" id=\"qoqf9ciqb4y3crv8laayo\" type=\"number\"></arg><arg name=\"hi\" id=\"247682caveqe065wi9nef\" type=\"number\"></arg></mutation><field name=\"function_name\">clamp</field><value name=\"44kzxz4owmihy1tawpb3\"><block type=\"argument_reporter_number\" deletable=\"false\"><field name=\"VALUE\">v</field></block></value><value name=\"qoqf9ciqb4y3crv8laayo\"><block type=\"argument_reporter_number\" deletable=\"false\"><field name=\"VALUE\">lo</field></block></value><value name=\"247682caveqe065wi9nef\"><block type=\"argument_reporter_number\" deletable=\"false\"><field name=\"VALUE\">hi</field></block></value><statement name=\"STACK\"><block type=\"controls_if\"><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">LT</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"argument_reporter_number\"><field name=\"VALUE\">v</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"argument_reporter_number\"><field name=\"VALUE\">lo</field></block></value></block></value><statement name=\"DO0\"><block type=\"function_return\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" no_return_value=\"false\"></mutation><value name=\"RETURN_VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"argument_reporter_number\"><field name=\"VALUE\">lo</field></block></value></block></statement><next><block type=\"controls_if\"><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">GT</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"argument_reporter_number\"><field name=\"VALUE\">v</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"argument_reporter_number\"><field name=\"VALUE\">hi</field></block></value></block></value><statement name=\"DO0\"><block type=\"function_return\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" no_return_value=\"false\"></mutation><value name=\"RETURN_VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"argument_reporter_number\"><field name=\"VALUE\">hi</field></block></value></block></statement><next><block type=\"function_return\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" no_return_value=\"false\"></mutation><value name=\"RETURN_VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"argument_reporter_number\"><field name=\"VALUE\">v</field></block></value></block></next></block></next></block></statement></block><block type=\"function_definition\" x=\"2152\" y=\"0\"><mutation name=\"rateLimit\" functionid=\"-qd,)4i)W8~vi}R,ICR?\"><arg name=\"prev\" id=\"t3rapsv83ogcq7yl2vv6d\" type=\"number\"></arg><arg name=\"target\" id=\"g3rhmejmcyht7hertyafg\" type=\"number\"></arg><arg name=\"maxDelta\" id=\"v6ev7wym39hrt3nyabg3\" type=\"number\"></arg></mutation><field name=\"function_name\">rateLimit</field><value name=\"t3rapsv83ogcq7yl2vv6d\"><block type=\"argument_reporter_number\" deletable=\"false\"><field name=\"VALUE\">prev</field></block></value><value name=\"g3rhmejmcyht7hertyafg\"><block type=\"argument_reporter_number\" deletable=\"false\"><field name=\"VALUE\">target</field></block></value><value name=\"v6ev7wym39hrt3nyabg3\"><block type=\"argument_reporter_number\" deletable=\"false\"><field name=\"VALUE\">maxDelta</field></block></value><statement name=\"STACK\"><block type=\"variables_set\"><field name=\"VAR\" id=\"4:qPykg5)^72Mhc8kql}\">delta</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MINUS</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"argument_reporter_number\"><field name=\"VALUE\">target</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"argument_reporter_number\"><field name=\"VALUE\">prev</field></block></value></block></value><next><block type=\"controls_if\"><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">GT</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"4:qPykg5)^72Mhc8kql}\">delta</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"argument_reporter_number\"><field name=\"VALUE\">maxDelta</field></block></value></block></value><statement name=\"DO0\"><block type=\"variables_set\"><field name=\"VAR\" id=\"4:qPykg5)^72Mhc8kql}\">delta</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"argument_reporter_number\"><field name=\"VALUE\">maxDelta</field></block></value></block></statement><next><block type=\"controls_if\"><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">LT</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"4:qPykg5)^72Mhc8kql}\">delta</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MINUS</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"argument_reporter_number\"><field name=\"VALUE\">maxDelta</field></block></value></block></value></block></value><statement name=\"DO0\"><block type=\"variables_set\"><field name=\"VAR\" id=\"4:qPykg5)^72Mhc8kql}\">delta</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MINUS</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"argument_reporter_number\"><field name=\"VALUE\">maxDelta</field></block></value></block></value></block></statement><next><block type=\"function_return\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" no_return_value=\"false\"></mutation><value name=\"RETURN_VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">ADD</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"argument_reporter_number\"><field name=\"VALUE\">prev</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"4:qPykg5)^72Mhc8kql}\">delta</field></block></value></block></value></block></next></block></next></block></next></block></statement></block></xml>","main.ts":"enum RadioMessage {\n    Brake = 0,\n    Forward = 1,\n    Backward = 2,\n    Left = 3,\n    Right = 4,\n    ForwardLeft = 5,\n    ForwardRight = 6,\n    BackwardLeft = 7,\n    BackwardRight = 8\n}\n\nradio.setGroup(7)\n\nlet MAX_RAW = 1200\nlet DEADZONE = 150\nlet FORWARD_TILT = 200\nlet UPDATE_INTERVAL = 50\n\nbasic.forever(function () {\n    let y = input.acceleration(Dimension.Y)\n    let forward = -y\n    let absY = Math.abs(forward)\n\n    if (absY < DEADZONE) {\n        // Not tilted\n        if (input.buttonIsPressed(Button.A) && input.buttonIsPressed(Button.B)) {\n            radio.sendMessage(RadioMessage.Brake)\n        } else if (input.buttonIsPressed(Button.A)) {\n            radio.sendMessage(RadioMessage.Left) // rotate left in place\n        } else if (input.buttonIsPressed(Button.B)) {\n            radio.sendMessage(RadioMessage.Right) // rotate right in place\n        } else {\n            radio.sendMessage(RadioMessage.Brake)\n        }\n    } else {\n        // Tilted forward/backward\n        if (forward > FORWARD_TILT) {\n            // Forward\n            if (input.buttonIsPressed(Button.A) && input.buttonIsPressed(Button.B)) {\n                radio.sendMessage(RadioMessage.Brake)\n            } else if (input.buttonIsPressed(Button.A)) {\n                radio.sendMessage(RadioMessage.ForwardLeft)\n            } else if (input.buttonIsPressed(Button.B)) {\n                radio.sendMessage(RadioMessage.ForwardRight)\n            } else {\n                radio.sendMessage(RadioMessage.Forward)\n            }\n        } else {\n            // Backward\n            if (input.buttonIsPressed(Button.A) && input.buttonIsPressed(Button.B)) {\n                radio.sendMessage(RadioMessage.Brake)\n            } else if (input.buttonIsPressed(Button.A)) {\n                radio.sendMessage(RadioMessage.BackwardLeft)\n            } else if (input.buttonIsPressed(Button.B)) {\n                radio.sendMessage(RadioMessage.BackwardRight)\n            } else {\n                radio.sendMessage(RadioMessage.Backward)\n            }\n        }\n    }\n\n    basic.pause(UPDATE_INTERVAL)\n})\n","README.md":"","main.py":"","pxt.json":"{\n    \"name\": \"ftir\",\n    \"description\": \"\",\n    \"dependencies\": {\n        \"core\": \"*\",\n        \"radio\": \"*\",\n        \"microphone\": \"*\",\n        \"radio-broadcast\": \"*\",\n        \"pxt-rekabit\": \"github:cytrontechnologies/pxt-rekabit#v1.2.3\"\n    },\n    \"files\": [\n        \"main.blocks\",\n        \"main.ts\",\n        \"README.md\",\n        \"main.py\"\n    ],\n    \"preferredEditor\": \"tsprj\"\n}\n"}},{"timestamp":1759766866286,"editorVersion":"8.0.16","text":{"main.blocks":"<xml xmlns=\"https://developers.google.com/blockly/xml\"><variables><variable id=\"4:qPykg5)^72Mhc8kql}\">delta</variable><variable id=\"J~]M!m;mE5DW7I!UzXlz\">rawY</variable><variable id=\"A*]H3zIaO1gF@6fz@*1K\">neutralY</variable><variable id=\"9{@^NwNBa!QRe#(_VCi0\">forwardRaw</variable><variable id=\"$eL(:q~u7?6|ZwQrtu?2\">absRaw</variable><variable id=\";s*9nsIt0CB$dpODbVt#\">DEADZONE</variable><variable id=\"}?l`f.LshgyX9Whg-p3_\">mag</variable><variable id=\"r?h3NfTK9%[%vf0PxQE]\">MAX_RAW</variable><variable id=\";k;Ru+Mjb9-AZB`aGz%C\">baseSpeed</variable><variable id=\"GA?c$GIud;2mk955iHB)\">MAX_SPEED</variable><variable id=\"T96T~1D)7{lqyiV3WS)h\">leftTarget</variable><variable id=\"Ximo`t(?un[/3,AIzDrW\">rightTarget</variable><variable id=\"2!XA-pg#%]OGla$n2Q2i\">turnLeft</variable><variable id=\"VH$HYlt55|/|r7N4]|PR\">turnRight</variable><variable id=\"t-|=(RsvZI3K6rwt~+%`\">turnSign</variable><variable id=\"U9@tZIoRj4N:pmG-LdEm\">TURN_MIX</variable><variable id=\"c5|VYf(M9wz[@zQPu5gu\">TURN_POWER</variable><variable id=\"1()+F|!eRLjWE*WL%jGq\">prevLeft</variable><variable id=\",8P~(Pvfh-rvWv,TFs04\">RATE_LIMIT</variable><variable id=\"+`RHQ}Hp.j2swMc%S$$k\">prevRight</variable><variable id=\"/tan]#m)^RocHI]84Syt\">LOOP_MS</variable></variables><block type=\"pxt-on-start\" x=\"0\" y=\"0\"><statement name=\"HANDLER\"><block type=\"radio_set_group\"><value name=\"ID\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"255\" precision=\"0\"></mutation><field name=\"SLIDER\">7</field></shadow></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"/tan]#m)^RocHI]84Syt\">LOOP_MS</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">25</field></shadow></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"r?h3NfTK9%[%vf0PxQE]\">MAX_RAW</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">1000</field></shadow></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"GA?c$GIud;2mk955iHB)\">MAX_SPEED</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">255</field></shadow></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\";s*9nsIt0CB$dpODbVt#\">DEADZONE</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">30</field></shadow></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"c5|VYf(M9wz[@zQPu5gu\">TURN_POWER</field><comment pinned=\"false\" h=\"80\" w=\"160\">max spin power when stationary</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">220</field></shadow></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"U9@tZIoRj4N:pmG-LdEm\">TURN_MIX</field><comment pinned=\"false\" h=\"80\" w=\"160\">gentle turning while moving</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">100</field></shadow></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\",8P~(Pvfh-rvWv,TFs04\">RATE_LIMIT</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">80</field></shadow></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"A*]H3zIaO1gF@6fz@*1K\">neutralY</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"device_acceleration\"><field name=\"NAME\">Dimension.Y</field></block></value></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></statement></block><block type=\"device_forever\" x=\"503\" y=\"0\"><statement name=\"HANDLER\"><block type=\"variables_set\"><field name=\"VAR\" id=\"J~]M!m;mE5DW7I!UzXlz\">rawY</field><comment pinned=\"false\" h=\"80\" w=\"160\">read tilt</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MINUS</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"device_acceleration\"><field name=\"NAME\">Dimension.Y</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"A*]H3zIaO1gF@6fz@*1K\">neutralY</field></block></value></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"9{@^NwNBa!QRe#(_VCi0\">forwardRaw</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MINUS</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"J~]M!m;mE5DW7I!UzXlz\">rawY</field></block></value></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"$eL(:q~u7?6|ZwQrtu?2\">absRaw</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_op3\"><value name=\"x\"><block type=\"variables_get\"><field name=\"VAR\" id=\"9{@^NwNBa!QRe#(_VCi0\">forwardRaw</field></block></value></block></value><next><block type=\"controls_if\"><comment pinned=\"false\" h=\"80\" w=\"160\">convert tilt to speed</comment><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">GT</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"$eL(:q~u7?6|ZwQrtu?2\">absRaw</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\";s*9nsIt0CB$dpODbVt#\">DEADZONE</field></block></value></block></value><statement name=\"DO0\"><block type=\"variables_set\"><field name=\"VAR\" id=\"}?l`f.LshgyX9Whg-p3_\">mag</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">DIVIDE</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MINUS</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"$eL(:q~u7?6|ZwQrtu?2\">absRaw</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\";s*9nsIt0CB$dpODbVt#\">DEADZONE</field></block></value></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MINUS</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"r?h3NfTK9%[%vf0PxQE]\">MAX_RAW</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\";s*9nsIt0CB$dpODbVt#\">DEADZONE</field></block></value></block></value></block></value><next><block type=\"controls_if\"><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">GT</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"}?l`f.LshgyX9Whg-p3_\">mag</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></value><statement name=\"DO0\"><block type=\"variables_set\"><field name=\"VAR\" id=\"}?l`f.LshgyX9Whg-p3_\">mag</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></statement><next><block type=\"variables_set\"><field name=\"VAR\" id=\";k;Ru+Mjb9-AZB`aGz%C\">baseSpeed</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_js_round\"><field name=\"OP\">trunc</field><value name=\"ARG0\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MULTIPLY</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"}?l`f.LshgyX9Whg-p3_\">mag</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"GA?c$GIud;2mk955iHB)\">MAX_SPEED</field></block></value></block></value></block></value><next><block type=\"controls_if\"><comment pinned=\"false\" h=\"80\" w=\"160\">backward tilt</comment><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">GT</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"9{@^NwNBa!QRe#(_VCi0\">forwardRaw</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value></block></value><statement name=\"DO0\"><block type=\"variables_set\"><field name=\"VAR\" id=\";k;Ru+Mjb9-AZB`aGz%C\">baseSpeed</field><data>{\"commentRefs\":[],\"fieldData\":{}}</data><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MINUS</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\";k;Ru+Mjb9-AZB`aGz%C\">baseSpeed</field></block></value></block></value></block></statement></block></next></block></next></block></next></block></statement><next><block type=\"variables_set\"><field name=\"VAR\" id=\"T96T~1D)7{lqyiV3WS)h\">leftTarget</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\";k;Ru+Mjb9-AZB`aGz%C\">baseSpeed</field></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"Ximo`t(?un[/3,AIzDrW\">rightTarget</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\";k;Ru+Mjb9-AZB`aGz%C\">baseSpeed</field></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"2!XA-pg#%]OGla$n2Q2i\">turnLeft</field><comment pinned=\"false\" h=\"80\" w=\"160\">steering logic</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"device_get_button2\"><field name=\"NAME\">Button.A</field></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"VH$HYlt55|/|r7N4]|PR\">turnRight</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"device_get_button2\"><field name=\"NAME\">Button.B</field></block></value><next><block type=\"controls_if\"><mutation elseif=\"1\" else=\"1\"></mutation><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_operation\"><field name=\"OP\">AND</field><value name=\"A\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"2!XA-pg#%]OGla$n2Q2i\">turnLeft</field></block></value><value name=\"B\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"VH$HYlt55|/|r7N4]|PR\">turnRight</field></block></value></block></value><statement name=\"DO0\"><block type=\"variables_set\"><field name=\"VAR\" id=\"T96T~1D)7{lqyiV3WS)h\">leftTarget</field><comment pinned=\"false\" h=\"80\" w=\"160\">stop if both pressed</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"Ximo`t(?un[/3,AIzDrW\">rightTarget</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><next><block type=\"basic_show_icon\"><field name=\"i\">IconNames.No</field></block></next></block></next></block></statement><value name=\"IF1\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_operation\"><field name=\"OP\">OR</field><value name=\"A\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"2!XA-pg#%]OGla$n2Q2i\">turnLeft</field></block></value><value name=\"B\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"VH$HYlt55|/|r7N4]|PR\">turnRight</field></block></value></block></value><statement name=\"DO1\"><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"let turnSign = turnRight ? 1 : -1\" numlines=\"1\" declaredvars=\"turnSign\"></mutation><next><block type=\"controls_if\"><mutation else=\"1\"></mutation><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">NEQ</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\";k;Ru+Mjb9-AZB`aGz%C\">baseSpeed</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value></block></value><statement name=\"DO0\"><block type=\"variables_set\"><field name=\"VAR\" id=\"T96T~1D)7{lqyiV3WS)h\">leftTarget</field><comment pinned=\"false\" h=\"80\" w=\"160\">turning while moving  gentle mix</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"function_call_output\"><mutation name=\"clamp\" functionid=\"gd^T]Tx{O~.LP,PX]Ke%\"><arg name=\"v\" id=\"44kzxz4owmihy1tawpb3\" type=\"number\"></arg><arg name=\"lo\" id=\"qoqf9ciqb4y3crv8laayo\" type=\"number\"></arg><arg name=\"hi\" id=\"247682caveqe065wi9nef\" type=\"number\"></arg></mutation><value name=\"44kzxz4owmihy1tawpb3\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MINUS</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\";k;Ru+Mjb9-AZB`aGz%C\">baseSpeed</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MULTIPLY</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"t-|=(RsvZI3K6rwt~+%`\">turnSign</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"U9@tZIoRj4N:pmG-LdEm\">TURN_MIX</field></block></value></block></value></block></value><value name=\"qoqf9ciqb4y3crv8laayo\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MINUS</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"GA?c$GIud;2mk955iHB)\">MAX_SPEED</field></block></value></block></value><value name=\"247682caveqe065wi9nef\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"GA?c$GIud;2mk955iHB)\">MAX_SPEED</field></block></value></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"Ximo`t(?un[/3,AIzDrW\">rightTarget</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"function_call_output\"><mutation name=\"clamp\" functionid=\"gd^T]Tx{O~.LP,PX]Ke%\"><arg name=\"v\" id=\"44kzxz4owmihy1tawpb3\" type=\"number\"></arg><arg name=\"lo\" id=\"qoqf9ciqb4y3crv8laayo\" type=\"number\"></arg><arg name=\"hi\" id=\"247682caveqe065wi9nef\" type=\"number\"></arg></mutation><value name=\"44kzxz4owmihy1tawpb3\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">ADD</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\";k;Ru+Mjb9-AZB`aGz%C\">baseSpeed</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MULTIPLY</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"t-|=(RsvZI3K6rwt~+%`\">turnSign</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"U9@tZIoRj4N:pmG-LdEm\">TURN_MIX</field></block></value></block></value></block></value><value name=\"qoqf9ciqb4y3crv8laayo\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MINUS</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"GA?c$GIud;2mk955iHB)\">MAX_SPEED</field></block></value></block></value><value name=\"247682caveqe065wi9nef\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"GA?c$GIud;2mk955iHB)\">MAX_SPEED</field></block></value></block></value></block></next></block></statement><statement name=\"ELSE\"><block type=\"variables_set\"><field name=\"VAR\" id=\"T96T~1D)7{lqyiV3WS)h\">leftTarget</field><comment pinned=\"false\" h=\"80\" w=\"160\">spin in place when stationary</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MULTIPLY</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MINUS</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"t-|=(RsvZI3K6rwt~+%`\">turnSign</field></block></value></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"c5|VYf(M9wz[@zQPu5gu\">TURN_POWER</field></block></value></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"Ximo`t(?un[/3,AIzDrW\">rightTarget</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MULTIPLY</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"t-|=(RsvZI3K6rwt~+%`\">turnSign</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"c5|VYf(M9wz[@zQPu5gu\">TURN_POWER</field></block></value></block></value></block></next></block></statement><next><block type=\"controls_if\"><mutation else=\"1\"></mutation><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">GT</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"t-|=(RsvZI3K6rwt~+%`\">turnSign</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value></block></value><statement name=\"DO0\"><block type=\"basic_show_arrow\"><value name=\"i\"><shadow type=\"device_arrow\"><field name=\"arrow\">ArrowNames.East</field></shadow></value></block></statement><statement name=\"ELSE\"><block type=\"basic_show_arrow\"><value name=\"i\"><shadow type=\"device_arrow\"><field name=\"arrow\">ArrowNames.West</field></shadow></value></block></statement></block></next></block></next></block></statement><statement name=\"ELSE\"><block type=\"controls_if\"><mutation elseif=\"1\" else=\"1\"></mutation><comment pinned=\"false\" h=\"80\" w=\"160\">show direction of motion</comment><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">GT</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\";k;Ru+Mjb9-AZB`aGz%C\">baseSpeed</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">30</field></shadow></value></block></value><statement name=\"DO0\"><block type=\"basic_show_arrow\"><value name=\"i\"><shadow type=\"device_arrow\"><field name=\"arrow\">ArrowNames.North</field></shadow></value></block></statement><value name=\"IF1\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">LT</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\";k;Ru+Mjb9-AZB`aGz%C\">baseSpeed</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">-30</field></shadow></value></block></value><statement name=\"DO1\"><block type=\"basic_show_arrow\"><value name=\"i\"><shadow type=\"device_arrow\"><field name=\"arrow\">ArrowNames.South</field></shadow></value></block></statement><statement name=\"ELSE\"><block type=\"device_clear_display\"></block></statement></block></statement><next><block type=\"variables_set\"><field name=\"VAR\" id=\"T96T~1D)7{lqyiV3WS)h\">leftTarget</field><comment pinned=\"false\" h=\"80\" w=\"160\">clamp &amp; smooth</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"function_call_output\"><mutation name=\"rateLimit\" functionid=\"-qd,)4i)W8~vi}R,ICR?\"><arg name=\"prev\" id=\"t3rapsv83ogcq7yl2vv6d\" type=\"number\"></arg><arg name=\"target\" id=\"g3rhmejmcyht7hertyafg\" type=\"number\"></arg><arg name=\"maxDelta\" id=\"v6ev7wym39hrt3nyabg3\" type=\"number\"></arg></mutation><value name=\"t3rapsv83ogcq7yl2vv6d\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"1()+F|!eRLjWE*WL%jGq\">prevLeft</field></block></value><value name=\"g3rhmejmcyht7hertyafg\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow><block type=\"function_call_output\"><mutation name=\"clamp\" functionid=\"gd^T]Tx{O~.LP,PX]Ke%\"><arg name=\"v\" id=\"44kzxz4owmihy1tawpb3\" type=\"number\"></arg><arg name=\"lo\" id=\"qoqf9ciqb4y3crv8laayo\" type=\"number\"></arg><arg name=\"hi\" id=\"247682caveqe065wi9nef\" type=\"number\"></arg></mutation><value name=\"44kzxz4owmihy1tawpb3\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"T96T~1D)7{lqyiV3WS)h\">leftTarget</field></block></value><value name=\"qoqf9ciqb4y3crv8laayo\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MINUS</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"GA?c$GIud;2mk955iHB)\">MAX_SPEED</field></block></value></block></value><value name=\"247682caveqe065wi9nef\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"GA?c$GIud;2mk955iHB)\">MAX_SPEED</field></block></value></block></value><value name=\"v6ev7wym39hrt3nyabg3\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\",8P~(Pvfh-rvWv,TFs04\">RATE_LIMIT</field></block></value></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"Ximo`t(?un[/3,AIzDrW\">rightTarget</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"function_call_output\"><mutation name=\"rateLimit\" functionid=\"-qd,)4i)W8~vi}R,ICR?\"><arg name=\"prev\" id=\"t3rapsv83ogcq7yl2vv6d\" type=\"number\"></arg><arg name=\"target\" id=\"g3rhmejmcyht7hertyafg\" type=\"number\"></arg><arg name=\"maxDelta\" id=\"v6ev7wym39hrt3nyabg3\" type=\"number\"></arg></mutation><value name=\"t3rapsv83ogcq7yl2vv6d\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"+`RHQ}Hp.j2swMc%S$$k\">prevRight</field></block></value><value name=\"g3rhmejmcyht7hertyafg\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow><block type=\"function_call_output\"><mutation name=\"clamp\" functionid=\"gd^T]Tx{O~.LP,PX]Ke%\"><arg name=\"v\" id=\"44kzxz4owmihy1tawpb3\" type=\"number\"></arg><arg name=\"lo\" id=\"qoqf9ciqb4y3crv8laayo\" type=\"number\"></arg><arg name=\"hi\" id=\"247682caveqe065wi9nef\" type=\"number\"></arg></mutation><value name=\"44kzxz4owmihy1tawpb3\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"Ximo`t(?un[/3,AIzDrW\">rightTarget</field></block></value><value name=\"qoqf9ciqb4y3crv8laayo\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MINUS</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"GA?c$GIud;2mk955iHB)\">MAX_SPEED</field></block></value></block></value><value name=\"247682caveqe065wi9nef\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"GA?c$GIud;2mk955iHB)\">MAX_SPEED</field></block></value></block></value><value name=\"v6ev7wym39hrt3nyabg3\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\",8P~(Pvfh-rvWv,TFs04\">RATE_LIMIT</field></block></value></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"1()+F|!eRLjWE*WL%jGq\">prevLeft</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"T96T~1D)7{lqyiV3WS)h\">leftTarget</field></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"+`RHQ}Hp.j2swMc%S$$k\">prevRight</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"Ximo`t(?un[/3,AIzDrW\">rightTarget</field></block></value><next><block type=\"radio_datagram_send_string\"><value name=\"msg\"><block type=\"text_join\"><mutation items=\"3\"></mutation><value name=\"ADD0\"><shadow type=\"text\"><field name=\"TEXT\"></field></shadow><block type=\"typescript_expression\"><field name=\"EXPRESSION\">leftTarget.toString()</field></block></value><value name=\"ADD1\"><shadow type=\"text\"><field name=\"TEXT\">,</field></shadow></value><value name=\"ADD2\"><shadow type=\"text\"><field name=\"TEXT\"></field></shadow><block type=\"typescript_expression\"><field name=\"EXPRESSION\">rightTarget.toString()</field></block></value></block></value><next><block type=\"device_pause\"><value name=\"pause\"><shadow type=\"timePicker\"><field name=\"ms\">500</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"/tan]#m)^RocHI]84Syt\">LOOP_MS</field></block></value></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></statement></block><block type=\"function_definition\" x=\"1752\" y=\"0\"><mutation name=\"clamp\" functionid=\"gd^T]Tx{O~.LP,PX]Ke%\"><arg name=\"v\" id=\"44kzxz4owmihy1tawpb3\" type=\"number\"></arg><arg name=\"lo\" id=\"qoqf9ciqb4y3crv8laayo\" type=\"number\"></arg><arg name=\"hi\" id=\"247682caveqe065wi9nef\" type=\"number\"></arg></mutation><field name=\"function_name\">clamp</field><value name=\"44kzxz4owmihy1tawpb3\"><block type=\"argument_reporter_number\" deletable=\"false\"><field name=\"VALUE\">v</field></block></value><value name=\"qoqf9ciqb4y3crv8laayo\"><block type=\"argument_reporter_number\" deletable=\"false\"><field name=\"VALUE\">lo</field></block></value><value name=\"247682caveqe065wi9nef\"><block type=\"argument_reporter_number\" deletable=\"false\"><field name=\"VALUE\">hi</field></block></value><statement name=\"STACK\"><block type=\"controls_if\"><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">LT</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"argument_reporter_number\"><field name=\"VALUE\">v</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"argument_reporter_number\"><field name=\"VALUE\">lo</field></block></value></block></value><statement name=\"DO0\"><block type=\"function_return\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" no_return_value=\"false\"></mutation><value name=\"RETURN_VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"argument_reporter_number\"><field name=\"VALUE\">lo</field></block></value></block></statement><next><block type=\"controls_if\"><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">GT</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"argument_reporter_number\"><field name=\"VALUE\">v</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"argument_reporter_number\"><field name=\"VALUE\">hi</field></block></value></block></value><statement name=\"DO0\"><block type=\"function_return\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" no_return_value=\"false\"></mutation><value name=\"RETURN_VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"argument_reporter_number\"><field name=\"VALUE\">hi</field></block></value></block></statement><next><block type=\"function_return\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" no_return_value=\"false\"></mutation><value name=\"RETURN_VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"argument_reporter_number\"><field name=\"VALUE\">v</field></block></value></block></next></block></next></block></statement></block><block type=\"function_definition\" x=\"2152\" y=\"0\"><mutation name=\"rateLimit\" functionid=\"-qd,)4i)W8~vi}R,ICR?\"><arg name=\"prev\" id=\"t3rapsv83ogcq7yl2vv6d\" type=\"number\"></arg><arg name=\"target\" id=\"g3rhmejmcyht7hertyafg\" type=\"number\"></arg><arg name=\"maxDelta\" id=\"v6ev7wym39hrt3nyabg3\" type=\"number\"></arg></mutation><field name=\"function_name\">rateLimit</field><value name=\"t3rapsv83ogcq7yl2vv6d\"><block type=\"argument_reporter_number\" deletable=\"false\"><field name=\"VALUE\">prev</field></block></value><value name=\"g3rhmejmcyht7hertyafg\"><block type=\"argument_reporter_number\" deletable=\"false\"><field name=\"VALUE\">target</field></block></value><value name=\"v6ev7wym39hrt3nyabg3\"><block type=\"argument_reporter_number\" deletable=\"false\"><field name=\"VALUE\">maxDelta</field></block></value><statement name=\"STACK\"><block type=\"variables_set\"><field name=\"VAR\" id=\"4:qPykg5)^72Mhc8kql}\">delta</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MINUS</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"argument_reporter_number\"><field name=\"VALUE\">target</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"argument_reporter_number\"><field name=\"VALUE\">prev</field></block></value></block></value><next><block type=\"controls_if\"><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">GT</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"4:qPykg5)^72Mhc8kql}\">delta</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"argument_reporter_number\"><field name=\"VALUE\">maxDelta</field></block></value></block></value><statement name=\"DO0\"><block type=\"variables_set\"><field name=\"VAR\" id=\"4:qPykg5)^72Mhc8kql}\">delta</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"argument_reporter_number\"><field name=\"VALUE\">maxDelta</field></block></value></block></statement><next><block type=\"controls_if\"><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">LT</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"4:qPykg5)^72Mhc8kql}\">delta</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MINUS</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"argument_reporter_number\"><field name=\"VALUE\">maxDelta</field></block></value></block></value></block></value><statement name=\"DO0\"><block type=\"variables_set\"><field name=\"VAR\" id=\"4:qPykg5)^72Mhc8kql}\">delta</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MINUS</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"argument_reporter_number\"><field name=\"VALUE\">maxDelta</field></block></value></block></value></block></statement><next><block type=\"function_return\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" no_return_value=\"false\"></mutation><value name=\"RETURN_VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">ADD</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"argument_reporter_number\"><field name=\"VALUE\">prev</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"4:qPykg5)^72Mhc8kql}\">delta</field></block></value></block></value></block></next></block></next></block></next></block></statement></block></xml>","main.ts":"radio.setGroup(7)\n\nconst LOOP_MS = 25\nconst MAX_RAW = 1000\nconst MAX_SPEED = 255\nconst DEADZONE = 30\nconst TURN_POWER = 220      // max spin power when stationary\nconst TURN_MIX = 100        // gentle turning while moving\nconst RATE_LIMIT = 80\n\nlet neutralY = input.acceleration(Dimension.Y)\nlet prevLeft = 0\nlet prevRight = 0\n\nfunction clamp(v: number, lo: number, hi: number): number {\n    if (v < lo) return lo\n    if (v > hi) return hi\n    return v\n}\n\nfunction rateLimit(prev: number, target: number, maxDelta: number): number {\n    let delta = target - prev\n    if (delta > maxDelta) delta = maxDelta\n    if (delta < -maxDelta) delta = -maxDelta\n    return prev + delta\n}\n\nbasic.forever(function () {\n    // read tilt\n    let rawY = input.acceleration(Dimension.Y) - neutralY\n    let forwardRaw = -rawY\n    let baseSpeed = 0\n    let absRaw = Math.abs(forwardRaw)\n\n    // convert tilt to speed\n    if (absRaw > DEADZONE) {\n        let mag = (absRaw - DEADZONE) / (MAX_RAW - DEADZONE)\n        if (mag > 1) mag = 1\n        baseSpeed = Math.trunc(mag * MAX_SPEED)\n        if (forwardRaw > 0) baseSpeed = -baseSpeed // backward tilt\n    }\n\n    let leftTarget = baseSpeed\n    let rightTarget = baseSpeed\n\n    // steering logic\n    let turnLeft = input.buttonIsPressed(Button.A)\n    let turnRight = input.buttonIsPressed(Button.B)\n\n    if (turnLeft && turnRight) {\n        // stop if both pressed\n        leftTarget = 0\n        rightTarget = 0\n        basic.showIcon(IconNames.No)\n    } else if (turnLeft || turnRight) {\n        let turnSign = turnRight ? 1 : -1\n        if (baseSpeed != 0) {\n            // turning while moving  gentle mix\n            leftTarget = clamp(baseSpeed - turnSign * TURN_MIX, -MAX_SPEED, MAX_SPEED)\n            rightTarget = clamp(baseSpeed + turnSign * TURN_MIX, -MAX_SPEED, MAX_SPEED)\n        } else {\n            // spin in place when stationary\n            leftTarget = -turnSign * TURN_POWER\n            rightTarget = turnSign * TURN_POWER\n        }\n\n        if (turnSign > 0) basic.showArrow(ArrowNames.East)\n        else basic.showArrow(ArrowNames.West)\n    } else {\n        // show direction of motion\n        if (baseSpeed > 30) basic.showArrow(ArrowNames.North)\n        else if (baseSpeed < -30) basic.showArrow(ArrowNames.South)\n        else basic.clearScreen()\n    }\n\n    // clamp & smooth\n    leftTarget = rateLimit(prevLeft, clamp(leftTarget, -MAX_SPEED, MAX_SPEED), RATE_LIMIT)\n    rightTarget = rateLimit(prevRight, clamp(rightTarget, -MAX_SPEED, MAX_SPEED), RATE_LIMIT)\n\n    prevLeft = leftTarget\n    prevRight = rightTarget\n\n    radio.sendString(leftTarget.toString() + \",\" + rightTarget.toString())\n    basic.pause(LOOP_MS)\n})\n\n","README.md":"","main.py":"","pxt.json":"{\n    \"name\": \"ftir\",\n    \"description\": \"\",\n    \"dependencies\": {\n        \"core\": \"*\",\n        \"radio\": \"*\",\n        \"microphone\": \"*\",\n        \"radio-broadcast\": \"*\",\n        \"pxt-rekabit\": \"github:cytrontechnologies/pxt-rekabit#v1.2.3\"\n    },\n    \"files\": [\n        \"main.blocks\",\n        \"main.ts\",\n        \"README.md\",\n        \"main.py\"\n    ],\n    \"preferredEditor\": \"tsprj\"\n}\n"}},{"timestamp":1759798990191,"editorVersion":"8.0.16","text":{"main.blocks":"<xml xmlns=\"https://developers.google.com/blockly/xml\"><variables><variable id=\"4:qPykg5)^72Mhc8kql}\">delta</variable><variable id=\"J~]M!m;mE5DW7I!UzXlz\">rawY</variable><variable id=\"A*]H3zIaO1gF@6fz@*1K\">neutralY</variable><variable id=\"9{@^NwNBa!QRe#(_VCi0\">forwardRaw</variable><variable id=\"$eL(:q~u7?6|ZwQrtu?2\">absRaw</variable><variable id=\";s*9nsIt0CB$dpODbVt#\">DEADZONE</variable><variable id=\"}?l`f.LshgyX9Whg-p3_\">mag</variable><variable id=\"r?h3NfTK9%[%vf0PxQE]\">MAX_RAW</variable><variable id=\";k;Ru+Mjb9-AZB`aGz%C\">baseSpeed</variable><variable id=\"GA?c$GIud;2mk955iHB)\">MAX_SPEED</variable><variable id=\"T96T~1D)7{lqyiV3WS)h\">leftTarget</variable><variable id=\"Ximo`t(?un[/3,AIzDrW\">rightTarget</variable><variable id=\"2!XA-pg#%]OGla$n2Q2i\">turnLeft</variable><variable id=\"VH$HYlt55|/|r7N4]|PR\">turnRight</variable><variable id=\"t-|=(RsvZI3K6rwt~+%`\">turnSign</variable><variable id=\"U9@tZIoRj4N:pmG-LdEm\">TURN_MIX</variable><variable id=\"c5|VYf(M9wz[@zQPu5gu\">TURN_POWER</variable><variable id=\"1()+F|!eRLjWE*WL%jGq\">prevLeft</variable><variable id=\",8P~(Pvfh-rvWv,TFs04\">RATE_LIMIT</variable><variable id=\"+`RHQ}Hp.j2swMc%S$$k\">prevRight</variable><variable id=\"/tan]#m)^RocHI]84Syt\">LOOP_MS</variable></variables><block type=\"pxt-on-start\" x=\"0\" y=\"0\"><statement name=\"HANDLER\"><block type=\"radio_set_group\"><value name=\"ID\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"255\" precision=\"0\"></mutation><field name=\"SLIDER\">7</field></shadow></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"/tan]#m)^RocHI]84Syt\">LOOP_MS</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">25</field></shadow></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"r?h3NfTK9%[%vf0PxQE]\">MAX_RAW</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">1000</field></shadow></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"GA?c$GIud;2mk955iHB)\">MAX_SPEED</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">255</field></shadow></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\";s*9nsIt0CB$dpODbVt#\">DEADZONE</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">30</field></shadow></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"c5|VYf(M9wz[@zQPu5gu\">TURN_POWER</field><comment pinned=\"false\" h=\"80\" w=\"160\">max spin power when stationary</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">220</field></shadow></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"U9@tZIoRj4N:pmG-LdEm\">TURN_MIX</field><comment pinned=\"false\" h=\"80\" w=\"160\">gentle turning while moving</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">100</field></shadow></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\",8P~(Pvfh-rvWv,TFs04\">RATE_LIMIT</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">80</field></shadow></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"A*]H3zIaO1gF@6fz@*1K\">neutralY</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"device_acceleration\"><field name=\"NAME\">Dimension.Y</field></block></value></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></statement></block><block type=\"device_forever\" x=\"503\" y=\"0\"><statement name=\"HANDLER\"><block type=\"variables_set\"><field name=\"VAR\" id=\"J~]M!m;mE5DW7I!UzXlz\">rawY</field><comment pinned=\"false\" h=\"80\" w=\"160\">read tilt</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MINUS</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"device_acceleration\"><field name=\"NAME\">Dimension.Y</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"A*]H3zIaO1gF@6fz@*1K\">neutralY</field></block></value></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"9{@^NwNBa!QRe#(_VCi0\">forwardRaw</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MINUS</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"J~]M!m;mE5DW7I!UzXlz\">rawY</field></block></value></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"$eL(:q~u7?6|ZwQrtu?2\">absRaw</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_op3\"><value name=\"x\"><block type=\"variables_get\"><field name=\"VAR\" id=\"9{@^NwNBa!QRe#(_VCi0\">forwardRaw</field></block></value></block></value><next><block type=\"controls_if\"><comment pinned=\"false\" h=\"80\" w=\"160\">convert tilt to speed</comment><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">GT</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"$eL(:q~u7?6|ZwQrtu?2\">absRaw</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\";s*9nsIt0CB$dpODbVt#\">DEADZONE</field></block></value></block></value><statement name=\"DO0\"><block type=\"variables_set\"><field name=\"VAR\" id=\"}?l`f.LshgyX9Whg-p3_\">mag</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">DIVIDE</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MINUS</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"$eL(:q~u7?6|ZwQrtu?2\">absRaw</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\";s*9nsIt0CB$dpODbVt#\">DEADZONE</field></block></value></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MINUS</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"r?h3NfTK9%[%vf0PxQE]\">MAX_RAW</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\";s*9nsIt0CB$dpODbVt#\">DEADZONE</field></block></value></block></value></block></value><next><block type=\"controls_if\"><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">GT</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"}?l`f.LshgyX9Whg-p3_\">mag</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></value><statement name=\"DO0\"><block type=\"variables_set\"><field name=\"VAR\" id=\"}?l`f.LshgyX9Whg-p3_\">mag</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></statement><next><block type=\"variables_set\"><field name=\"VAR\" id=\";k;Ru+Mjb9-AZB`aGz%C\">baseSpeed</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_js_round\"><field name=\"OP\">trunc</field><value name=\"ARG0\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MULTIPLY</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"}?l`f.LshgyX9Whg-p3_\">mag</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"GA?c$GIud;2mk955iHB)\">MAX_SPEED</field></block></value></block></value></block></value><next><block type=\"controls_if\"><comment pinned=\"false\" h=\"80\" w=\"160\">backward tilt</comment><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">GT</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"9{@^NwNBa!QRe#(_VCi0\">forwardRaw</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value></block></value><statement name=\"DO0\"><block type=\"variables_set\"><field name=\"VAR\" id=\";k;Ru+Mjb9-AZB`aGz%C\">baseSpeed</field><data>{\"commentRefs\":[],\"fieldData\":{}}</data><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MINUS</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\";k;Ru+Mjb9-AZB`aGz%C\">baseSpeed</field></block></value></block></value></block></statement></block></next></block></next></block></next></block></statement><next><block type=\"variables_set\"><field name=\"VAR\" id=\"T96T~1D)7{lqyiV3WS)h\">leftTarget</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\";k;Ru+Mjb9-AZB`aGz%C\">baseSpeed</field></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"Ximo`t(?un[/3,AIzDrW\">rightTarget</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\";k;Ru+Mjb9-AZB`aGz%C\">baseSpeed</field></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"2!XA-pg#%]OGla$n2Q2i\">turnLeft</field><comment pinned=\"false\" h=\"80\" w=\"160\">steering logic</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"device_get_button2\"><field name=\"NAME\">Button.A</field></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"VH$HYlt55|/|r7N4]|PR\">turnRight</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"device_get_button2\"><field name=\"NAME\">Button.B</field></block></value><next><block type=\"controls_if\"><mutation elseif=\"1\" else=\"1\"></mutation><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_operation\"><field name=\"OP\">AND</field><value name=\"A\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"2!XA-pg#%]OGla$n2Q2i\">turnLeft</field></block></value><value name=\"B\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"VH$HYlt55|/|r7N4]|PR\">turnRight</field></block></value></block></value><statement name=\"DO0\"><block type=\"variables_set\"><field name=\"VAR\" id=\"T96T~1D)7{lqyiV3WS)h\">leftTarget</field><comment pinned=\"false\" h=\"80\" w=\"160\">stop if both pressed</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"Ximo`t(?un[/3,AIzDrW\">rightTarget</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><next><block type=\"basic_show_icon\"><field name=\"i\">IconNames.No</field></block></next></block></next></block></statement><value name=\"IF1\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_operation\"><field name=\"OP\">OR</field><value name=\"A\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"2!XA-pg#%]OGla$n2Q2i\">turnLeft</field></block></value><value name=\"B\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"VH$HYlt55|/|r7N4]|PR\">turnRight</field></block></value></block></value><statement name=\"DO1\"><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"let turnSign = turnRight ? 1 : -1\" numlines=\"1\" declaredvars=\"turnSign\"></mutation><next><block type=\"controls_if\"><mutation else=\"1\"></mutation><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">NEQ</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\";k;Ru+Mjb9-AZB`aGz%C\">baseSpeed</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value></block></value><statement name=\"DO0\"><block type=\"variables_set\"><field name=\"VAR\" id=\"T96T~1D)7{lqyiV3WS)h\">leftTarget</field><comment pinned=\"false\" h=\"80\" w=\"160\">turning while moving  gentle mix</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"function_call_output\"><mutation name=\"clamp\" functionid=\"gd^T]Tx{O~.LP,PX]Ke%\"><arg name=\"v\" id=\"44kzxz4owmihy1tawpb3\" type=\"number\"></arg><arg name=\"lo\" id=\"qoqf9ciqb4y3crv8laayo\" type=\"number\"></arg><arg name=\"hi\" id=\"247682caveqe065wi9nef\" type=\"number\"></arg></mutation><value name=\"44kzxz4owmihy1tawpb3\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MINUS</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\";k;Ru+Mjb9-AZB`aGz%C\">baseSpeed</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MULTIPLY</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"t-|=(RsvZI3K6rwt~+%`\">turnSign</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"U9@tZIoRj4N:pmG-LdEm\">TURN_MIX</field></block></value></block></value></block></value><value name=\"qoqf9ciqb4y3crv8laayo\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MINUS</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"GA?c$GIud;2mk955iHB)\">MAX_SPEED</field></block></value></block></value><value name=\"247682caveqe065wi9nef\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"GA?c$GIud;2mk955iHB)\">MAX_SPEED</field></block></value></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"Ximo`t(?un[/3,AIzDrW\">rightTarget</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"function_call_output\"><mutation name=\"clamp\" functionid=\"gd^T]Tx{O~.LP,PX]Ke%\"><arg name=\"v\" id=\"44kzxz4owmihy1tawpb3\" type=\"number\"></arg><arg name=\"lo\" id=\"qoqf9ciqb4y3crv8laayo\" type=\"number\"></arg><arg name=\"hi\" id=\"247682caveqe065wi9nef\" type=\"number\"></arg></mutation><value name=\"44kzxz4owmihy1tawpb3\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">ADD</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\";k;Ru+Mjb9-AZB`aGz%C\">baseSpeed</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MULTIPLY</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"t-|=(RsvZI3K6rwt~+%`\">turnSign</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"U9@tZIoRj4N:pmG-LdEm\">TURN_MIX</field></block></value></block></value></block></value><value name=\"qoqf9ciqb4y3crv8laayo\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MINUS</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"GA?c$GIud;2mk955iHB)\">MAX_SPEED</field></block></value></block></value><value name=\"247682caveqe065wi9nef\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"GA?c$GIud;2mk955iHB)\">MAX_SPEED</field></block></value></block></value></block></next></block></statement><statement name=\"ELSE\"><block type=\"variables_set\"><field name=\"VAR\" id=\"T96T~1D)7{lqyiV3WS)h\">leftTarget</field><comment pinned=\"false\" h=\"80\" w=\"160\">spin in place when stationary</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MULTIPLY</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MINUS</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"t-|=(RsvZI3K6rwt~+%`\">turnSign</field></block></value></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"c5|VYf(M9wz[@zQPu5gu\">TURN_POWER</field></block></value></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"Ximo`t(?un[/3,AIzDrW\">rightTarget</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MULTIPLY</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"t-|=(RsvZI3K6rwt~+%`\">turnSign</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"c5|VYf(M9wz[@zQPu5gu\">TURN_POWER</field></block></value></block></value></block></next></block></statement><next><block type=\"controls_if\"><mutation else=\"1\"></mutation><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">GT</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"t-|=(RsvZI3K6rwt~+%`\">turnSign</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value></block></value><statement name=\"DO0\"><block type=\"basic_show_arrow\"><value name=\"i\"><shadow type=\"device_arrow\"><field name=\"arrow\">ArrowNames.East</field></shadow></value></block></statement><statement name=\"ELSE\"><block type=\"basic_show_arrow\"><value name=\"i\"><shadow type=\"device_arrow\"><field name=\"arrow\">ArrowNames.West</field></shadow></value></block></statement></block></next></block></next></block></statement><statement name=\"ELSE\"><block type=\"controls_if\"><mutation elseif=\"1\" else=\"1\"></mutation><comment pinned=\"false\" h=\"80\" w=\"160\">show direction of motion</comment><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">GT</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\";k;Ru+Mjb9-AZB`aGz%C\">baseSpeed</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">30</field></shadow></value></block></value><statement name=\"DO0\"><block type=\"basic_show_arrow\"><value name=\"i\"><shadow type=\"device_arrow\"><field name=\"arrow\">ArrowNames.North</field></shadow></value></block></statement><value name=\"IF1\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">LT</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\";k;Ru+Mjb9-AZB`aGz%C\">baseSpeed</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">-30</field></shadow></value></block></value><statement name=\"DO1\"><block type=\"basic_show_arrow\"><value name=\"i\"><shadow type=\"device_arrow\"><field name=\"arrow\">ArrowNames.South</field></shadow></value></block></statement><statement name=\"ELSE\"><block type=\"device_clear_display\"></block></statement></block></statement><next><block type=\"variables_set\"><field name=\"VAR\" id=\"T96T~1D)7{lqyiV3WS)h\">leftTarget</field><comment pinned=\"false\" h=\"80\" w=\"160\">clamp &amp; smooth</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"function_call_output\"><mutation name=\"rateLimit\" functionid=\"-qd,)4i)W8~vi}R,ICR?\"><arg name=\"prev\" id=\"t3rapsv83ogcq7yl2vv6d\" type=\"number\"></arg><arg name=\"target\" id=\"g3rhmejmcyht7hertyafg\" type=\"number\"></arg><arg name=\"maxDelta\" id=\"v6ev7wym39hrt3nyabg3\" type=\"number\"></arg></mutation><value name=\"t3rapsv83ogcq7yl2vv6d\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"1()+F|!eRLjWE*WL%jGq\">prevLeft</field></block></value><value name=\"g3rhmejmcyht7hertyafg\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow><block type=\"function_call_output\"><mutation name=\"clamp\" functionid=\"gd^T]Tx{O~.LP,PX]Ke%\"><arg name=\"v\" id=\"44kzxz4owmihy1tawpb3\" type=\"number\"></arg><arg name=\"lo\" id=\"qoqf9ciqb4y3crv8laayo\" type=\"number\"></arg><arg name=\"hi\" id=\"247682caveqe065wi9nef\" type=\"number\"></arg></mutation><value name=\"44kzxz4owmihy1tawpb3\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"T96T~1D)7{lqyiV3WS)h\">leftTarget</field></block></value><value name=\"qoqf9ciqb4y3crv8laayo\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MINUS</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"GA?c$GIud;2mk955iHB)\">MAX_SPEED</field></block></value></block></value><value name=\"247682caveqe065wi9nef\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"GA?c$GIud;2mk955iHB)\">MAX_SPEED</field></block></value></block></value><value name=\"v6ev7wym39hrt3nyabg3\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\",8P~(Pvfh-rvWv,TFs04\">RATE_LIMIT</field></block></value></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"Ximo`t(?un[/3,AIzDrW\">rightTarget</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"function_call_output\"><mutation name=\"rateLimit\" functionid=\"-qd,)4i)W8~vi}R,ICR?\"><arg name=\"prev\" id=\"t3rapsv83ogcq7yl2vv6d\" type=\"number\"></arg><arg name=\"target\" id=\"g3rhmejmcyht7hertyafg\" type=\"number\"></arg><arg name=\"maxDelta\" id=\"v6ev7wym39hrt3nyabg3\" type=\"number\"></arg></mutation><value name=\"t3rapsv83ogcq7yl2vv6d\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"+`RHQ}Hp.j2swMc%S$$k\">prevRight</field></block></value><value name=\"g3rhmejmcyht7hertyafg\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow><block type=\"function_call_output\"><mutation name=\"clamp\" functionid=\"gd^T]Tx{O~.LP,PX]Ke%\"><arg name=\"v\" id=\"44kzxz4owmihy1tawpb3\" type=\"number\"></arg><arg name=\"lo\" id=\"qoqf9ciqb4y3crv8laayo\" type=\"number\"></arg><arg name=\"hi\" id=\"247682caveqe065wi9nef\" type=\"number\"></arg></mutation><value name=\"44kzxz4owmihy1tawpb3\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"Ximo`t(?un[/3,AIzDrW\">rightTarget</field></block></value><value name=\"qoqf9ciqb4y3crv8laayo\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MINUS</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"GA?c$GIud;2mk955iHB)\">MAX_SPEED</field></block></value></block></value><value name=\"247682caveqe065wi9nef\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"GA?c$GIud;2mk955iHB)\">MAX_SPEED</field></block></value></block></value><value name=\"v6ev7wym39hrt3nyabg3\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\",8P~(Pvfh-rvWv,TFs04\">RATE_LIMIT</field></block></value></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"1()+F|!eRLjWE*WL%jGq\">prevLeft</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"T96T~1D)7{lqyiV3WS)h\">leftTarget</field></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"+`RHQ}Hp.j2swMc%S$$k\">prevRight</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"Ximo`t(?un[/3,AIzDrW\">rightTarget</field></block></value><next><block type=\"radio_datagram_send_string\"><value name=\"msg\"><block type=\"text_join\"><mutation items=\"3\"></mutation><value name=\"ADD0\"><shadow type=\"text\"><field name=\"TEXT\"></field></shadow><block type=\"typescript_expression\"><field name=\"EXPRESSION\">leftTarget.toString()</field></block></value><value name=\"ADD1\"><shadow type=\"text\"><field name=\"TEXT\">,</field></shadow></value><value name=\"ADD2\"><shadow type=\"text\"><field name=\"TEXT\"></field></shadow><block type=\"typescript_expression\"><field name=\"EXPRESSION\">rightTarget.toString()</field></block></value></block></value><next><block type=\"device_pause\"><value name=\"pause\"><shadow type=\"timePicker\"><field name=\"ms\">500</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"/tan]#m)^RocHI]84Syt\">LOOP_MS</field></block></value></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></statement></block><block type=\"function_definition\" x=\"1752\" y=\"0\"><mutation name=\"clamp\" functionid=\"gd^T]Tx{O~.LP,PX]Ke%\"><arg name=\"v\" id=\"44kzxz4owmihy1tawpb3\" type=\"number\"></arg><arg name=\"lo\" id=\"qoqf9ciqb4y3crv8laayo\" type=\"number\"></arg><arg name=\"hi\" id=\"247682caveqe065wi9nef\" type=\"number\"></arg></mutation><field name=\"function_name\">clamp</field><value name=\"44kzxz4owmihy1tawpb3\"><block type=\"argument_reporter_number\" deletable=\"false\"><field name=\"VALUE\">v</field></block></value><value name=\"qoqf9ciqb4y3crv8laayo\"><block type=\"argument_reporter_number\" deletable=\"false\"><field name=\"VALUE\">lo</field></block></value><value name=\"247682caveqe065wi9nef\"><block type=\"argument_reporter_number\" deletable=\"false\"><field name=\"VALUE\">hi</field></block></value><statement name=\"STACK\"><block type=\"controls_if\"><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">LT</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"argument_reporter_number\"><field name=\"VALUE\">v</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"argument_reporter_number\"><field name=\"VALUE\">lo</field></block></value></block></value><statement name=\"DO0\"><block type=\"function_return\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" no_return_value=\"false\"></mutation><value name=\"RETURN_VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"argument_reporter_number\"><field name=\"VALUE\">lo</field></block></value></block></statement><next><block type=\"controls_if\"><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">GT</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"argument_reporter_number\"><field name=\"VALUE\">v</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"argument_reporter_number\"><field name=\"VALUE\">hi</field></block></value></block></value><statement name=\"DO0\"><block type=\"function_return\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" no_return_value=\"false\"></mutation><value name=\"RETURN_VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"argument_reporter_number\"><field name=\"VALUE\">hi</field></block></value></block></statement><next><block type=\"function_return\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" no_return_value=\"false\"></mutation><value name=\"RETURN_VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"argument_reporter_number\"><field name=\"VALUE\">v</field></block></value></block></next></block></next></block></statement></block><block type=\"function_definition\" x=\"2152\" y=\"0\"><mutation name=\"rateLimit\" functionid=\"-qd,)4i)W8~vi}R,ICR?\"><arg name=\"prev\" id=\"t3rapsv83ogcq7yl2vv6d\" type=\"number\"></arg><arg name=\"target\" id=\"g3rhmejmcyht7hertyafg\" type=\"number\"></arg><arg name=\"maxDelta\" id=\"v6ev7wym39hrt3nyabg3\" type=\"number\"></arg></mutation><field name=\"function_name\">rateLimit</field><value name=\"t3rapsv83ogcq7yl2vv6d\"><block type=\"argument_reporter_number\" deletable=\"false\"><field name=\"VALUE\">prev</field></block></value><value name=\"g3rhmejmcyht7hertyafg\"><block type=\"argument_reporter_number\" deletable=\"false\"><field name=\"VALUE\">target</field></block></value><value name=\"v6ev7wym39hrt3nyabg3\"><block type=\"argument_reporter_number\" deletable=\"false\"><field name=\"VALUE\">maxDelta</field></block></value><statement name=\"STACK\"><block type=\"variables_set\"><field name=\"VAR\" id=\"4:qPykg5)^72Mhc8kql}\">delta</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MINUS</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"argument_reporter_number\"><field name=\"VALUE\">target</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"argument_reporter_number\"><field name=\"VALUE\">prev</field></block></value></block></value><next><block type=\"controls_if\"><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">GT</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"4:qPykg5)^72Mhc8kql}\">delta</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"argument_reporter_number\"><field name=\"VALUE\">maxDelta</field></block></value></block></value><statement name=\"DO0\"><block type=\"variables_set\"><field name=\"VAR\" id=\"4:qPykg5)^72Mhc8kql}\">delta</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"argument_reporter_number\"><field name=\"VALUE\">maxDelta</field></block></value></block></statement><next><block type=\"controls_if\"><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">LT</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"4:qPykg5)^72Mhc8kql}\">delta</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MINUS</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"argument_reporter_number\"><field name=\"VALUE\">maxDelta</field></block></value></block></value></block></value><statement name=\"DO0\"><block type=\"variables_set\"><field name=\"VAR\" id=\"4:qPykg5)^72Mhc8kql}\">delta</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MINUS</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"argument_reporter_number\"><field name=\"VALUE\">maxDelta</field></block></value></block></value></block></statement><next><block type=\"function_return\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" no_return_value=\"false\"></mutation><value name=\"RETURN_VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">ADD</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"argument_reporter_number\"><field name=\"VALUE\">prev</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"4:qPykg5)^72Mhc8kql}\">delta</field></block></value></block></value></block></next></block></next></block></next></block></statement></block></xml>","main.ts":"radio.setGroup(7)\n\nconst RADIO_GROUP = 7\nconst TIMEOUT_MS = 500\nconst MAX_SPEED = 255\nconst LOOP_MS = 25\n\nlet lastPacketTime = input.runningTime()\nlet targetLeft = 0\nlet targetRight = 0\n\nconst INVERT_LEFT = false\nconst INVERT_RIGHT = false\n\nradio.setGroup(RADIO_GROUP)\n\nfunction clamp(v: number, lo: number, hi: number): number {\n    if (v < lo) return lo\n    if (v > hi) return hi\n    return v\n}\n\nradio.onReceivedString(function (receivedString: string) {\n    lastPacketTime = input.runningTime()\n    let parts = receivedString.split(\",\")\n    if (parts.length < 3) return\n\n    let leftVal = parseInt(parts[1])\n    let rightVal = parseInt(parts[2])\n    if (isNaN(leftVal) || isNaN(rightVal)) return\n\n    targetLeft = clamp(leftVal, -MAX_SPEED, MAX_SPEED)\n    targetRight = clamp(rightVal, -MAX_SPEED, MAX_SPEED)\n})\n\nbasic.forever(function () {\n    let now = input.runningTime()\n    if (now - lastPacketTime > TIMEOUT_MS) {\n        targetLeft = 0\n        targetRight = 0\n        rekabit.brakeMotor(MotorChannel.All)\n        basic.pause(20)\n        return\n    }\n\n    let outLeft = INVERT_LEFT ? -targetLeft : targetLeft\n    let outRight = INVERT_RIGHT ? -targetRight : targetRight\n\n    if (outLeft > 0) rekabit.runMotor(MotorChannel.M1, MotorDirection.Forward, outLeft)\n    else if (outLeft < 0) rekabit.runMotor(MotorChannel.M1, MotorDirection.Backward, -outLeft)\n    else rekabit.brakeMotor(MotorChannel.M1)\n\n    if (outRight > 0) rekabit.runMotor(MotorChannel.M2, MotorDirection.Forward, outRight)\n    else if (outRight < 0) rekabit.runMotor(MotorChannel.M2, MotorDirection.Backward, -outRight)\n    else rekabit.brakeMotor(MotorChannel.M2)\n\n    basic.pause(LOOP_MS)\n})\n","README.md":"","main.py":"","pxt.json":"{\n    \"name\": \"receiver\",\n    \"description\": \"\",\n    \"dependencies\": {\n        \"core\": \"*\",\n        \"radio\": \"*\",\n        \"microphone\": \"*\",\n        \"radio-broadcast\": \"*\",\n        \"pxt-rekabit\": \"github:cytrontechnologies/pxt-rekabit#v1.2.3\"\n    },\n    \"files\": [\n        \"main.blocks\",\n        \"main.ts\",\n        \"README.md\",\n        \"main.py\"\n    ],\n    \"preferredEditor\": \"tsprj\"\n}\n"}}],"shares":[],"lastSaveTime":1759798990232}